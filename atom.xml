<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Learning and Doing</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-09-23T13:55:53.843Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Zhang Yang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>【实战】Ozon产品列表页及产品详情页nodejs爬虫</title>
    <link href="http://yoursite.com/2018/09/18/2018.9.18/"/>
    <id>http://yoursite.com/2018/09/18/2018.9.18/</id>
    <published>2018-09-18T15:16:41.000Z</published>
    <updated>2018-09-23T13:55:53.843Z</updated>
    
    <content type="html"><![CDATA[<h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><a id="more"></a>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// package.json</span></div><div class="line">&#123;</div><div class="line">  <span class="string">"name"</span>: <span class="string">"1"</span>,</div><div class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</div><div class="line">  <span class="string">"description"</span>: <span class="string">""</span>,</div><div class="line">  <span class="string">"main"</span>: <span class="string">"index.js"</span>,</div><div class="line">  <span class="string">"dependencies"</span>: &#123;</div><div class="line">    <span class="string">"fs"</span>: <span class="string">"^0.0.1-security"</span>,</div><div class="line">    <span class="string">"https"</span>: <span class="string">"^1.0.0"</span>,</div><div class="line">    <span class="string">"iconv-lite"</span>: <span class="string">"^0.4.21"</span>,</div><div class="line">    <span class="string">"jsdom"</span>: <span class="string">"^11.7.0"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="string">"devDependencies"</span>: &#123;&#125;,</div><div class="line">  <span class="string">"scripts"</span>: &#123;</div><div class="line">    <span class="string">"test"</span>: <span class="string">"echo \"</span><span class="keyword">Error</span>: <span class="keyword">no</span> <span class="keyword">test</span> specified\<span class="string">" &amp;&amp; exit 1"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="string">"author"</span>: <span class="string">""</span>,</div><div class="line">  <span class="string">"license"</span>: <span class="string">"ISC"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// config/index.js</span></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line"></div><div class="line">    <span class="attr">options</span>: &#123;</div><div class="line">        <span class="attr">hostname</span>: <span class="string">'www.ozon.ru'</span>,</div><div class="line">        <span class="attr">port</span>: <span class="number">443</span>,</div><div class="line">        <span class="attr">path</span>: <span class="string">'/context/detail/id/144054492/'</span>,</div><div class="line">        <span class="attr">method</span>: <span class="string">'GET'</span>,</div><div class="line">        <span class="attr">headers</span>: &#123;</div><div class="line">            <span class="string">'accept'</span>:<span class="string">'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8'</span>,</div><div class="line">            <span class="string">'if-modified-since'</span>:<span class="string">'Fri, 08 Jun 2018 03:42:08 GMT'</span>,</div><div class="line">            <span class="string">'referer'</span>:<span class="string">'https://www.ozon.ru/catalog/1133763/?type=48856'</span>,</div><div class="line">            <span class="string">'upgrade-insecure-requests'</span>:<span class="number">1</span>,</div><div class="line">            <span class="string">'user-agent'</span>:<span class="string">'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.139 Safari/537.36'</span></div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">baseURL</span>: <span class="string">'https://www.ozon.ru'</span>,</div><div class="line">    <span class="attr">timeout</span>: <span class="number">3000</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// tool/generateExcel.js</span></div><div class="line"><span class="comment">// fs 文件系统模块</span></div><div class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</div><div class="line"><span class="comment">// 读取json中的数据，用String的concat函数拼接</span></div><div class="line"><span class="keyword">var</span> datas = <span class="built_in">require</span>(<span class="string">'../tmp/mid_output.json'</span>)</div><div class="line"></div><div class="line"><span class="keyword">var</span> culs = <span class="keyword">new</span> <span class="built_in">Object</span>()</div><div class="line"></div><div class="line"><span class="comment">// 数据处理函数，将数据中的','和'\n'替换成'，'和';'</span></div><div class="line"><span class="keyword">var</span> prepare = <span class="function"><span class="params">str</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">if</span> (str === <span class="literal">undefined</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">null</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// 这里的/,/g和/\n/g是正则表达式</span></div><div class="line">    <span class="keyword">return</span> str.replace(<span class="regexp">/,/g</span>,<span class="string">'，'</span>).replace(<span class="regexp">/\n/g</span>, <span class="string">';'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 删除没有params的数据</span></div><div class="line"><span class="keyword">var</span> num = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;datas.length;i++)&#123;</div><div class="line">  <span class="keyword">if</span>(datas[i].params === <span class="literal">undefined</span>)&#123;</div><div class="line">    datas.splice(i,<span class="number">1</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> num1 = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;datas.length;i++)&#123;</div><div class="line">  <span class="keyword">if</span>(datas[i].params == <span class="literal">undefined</span>)&#123;</div><div class="line">    num1 ++;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">datas.splice(datas.length-num1,num1);</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> data <span class="keyword">of</span> datas) &#123;</div><div class="line">  <span class="comment">// console.log(data)</span></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> param <span class="keyword">of</span> data.params) &#123;</div><div class="line">    <span class="comment">// 将datas中的所有的params的key，添加到culs中</span></div><div class="line">    <span class="keyword">if</span> (culs[param.key] === <span class="literal">undefined</span>) culs[param.key] = <span class="literal">true</span></div><div class="line">    <span class="comment">// 将datas中的params[i].key和params[i].value变成data[param.key] = param.value</span></div><div class="line">    data[param.key] = param.value</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// 删除data中的params</span></div><div class="line">  <span class="keyword">delete</span> data.params</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// console.log(datas[0].prototype === datas[1].prototype)</span></div><div class="line"></div><div class="line"><span class="comment">// console.log(culs)</span></div><div class="line"></div><div class="line"><span class="comment">// console.log(datas)</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> columnsName = <span class="string">'number,href,img,name,price,cnum'</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> culs) &#123;</div><div class="line">  columnsName += <span class="string">','</span> + prepare(key)</div><div class="line">&#125;</div><div class="line">columnsName += <span class="string">'\n'</span></div><div class="line">fs.writeFileSync(__dirname + <span class="string">'/../output/output.csv'</span>, columnsName, &#123;<span class="attr">flag</span>: <span class="string">'a'</span>&#125;, err =&gt; <span class="built_in">console</span>.log(err))</div><div class="line"></div><div class="line"><span class="keyword">var</span> cnt = <span class="number">1</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> data <span class="keyword">of</span> datas) &#123;</div><div class="line">  <span class="keyword">var</span> str = <span class="string">''</span></div><div class="line">  str += cnt++</div><div class="line">  str += <span class="string">','</span> + prepare(data.href)</div><div class="line">  str += <span class="string">','</span> + prepare(data.img)</div><div class="line">  str += <span class="string">','</span> + prepare(data.name)</div><div class="line">  str += <span class="string">','</span> + prepare(data.price)</div><div class="line">  str += <span class="string">','</span> + prepare(data.cnum)</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> culs) &#123;</div><div class="line">    str += <span class="string">','</span> + prepare(data[key])</div><div class="line">  &#125;</div><div class="line">  str += <span class="string">'\n'</span></div><div class="line">  <span class="comment">// 同步的写文件，将str写到'output.txt'，将flag设置为'a'，即append，将数据追加到源文件结尾</span></div><div class="line">  fs.writeFileSync(__dirname + <span class="string">'/../output/output.csv'</span>, str, &#123;<span class="attr">flag</span>: <span class="string">'a'</span>&#125;, err =&gt; <span class="built_in">console</span>.log(err))</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(cnt)</div><div class="line"></div><div class="line"><span class="comment">// tool/get.js</span></div><div class="line"><span class="keyword">const</span> https = <span class="built_in">require</span>(<span class="string">'https'</span>)</div><div class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</div><div class="line"><span class="keyword">const</span> iconv = <span class="built_in">require</span>(<span class="string">'iconv-lite'</span>)</div><div class="line"><span class="keyword">const</span> jsdom = <span class="built_in">require</span>(<span class="string">'jsdom'</span>)</div><div class="line"><span class="keyword">const</span> &#123; JSDOM &#125; = jsdom</div><div class="line"><span class="keyword">var</span> config = <span class="built_in">require</span>(<span class="string">'../config'</span>)</div><div class="line"></div><div class="line"><span class="keyword">var</span> items = <span class="keyword">new</span> <span class="built_in">Array</span>()</div><div class="line"></div><div class="line"><span class="keyword">var</span> getInput = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">var</span> result = fs.readFileSync(__dirname + <span class="string">'/../input/input.txt'</span>)</div><div class="line">    <span class="keyword">const</span> dom = <span class="keyword">new</span> JSDOM(result.toString())</div><div class="line">    <span class="comment">// const dom = new JSDOM('&lt;div&gt;&lt;div class="a"&gt;1&lt;div/&gt;&lt;div class="a"&gt;&lt;div&gt;2&lt;div/&gt;&lt;div/&gt;&lt;div/&gt;')</span></div><div class="line">    <span class="keyword">var</span> lines = dom.window.document.getElementsByClassName(<span class="string">'bOneTile inline'</span>)</div><div class="line">    <span class="keyword">var</span> i = <span class="number">1</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> line <span class="keyword">of</span> lines) &#123;</div><div class="line">        <span class="comment">// console.log(line['href'])</span></div><div class="line">        <span class="keyword">var</span> href = line.getElementsByClassName(<span class="string">'eOneTile_link'</span>)[<span class="number">0</span>].href</div><div class="line">        <span class="comment">//链接找整个div参数data-itemid的值</span></div><div class="line">        <span class="comment">//var id = line.getAttribute('data-itemid')</span></div><div class="line">        <span class="comment">//图片找第一个eOneTile_image_link的参数data-image-src</span></div><div class="line">        <span class="keyword">var</span> img = line.getElementsByClassName(<span class="string">'eOneTile_image_link'</span>)[<span class="number">0</span>].getAttribute(<span class="string">'data-image-src'</span>)</div><div class="line">        <span class="comment">//商品名找整个div参数的data-name</span></div><div class="line">        <span class="keyword">var</span> name = line.getAttribute(<span class="string">'data-name'</span>)</div><div class="line">        <span class="comment">//价钱找整个div参数的data-price</span></div><div class="line">        <span class="keyword">var</span> price = (line.getAttribute(<span class="string">'data-price'</span>) !== <span class="literal">undefined</span>) ? line.getAttribute(<span class="string">'data-price'</span>) : <span class="string">'null'</span></div><div class="line">        <span class="comment">//评论数找eOneTile_ReviewsCount的innerhtml</span></div><div class="line">        <span class="keyword">var</span> cnum = (line.getElementsByClassName(<span class="string">'eOneTile_ReviewsCount'</span>)[<span class="number">0</span>] === <span class="literal">undefined</span> ? <span class="string">'0'</span> : line.getElementsByClassName(<span class="string">'eOneTile_ReviewsCount'</span>)[<span class="number">0</span>].innerHTML)</div><div class="line">        items.push(&#123;</div><div class="line">            <span class="attr">href</span>: href,</div><div class="line">            <span class="attr">img</span>: img,</div><div class="line">            <span class="attr">name</span>: name,</div><div class="line">            <span class="attr">price</span>: price,</div><div class="line">            <span class="attr">cnum</span>: cnum</div><div class="line">        &#125;)</div><div class="line">        <span class="comment">// console.log(i++ + ' ' + href + '  ' + cnum)</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> getDetail = <span class="function"><span class="params">idx</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">var</span> item = items[idx]</div><div class="line">    config.options.path = item.href</div><div class="line">    <span class="keyword">const</span> req = https.get(config.options, res =&gt; &#123;</div><div class="line">        <span class="keyword">var</span> datas = []</div><div class="line">        <span class="keyword">var</span> size = <span class="number">0</span></div><div class="line">        res.on(<span class="string">'data'</span>, data =&gt; &#123;</div><div class="line">            datas.push(data)</div><div class="line">            size += data.length</div><div class="line">            <span class="comment">// console.log(data)</span></div><div class="line">        &#125;)</div><div class="line">        res.on(<span class="string">'end'</span>, () =&gt; &#123;</div><div class="line">            <span class="keyword">var</span> buff = Buffer.concat(datas, size)</div><div class="line">            <span class="keyword">var</span> result = iconv.decode(buff, <span class="string">'win1251'</span>)</div><div class="line">            <span class="comment">// console.log(result)</span></div><div class="line">            <span class="comment">// fs.writeFile('out',result, err =&gt; console.log(err))</span></div><div class="line"></div><div class="line">            <span class="keyword">const</span> dom = <span class="keyword">new</span> JSDOM(result.toString())</div><div class="line">            <span class="comment">// const dom = new JSDOM('&lt;div&gt;&lt;div class="a"&gt;1&lt;div/&gt;&lt;div class="a"&gt;&lt;div&gt;2&lt;div/&gt;&lt;div/&gt;&lt;div/&gt;')</span></div><div class="line">            <span class="keyword">var</span> lines = dom.window.document.getElementsByClassName(<span class="string">'eItemProperties_line'</span>)</div><div class="line">            item.params = <span class="keyword">new</span> <span class="built_in">Array</span>()</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> line <span class="keyword">of</span> lines) &#123;</div><div class="line">                <span class="keyword">var</span> key = line.childNodes[<span class="number">1</span>].innerHTML</div><div class="line">                <span class="keyword">var</span> value = line.childNodes[<span class="number">3</span>].innerHTML</div><div class="line">                item.params.push(&#123;</div><div class="line">                    <span class="attr">key</span>: key,</div><div class="line">                    <span class="attr">value</span>: value</div><div class="line">                &#125;)</div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">    &#125;)</div><div class="line">    req.end()</div><div class="line">    config.options.headers.referer = config.baseURL + item.href <span class="comment">// 这里修正了他的referer，模拟浏览器</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> getAllDetail = <span class="function">(<span class="params">idx, end</span>) =&gt;</span> () =&gt; &#123;</div><div class="line">    <span class="keyword">if</span> (idx &lt; end) &#123;</div><div class="line">        <span class="built_in">console</span>.log(idx)</div><div class="line">        getDetail(idx)</div><div class="line">        setTimeout(getAllDetail(idx + <span class="number">1</span>, end), config.timeout)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">// console.log(items)</span></div><div class="line">        setOutput()</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> setOutput = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    fs.writeFile(__dirname + <span class="string">'/../tmp/mid_output.json'</span>,<span class="built_in">JSON</span>.stringify(items), err =&gt; <span class="built_in">console</span>.log(err))</div><div class="line">&#125;</div><div class="line"></div><div class="line">getInput()</div><div class="line"></div><div class="line">setOutput()</div><div class="line"></div><div class="line">getAllDetail(<span class="number">0</span>, items.length)()</div></pre></td></tr></table></figure>
<h1 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h1><p>1.打开Qzon产品列表</p>
<p>2.按F12,选择列表div,右键copy-&gt;copy element</p>
<p>3.打开input.txt,将数据删除后粘贴新的数据</p>
<p>4.Ozon.ru点击页面左上角安全Cookies全部禁用,点击一个产品刷新,F12点击Network找到第一个(数字串),复制request headers</p>
<p>5.粘贴到index.js,对比上下修改</p>
<p>6.运行 node tool\get.js和node tool\generateExcel.js</p>
<p>7.注意完成后将页面的cookies屏蔽解除</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;配置文件&quot;&gt;&lt;a href=&quot;#配置文件&quot; class=&quot;headerlink&quot; title=&quot;配置文件&quot;&gt;&lt;/a&gt;配置文件&lt;/h1&gt;
    
    </summary>
    
      <category term="Node.js" scheme="http://yoursite.com/categories/Node-js/"/>
    
    
      <category term="node.js" scheme="http://yoursite.com/tags/node-js/"/>
    
  </entry>
  
  <entry>
    <title>【实战】亚马逊产品详情页nodejs爬虫</title>
    <link href="http://yoursite.com/2018/09/14/2018.9.14/"/>
    <id>http://yoursite.com/2018/09/14/2018.9.14/</id>
    <published>2018-09-14T15:16:41.000Z</published>
    <updated>2018-09-23T13:54:56.884Z</updated>
    
    <content type="html"><![CDATA[<h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><a id="more"></a>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// package.json</span></div><div class="line">&#123;</div><div class="line">  <span class="string">"name"</span>: <span class="string">"2"</span>,</div><div class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</div><div class="line">  <span class="string">"description"</span>: <span class="string">""</span>,</div><div class="line">  <span class="string">"main"</span>: <span class="string">"index_ali.js"</span>,</div><div class="line">  <span class="string">"dependencies"</span>: &#123;</div><div class="line">    <span class="string">"exceljs"</span>: <span class="string">"^1.0.0"</span>,</div><div class="line">    <span class="string">"iconv-lite"</span>: <span class="string">"^0.4.19"</span>,</div><div class="line">    <span class="string">"jsdom"</span>: <span class="string">"^11.6.2"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="string">"devDependencies"</span>: &#123;&#125;,</div><div class="line">  <span class="string">"scripts"</span>: &#123;</div><div class="line">    <span class="string">"test"</span>: <span class="string">"echo \"</span><span class="keyword">Error</span>: <span class="keyword">no</span> <span class="keyword">test</span> specified\<span class="string">" &amp;&amp; exit 1"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="string">"author"</span>: <span class="string">""</span>,</div><div class="line">  <span class="string">"license"</span>: <span class="string">"ISC"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// index_ali.js</span></div><div class="line"><span class="keyword">const</span> https = <span class="built_in">require</span>(<span class="string">'https'</span>)</div><div class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</div><div class="line"><span class="keyword">const</span> iconv = <span class="built_in">require</span>(<span class="string">'iconv-lite'</span>)</div><div class="line"><span class="keyword">const</span> jsdom = <span class="built_in">require</span>(<span class="string">'jsdom'</span>)</div><div class="line"><span class="keyword">const</span> &#123; JSDOM &#125; = jsdom</div><div class="line"></div><div class="line"><span class="keyword">var</span> items = <span class="keyword">new</span> <span class="built_in">Array</span>()</div><div class="line"></div><div class="line"><span class="keyword">var</span> getInput = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">var</span> datas = fs.readFileSync(<span class="string">'./input-ali.txt'</span>)</div><div class="line">    <span class="keyword">const</span> dom = <span class="keyword">new</span> JSDOM(datas.toString())</div><div class="line">    <span class="keyword">var</span> lines = dom.window.document.querySelectorAll(<span class="string">'.transaction-feedback-table tbody .col-order'</span>)</div><div class="line">    <span class="keyword">var</span> percentnum = dom.window.document.querySelector(<span class="string">'.percent-num'</span>).innerHTML </div><div class="line">    <span class="keyword">var</span> rantingsnum = dom.window.document.querySelector(<span class="string">'.rantings-num'</span>).innerHTML</div><div class="line">    <span class="keyword">var</span> ordernum = dom.window.document.querySelector(<span class="string">'.order-num'</span>).innerHTML</div><div class="line">    <span class="keyword">var</span> pprice = (dom.window.document.querySelector(<span class="string">'#j-sku-discount-price'</span>).innerHTML + dom.window.document.querySelector(<span class="string">'.p-symbol'</span>).innerHTML).replace(<span class="regexp">/&amp;nbsp;/</span>,<span class="string">''</span>)</div><div class="line">    <span class="keyword">var</span> pdiscountrate = dom.window.document.querySelector(<span class="string">'.p-discount-rate'</span>).innerHTML</div><div class="line">    <span class="keyword">var</span> wishlistnum = dom.window.document.querySelector(<span class="string">'.wishlist-num'</span>).innerHTML</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> line <span class="keyword">of</span> lines) &#123;</div><div class="line">        <span class="keyword">var</span> num = (line.getElementsByClassName(<span class="string">'order-num'</span>)[<span class="number">0</span>] === <span class="literal">undefined</span> ? <span class="string">'0'</span> : line.getElementsByClassName(<span class="string">'order-num'</span>)[<span class="number">0</span>].innerHTML)</div><div class="line">        <span class="keyword">var</span> time = (line.getElementsByClassName(<span class="string">'order-time'</span>)[<span class="number">0</span>] === <span class="literal">undefined</span> ? <span class="string">'0'</span> : line.getElementsByClassName(<span class="string">'order-time'</span>)[<span class="number">0</span>].innerHTML)</div><div class="line">        items.push(&#123;</div><div class="line">            <span class="attr">num</span>: num,</div><div class="line">            <span class="attr">time</span>: time,</div><div class="line">            <span class="attr">percentnum</span>: percentnum,</div><div class="line">            <span class="attr">rantingsnum</span>: rantingsnum,</div><div class="line">            <span class="attr">ordernum</span>: ordernum,</div><div class="line">            <span class="attr">pprice</span>: pprice,</div><div class="line">            <span class="attr">pdiscountrate</span>: pdiscountrate,</div><div class="line">            <span class="attr">wishlistnum</span>: wishlistnum</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> setOutput = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    fs.writeFile(<span class="string">'./Electric_pressure_cooker/mid_output_ali.txt'</span>, <span class="built_in">JSON</span>.stringify(items), err =&gt; <span class="built_in">console</span>.log(err))</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> prepare = <span class="function"><span class="params">str</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">if</span> (str === <span class="literal">undefined</span>) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="literal">null</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">      <span class="comment">// 这里的/,/g和/\n/g是正则表达式</span></div><div class="line">      <span class="keyword">return</span> str.replace(<span class="regexp">/,/g</span>,<span class="string">'，'</span>).replace(<span class="regexp">/\n/g</span>, <span class="string">' '</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> toExcel = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">var</span> cnt = <span class="number">1</span></div><div class="line">    <span class="comment">// 去重复</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">songs</span>)</span>&#123;</div><div class="line">        <span class="keyword">let</span> result = &#123;&#125;;</div><div class="line">        <span class="keyword">let</span> finalResult=[];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;songs.length;i++)&#123;</div><div class="line">         result[songs[i].time]=songs[i];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>(item <span class="keyword">in</span> result)&#123;</div><div class="line">         finalResult.push(result[item]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> finalResult;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    items = unique(items)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">filter</span>(<span class="params">items,key</span>)</span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; items.length; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (i == <span class="number">0</span>) &#123;</div><div class="line">                <span class="keyword">continue</span></div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                <span class="keyword">delete</span> items[i][key]</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    filter(items,<span class="string">"percentnum"</span>)</div><div class="line"></div><div class="line">    filter(items,<span class="string">"rantingsnum"</span>)</div><div class="line"></div><div class="line">    filter(items,<span class="string">"ordernum"</span>)</div><div class="line"></div><div class="line">    filter(items,<span class="string">"pprice"</span>)</div><div class="line"></div><div class="line">    filter(items,<span class="string">"pdiscountrate"</span>)</div><div class="line"></div><div class="line">    filter(items,<span class="string">"wishlistnum"</span>)</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> data <span class="keyword">of</span> items) &#123;</div><div class="line">        <span class="keyword">var</span> str = <span class="string">''</span></div><div class="line">        str += cnt++</div><div class="line">        str += <span class="string">','</span> + prepare(data[<span class="string">'num'</span>])</div><div class="line">        str += <span class="string">','</span> + prepare(data[<span class="string">'time'</span>])</div><div class="line">        str += <span class="string">','</span> + (prepare(data[<span class="string">'percentnum'</span>]) === <span class="literal">null</span> ? <span class="string">''</span>: prepare(data[<span class="string">'percentnum'</span>]))</div><div class="line">        str += <span class="string">','</span> + (prepare(data[<span class="string">'rantingsnum'</span>]) === <span class="literal">null</span> ? <span class="string">''</span>: prepare(data[<span class="string">'rantingsnum'</span>]))</div><div class="line">        str += <span class="string">','</span> + (prepare(data[<span class="string">'ordernum'</span>]) === <span class="literal">null</span> ? <span class="string">''</span>: prepare(data[<span class="string">'ordernum'</span>]))</div><div class="line">        str += <span class="string">','</span> + (prepare(data[<span class="string">'pprice'</span>]) === <span class="literal">null</span> ? <span class="string">''</span>: prepare(data[<span class="string">'pprice'</span>]))</div><div class="line">        str += <span class="string">','</span> + (prepare(data[<span class="string">'pdiscountrate'</span>]) === <span class="literal">null</span> ? <span class="string">''</span>: prepare(data[<span class="string">'pdiscountrate'</span>]))</div><div class="line">        str += <span class="string">','</span> + (prepare(data[<span class="string">'wishlistnum'</span>]) === <span class="literal">null</span> ? <span class="string">''</span>: prepare(data[<span class="string">'wishlistnum'</span>]))</div><div class="line">        str += <span class="string">'\n'</span></div><div class="line">        <span class="comment">// 同步的写文件，将str写到'output.txt'，将flag设置为'a'，即append，将数据追加到源文件结尾</span></div><div class="line">        fs.writeFileSync(<span class="string">'./output-ali.csv'</span>, str, &#123;<span class="attr">flag</span>: <span class="string">'a'</span>&#125;, err =&gt; <span class="built_in">console</span>.log(err))</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">getInput()</div><div class="line"></div><div class="line"><span class="comment">//console.log(items[0])</span></div><div class="line"><span class="comment">//setOutput()</span></div><div class="line"></div><div class="line">toExcel()</div></pre></td></tr></table></figure>
<h1 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h1><p>1.打开亚马逊产品列表</p>
<p>2.按F12,选择列表div,右键copy-&gt;copy element</p>
<p>3.打开input.txt,将数据删除后粘贴新的数据</p>
<p>4.运行node index_ali.js 生成csv格式文件</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;配置文件&quot;&gt;&lt;a href=&quot;#配置文件&quot; class=&quot;headerlink&quot; title=&quot;配置文件&quot;&gt;&lt;/a&gt;配置文件&lt;/h1&gt;
    
    </summary>
    
      <category term="Node.js" scheme="http://yoursite.com/categories/Node-js/"/>
    
    
      <category term="node.js" scheme="http://yoursite.com/tags/node-js/"/>
    
  </entry>
  
  <entry>
    <title>【实战】IFE的JavaScript练习</title>
    <link href="http://yoursite.com/2018/09/10/2018.9.10/"/>
    <id>http://yoursite.com/2018/09/10/2018.9.10/</id>
    <published>2018-09-10T15:16:41.000Z</published>
    <updated>2018-09-23T13:52:08.662Z</updated>
    
    <content type="html"><![CDATA[<h1 id="任务一"><a href="#任务一" class="headerlink" title="任务一"></a>任务一</h1><a id="more"></a>
<h2 id="任务目的"><a href="#任务目的" class="headerlink" title="任务目的"></a>任务目的</h2><p>学习与实践JavaScript的基本语法、语言特性</p>
<p>初步了解JavaScript的事件是什么</p>
<p>初步了解JavaScript中的DOM是什么</p>
<h2 id="任务描述"><a href="#任务描述" class="headerlink" title="任务描述"></a>任务描述</h2><p>如图，模拟一个队列，队列的每个元素是一个数字，初始队列为空</p>
<p>有一个input输入框，以及4个操作按钮</p>
<p>点击”左侧入”，将input中输入的数字从左侧插入队列中；</p>
<p>点击”右侧入”，将input中输入的数字从右侧插入队列中；</p>
<p>点击”左侧出”，读取并删除队列左侧第一个元素，并弹窗显示元素中数值；</p>
<p>点击”右侧出”，读取并删除队列又侧第一个元素，并弹窗显示元素中数值；</p>
<p>点击队列中任何一个元素，则该元素会被从队列中删除</p>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>实现简单功能的同时，请仔细学习JavaScript基本语法、事件、DOM相关的知识</p>
<p>请注意代码风格的整齐、优雅</p>
<p>代码中含有必要的注释</p>
<p>示例图仅为参考，不需要完全一致</p>
<p>需要考虑数字输入的合法性</p>
<p>建议不使用任何第三方库、框架</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.imooc.com/learn/36" target="_blank" rel="external">JavaScript入门篇</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" target="_blank" rel="external">MDN JavaScript</a></p>
<h2 id="任务代码"><a href="#任务代码" class="headerlink" title="任务代码"></a>任务代码</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div></pre></td><td class="code"><pre><div class="line">// task.html</div><div class="line"><span class="meta">&lt;!DOCTYPE&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>IFE JavaScript Task 02<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line">      <span class="selector-id">#leftIn</span>,</div><div class="line">      <span class="selector-id">#rightIn</span>,</div><div class="line">      <span class="selector-id">#leftOut</span>,</div><div class="line">      <span class="selector-id">#rightOut</span> &#123;</div><div class="line">        <span class="attribute">margin</span>:<span class="number">2px</span> <span class="number">4px</span>;</div><div class="line">        <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</div><div class="line">        <span class="attribute">background</span>: white;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-id">#rightIn</span> &#123;</div><div class="line">        <span class="attribute">margin-right</span>: <span class="number">20px</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-class">.numContent</span>&#123;</div><div class="line">        <span class="attribute">height</span>: <span class="number">40px</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-tag">span</span>&#123;</div><div class="line">        <span class="attribute">height</span>: <span class="number">30px</span>;</div><div class="line">        <span class="attribute">display</span>: inline-block;</div><div class="line">        <span class="attribute">text-align</span>: center;</div><div class="line">        <span class="attribute">color</span>: white;</div><div class="line">        <span class="attribute">background-color</span>: red;</div><div class="line">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</div><div class="line">        <span class="attribute">padding-top</span>: <span class="number">10px</span>;</div><div class="line">        <span class="attribute">margin-right</span>: <span class="number">10px</span>;</div><div class="line">      &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"num"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"leftIn"</span>&gt;</span>左侧入<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"rightIn"</span>&gt;</span>右侧入<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"leftOut"</span>&gt;</span>左侧出<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"rightOut"</span>&gt;</span>右侧出<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">  </div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"numContent"</span>&gt;</span></div><div class="line">    </div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="comment">//事件绑定函数，兼容浏览器差异</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addEvent</span>(<span class="params">element, event, listener</span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> (element.addEventListener) &#123;</div><div class="line">        element.addEventListener(event, listener, <span class="literal">false</span>);</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (element.attachEvent) &#123;</div><div class="line">        element.attachEvent(<span class="string">"on"</span> + event, listener);</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">else</span> &#123;</div><div class="line">        element[<span class="string">"on"</span> + event] = listener;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 复用id选择器</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">$</span>(<span class="params">id</span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="built_in">document</span>.getElementById(id);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//遍历数组的方法，针对数组中每一个元素执行fn函数，并将数组索引和元素作为参数传递</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">each</span>(<span class="params">arr, fn</span>) </span>&#123;</div><div class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> cur = <span class="number">0</span>; cur &lt; arr.length; cur++) &#123;</div><div class="line">        fn(arr[cur]);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> queue = &#123;</div><div class="line">      <span class="attr">str</span>: [],</div><div class="line">      <span class="attr">paint</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> html = <span class="string">''</span>;</div><div class="line">        each(<span class="keyword">this</span>.str,<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</div><div class="line">          html += <span class="string">"&lt;span&gt;"</span>+<span class="built_in">parseInt</span>(item)+<span class="string">"&lt;/span&gt;"</span></div><div class="line">        &#125;)</div><div class="line">        $(<span class="string">'numContent'</span>).innerHTML = html;</div><div class="line">        addDivDelEvent();</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">leftPush</span>: <span class="function"><span class="keyword">function</span>(<span class="params">num</span>)</span>&#123;</div><div class="line">        <span class="keyword">this</span>.str.unshift(num)</div><div class="line">        <span class="keyword">this</span>.paint();</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">rightPush</span>: <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.str.push(num);</div><div class="line">        <span class="keyword">this</span>.paint();</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">isEmpty</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.str.length == <span class="number">0</span>;</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">leftPop</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.isEmpty()) &#123;</div><div class="line">          alert(<span class="keyword">this</span>.str.shift());</div><div class="line">          <span class="keyword">this</span>.paint();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">          alert(<span class="string">"队列已经是空的!"</span>);</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">rightPop</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.isEmpty()) &#123;</div><div class="line">          alert(<span class="keyword">this</span>.str.pop());</div><div class="line">          <span class="keyword">this</span>.paint();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">          alert(<span class="string">"队列已经是空的!"</span>);</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">deleteID</span>: <span class="function"><span class="keyword">function</span>(<span class="params">id</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.str.splice(id, <span class="number">1</span>);</div><div class="line">        <span class="keyword">this</span>.paint();</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 为numContent中的每个span绑定删除函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addDivDelEvent</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> cur = <span class="number">0</span>; cur &lt; $(<span class="string">'numContent'</span>).childNodes.length; cur++) &#123;</div><div class="line">        <span class="comment">// 这里要使用闭包，否则永远绑定到指定span上的delete函数的cur永远等于跳出循环时的cur值(length)</span></div><div class="line">        addEvent($(<span class="string">'numContent'</span>).childNodes[cur], <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">cur</span>) </span>&#123;</div><div class="line">          <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> queue.deleteID(cur)</div><div class="line">          &#125;</div><div class="line">        &#125;(cur))</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 4个按钮分别绑定事件函数</span></div><div class="line">    addEvent($(<span class="string">"leftIn"</span>),<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> num = $(<span class="string">'num'</span>).value;</div><div class="line">      <span class="keyword">if</span>((<span class="regexp">/^[0-9]+$/</span>).test(num))&#123;</div><div class="line">        queue.leftPush(num)</div><div class="line">      &#125;<span class="keyword">else</span>&#123;</div><div class="line">        alert(<span class="string">"请输入一个整数!"</span>)</div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    addEvent($(<span class="string">"rightIn"</span>),<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> num = $(<span class="string">'num'</span>).value;</div><div class="line">      <span class="keyword">if</span>((<span class="regexp">/^[0-9]+$/</span>).test(num))&#123;</div><div class="line">        queue.rightPush(num)</div><div class="line">      &#125;<span class="keyword">else</span>&#123;</div><div class="line">        alert(<span class="string">"请输入一个整数!"</span>)</div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    addEvent($(<span class="string">"leftOut"</span>),<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      queue.leftPop()</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    addEvent($(<span class="string">"rightOut"</span>),<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      queue.rightPop()</div><div class="line">    &#125;)</div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="预览"><a href="#预览" class="headerlink" title="预览"></a>预览</h2><p><a href="https://zy343134464.github.io/js-IFE2016/task18/task.html" target="_blank" rel="external">任务一</a></p>
<h1 id="任务二"><a href="#任务二" class="headerlink" title="任务二"></a>任务二</h1><h2 id="任务目的-1"><a href="#任务目的-1" class="headerlink" title="任务目的"></a>任务目的</h2><p>学习与实践JavaScript的基本语法、语言特性</p>
<p>练习使用JavaScript实现简单的排序算法</p>
<h2 id="任务描述-1"><a href="#任务描述-1" class="headerlink" title="任务描述"></a>任务描述</h2><p>基于任务18</p>
<p>限制输入的数字在10-100</p>
<p>队列元素数量最多限制为60个，当超过60个时，添加元素时alert出提示</p>
<p>队列展现方式变化如图，直接用高度表示数字大小</p>
<p>实现一个简单的排序功能，如冒泡排序（不限制具体算法），用可视化的方法表达出来，参考见下方参考资料</p>
<h2 id="注意事项-1"><a href="#注意事项-1" class="headerlink" title="注意事项"></a>注意事项</h2><p>实现简单功能的同时，请仔细学习JavaScript基本语法、事件、DOM相关的知识</p>
<p>请注意代码风格的整齐、优雅</p>
<p>代码中含有必要的注释</p>
<p>示例图仅为参考，不需要完全一致</p>
<p>具体算法及可视化的形式不做特别限制，只要求能够展现出算法的过程</p>
<p>建议不使用任何第三方库、框架</p>
<h2 id="参考资料-1"><a href="#参考资料-1" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.imooc.com/learn/36" target="_blank" rel="external">JavaScript入门篇</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" target="_blank" rel="external">MDN JavaScript</a></p>
<h2 id="任务代码-1"><a href="#任务代码-1" class="headerlink" title="任务代码"></a>任务代码</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>IFE JavaScript Task 02<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line">      <span class="selector-tag">button</span> &#123;</div><div class="line">        <span class="attribute">margin</span>:<span class="number">2px</span> <span class="number">4px</span>;</div><div class="line">        <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</div><div class="line">        <span class="attribute">background</span>: white;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-id">#numContent</span> &#123;</div><div class="line">        <span class="attribute">display</span>: flex;</div><div class="line">        <span class="attribute">width</span>: <span class="number">500px</span>;</div><div class="line">        <span class="attribute">height</span>: <span class="number">150px</span>;</div><div class="line">        <span class="attribute">align-items</span>: flex-end;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="selector-id">#numContent</span> <span class="selector-tag">span</span> &#123;</div><div class="line">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">15px</span>;</div><div class="line">        <span class="attribute">margin-right</span>: <span class="number">10px</span>;               </div><div class="line">        <span class="attribute">background-color</span>: red;</div><div class="line">      &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"num"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"leftIn"</span>&gt;</span>左侧入<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"rightIn"</span>&gt;</span>右侧入<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"leftOut"</span>&gt;</span>左侧出<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"rightOut"</span>&gt;</span>右侧出<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"sortBtn"</span>&gt;</span>队列排序<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">  </div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"numContent"</span>&gt;</span></div><div class="line">    </div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="comment">//事件绑定函数，兼容浏览器差异</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addEvent</span>(<span class="params">element, event, listener</span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> (element.addEventListener) &#123;</div><div class="line">        element.addEventListener(event, listener, <span class="literal">false</span>);</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (element.attachEvent) &#123;</div><div class="line">        element.attachEvent(<span class="string">"on"</span> + event, listener);</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">else</span> &#123;</div><div class="line">        element[<span class="string">"on"</span> + event] = listener;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 复用id选择器</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">$</span>(<span class="params">id</span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="built_in">document</span>.getElementById(id);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//遍历数组的方法，针对数组中每一个元素执行fn函数，并将数组索引和元素作为参数传递</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">each</span>(<span class="params">arr, fn</span>) </span>&#123;</div><div class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> cur = <span class="number">0</span>; cur &lt; arr.length; cur++) &#123;</div><div class="line">        fn(arr[cur]);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> queue = &#123;</div><div class="line">      <span class="attr">str</span>: [],</div><div class="line">      <span class="attr">paint</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> html = <span class="string">''</span>;</div><div class="line">        each(<span class="keyword">this</span>.str,<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</div><div class="line">          html += <span class="string">"&lt;span style='height:"</span>+<span class="built_in">parseInt</span>(item)+<span class="string">"'&gt;&lt;/span&gt;"</span></div><div class="line">        &#125;)</div><div class="line">        $(<span class="string">'numContent'</span>).innerHTML = html;</div><div class="line">        addDivDelEvent();</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">leftPush</span>: <span class="function"><span class="keyword">function</span>(<span class="params">num</span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.str.length &gt;= <span class="number">60</span>) &#123;</div><div class="line">          alert(<span class="string">"队列元素数量最多为60个!"</span>);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">          <span class="keyword">this</span>.str.unshift(num);</div><div class="line">          <span class="keyword">this</span>.paint();</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">rightPush</span>: <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.str.length &gt;= <span class="number">60</span>) &#123;</div><div class="line">          alert(<span class="string">"队列元素数量最多为60个!"</span>);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">          <span class="keyword">this</span>.str.push(num);</div><div class="line">          <span class="keyword">this</span>.paint();</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">isEmpty</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.str.length == <span class="number">0</span>;</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">leftPop</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.isEmpty()) &#123;</div><div class="line">          alert(<span class="keyword">this</span>.str.shift());</div><div class="line">          <span class="keyword">this</span>.paint();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">          alert(<span class="string">"队列已经是空的!"</span>);</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">rightPop</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.isEmpty()) &#123;</div><div class="line">          alert(<span class="keyword">this</span>.str.pop());</div><div class="line">          <span class="keyword">this</span>.paint();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">          alert(<span class="string">"队列已经是空的!"</span>);</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">deleteID</span>: <span class="function"><span class="keyword">function</span>(<span class="params">id</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.str.splice(id, <span class="number">1</span>);</div><div class="line">        <span class="keyword">this</span>.paint();</div><div class="line">      &#125;,</div><div class="line">      <span class="comment">// 冒泡排序</span></div><div class="line">      sortElements:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> Clock;</div><div class="line">        <span class="keyword">var</span> count = <span class="number">0</span>, i = <span class="number">0</span>;</div><div class="line">        Clock = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">          <span class="keyword">if</span> (count &gt;= <span class="keyword">this</span>.str.length) &#123;</div><div class="line">            clearInterval(Clock);</div><div class="line">          &#125;</div><div class="line">          <span class="keyword">if</span> (i == <span class="keyword">this</span>.str.length - <span class="number">1</span> - count) &#123;</div><div class="line">            i = <span class="number">0</span>;</div><div class="line">            count++;</div><div class="line">          &#125;</div><div class="line">          <span class="keyword">if</span> (<span class="keyword">this</span>.str[i] &gt; <span class="keyword">this</span>.str[i + <span class="number">1</span>]) &#123;</div><div class="line">            <span class="keyword">var</span> temp = <span class="keyword">this</span>.str[i];</div><div class="line">            <span class="keyword">this</span>.str[i] = <span class="keyword">this</span>.str[i + <span class="number">1</span>];</div><div class="line">            <span class="keyword">this</span>.str[i + <span class="number">1</span>] = temp;</div><div class="line">            <span class="keyword">this</span>.paint();</div><div class="line">          &#125;</div><div class="line">          i++;</div><div class="line">        &#125;.bind(<span class="keyword">this</span>), <span class="number">100</span>);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 为numContent中的每个span绑定删除函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addDivDelEvent</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> cur = <span class="number">0</span>; cur &lt; $(<span class="string">'numContent'</span>).childNodes.length; cur++) &#123;</div><div class="line">        <span class="comment">// 使用立即执行函数,来解决闭包的影响</span></div><div class="line">        addEvent($(<span class="string">'numContent'</span>).childNodes[cur], <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">cur</span>) </span>&#123;</div><div class="line">          <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> queue.deleteID(cur)</div><div class="line">          &#125;</div><div class="line">        &#125;(cur))</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 4个按钮分别绑定事件函数</span></div><div class="line">    addEvent($(<span class="string">"leftIn"</span>),<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> num = $(<span class="string">'num'</span>).value;</div><div class="line">      <span class="keyword">if</span>((<span class="regexp">/^[0-9]+$/</span>).test(num))&#123;</div><div class="line">        <span class="comment">// 限制输入的数字在10-100</span></div><div class="line">        <span class="keyword">if</span> (<span class="built_in">parseInt</span>(num) &lt; <span class="number">10</span> || <span class="built_in">parseInt</span>(num) &gt; <span class="number">100</span>) &#123;</div><div class="line">          alert(<span class="string">"输入的数字必须在10-100之间!"</span>)</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">          queue.leftPush(num)</div><div class="line">        &#125;</div><div class="line">      &#125;<span class="keyword">else</span>&#123;</div><div class="line">        alert(<span class="string">"请输入一个整数!"</span>)</div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    addEvent($(<span class="string">"rightIn"</span>),<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> num = $(<span class="string">'num'</span>).value;</div><div class="line">      <span class="keyword">if</span>((<span class="regexp">/^[0-9]+$/</span>).test(num))&#123;</div><div class="line">        <span class="comment">// 限制输入的数字在10-100</span></div><div class="line">        <span class="keyword">if</span> (<span class="built_in">parseInt</span>(num) &lt; <span class="number">10</span> || <span class="built_in">parseInt</span>(num) &gt; <span class="number">100</span>) &#123;</div><div class="line">          alert(<span class="string">"输入的数字必须在10-100之间!"</span>)</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">          queue.rightPush(num)</div><div class="line">        &#125;</div><div class="line">      &#125;<span class="keyword">else</span>&#123;</div><div class="line">        alert(<span class="string">"请输入一个整数!"</span>)</div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    addEvent($(<span class="string">"leftOut"</span>),<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      queue.leftPop()</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    addEvent($(<span class="string">"rightOut"</span>),<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      queue.rightPop()</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    addEvent($(<span class="string">"sortBtn"</span>),<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      queue.sortElements()</div><div class="line">    &#125;)</div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="预览-1"><a href="#预览-1" class="headerlink" title="预览"></a>预览</h2><p><a href="https://zy343134464.github.io/js-IFE2016/task19/task.html" target="_blank" rel="external">任务二</a></p>
<h1 id="任务三"><a href="#任务三" class="headerlink" title="任务三"></a>任务三</h1><h2 id="任务目的-2"><a href="#任务目的-2" class="headerlink" title="任务目的"></a>任务目的</h2><p>实践JavaScript数组、字符串相关操作</p>
<h2 id="任务描述-2"><a href="#任务描述-2" class="headerlink" title="任务描述"></a>任务描述</h2><p>基于任务18进行升级</p>
<p>将新元素输入框从input改为textarea</p>
<p>允许一次批量输入多个内容，格式可以为数字、中文、英文等，可以通过用回车，逗号（全角半角均可），顿号，空格（全角半角、Tab等均可）等符号作为不同内容的间隔</p>
<p>增加一个查询文本输入框，和一个查询按钮，当点击查询时，将查询词在各个元素内容中做模糊匹配，将匹配到的内容进行特殊标识，如文字颜色等。举例，内容中有abcd，查询词为ab或bc，则该内容需要标识</p>
<h2 id="注意事项-2"><a href="#注意事项-2" class="headerlink" title="注意事项"></a>注意事项</h2><p>实现简单功能的同时，请仔细学习JavaScript基本语法、事件、DOM相关的知识</p>
<p>请注意代码风格的整齐、优雅</p>
<p>代码中含有必要的注释</p>
<p>建议不使用任何第三方库、框架</p>
<h2 id="参考资料-2"><a href="#参考资料-2" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.imooc.com/learn/36" target="_blank" rel="external">JavaScript入门篇</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" target="_blank" rel="external">MDN JavaScript</a></p>
<p><a href="http://v.youku.com/v_show/id_XNTM1NTQxMDMy.html" target="_blank" rel="external">归并排序算法可视化</a></p>
<p><a href="http://v.youku.com/v_show/id_XNjIwNTEzMTA0.html?from=y1.2-1-176.3.3-2.1-1-1-2-0" target="_blank" rel="external">15种排序算法可视化展示</a></p>
<h2 id="任务代码-2"><a href="#任务代码-2" class="headerlink" title="任务代码"></a>任务代码</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>IFE JavaScript Task 02<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line">      <span class="selector-tag">button</span> &#123;</div><div class="line">        <span class="attribute">margin</span>:<span class="number">2px</span> <span class="number">4px</span>;</div><div class="line">        <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</div><div class="line">        <span class="attribute">background</span>: white;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-class">.numContent</span>&#123;</div><div class="line">        <span class="attribute">height</span>: <span class="number">40px</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-tag">span</span>&#123;</div><div class="line">        <span class="attribute">height</span>: <span class="number">30px</span>;</div><div class="line">        <span class="attribute">display</span>: inline-block;</div><div class="line">        <span class="attribute">text-align</span>: center;</div><div class="line">        <span class="attribute">color</span>: white;</div><div class="line">        <span class="attribute">background-color</span>: red;</div><div class="line">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</div><div class="line">        <span class="attribute">padding-top</span>: <span class="number">10px</span>;</div><div class="line">        <span class="attribute">margin-right</span>: <span class="number">10px</span>;</div><div class="line">      &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">"num"</span> <span class="attr">cols</span>=<span class="string">"40"</span> <span class="attr">rows</span>=<span class="string">"10"</span>&gt;</span>你好,大家好， 才是 真的哈哈、好啊<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"leftIn"</span>&gt;</span>左侧入<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"rightIn"</span>&gt;</span>右侧入<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"leftOut"</span>&gt;</span>左侧出<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"rightOut"</span>&gt;</span>右侧出<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"searchInput"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"searchBtn"</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">  </div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"numContent"</span>&gt;</span></div><div class="line">    </div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="comment">//事件绑定函数，兼容浏览器差异</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addEvent</span>(<span class="params">element, event, listener</span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> (element.addEventListener) &#123;</div><div class="line">        element.addEventListener(event, listener, <span class="literal">false</span>);</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (element.attachEvent) &#123;</div><div class="line">        element.attachEvent(<span class="string">"on"</span> + event, listener);</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">else</span> &#123;</div><div class="line">        element[<span class="string">"on"</span> + event] = listener;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 复用id选择器</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">$</span>(<span class="params">id</span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="built_in">document</span>.getElementById(id);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//遍历数组的方法，针对数组中每一个元素执行fn函数，并将数组索引和元素作为参数传递</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">each</span>(<span class="params">arr, fn</span>) </span>&#123;</div><div class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> cur = <span class="number">0</span>; cur &lt; arr.length; cur++) &#123;</div><div class="line">        fn(arr[cur]);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 为numContent中的每个span绑定删除函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addDivDelEvent</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> cur = <span class="number">0</span>; cur &lt; $(<span class="string">'numContent'</span>).childNodes.length; cur++) &#123;</div><div class="line">        <span class="comment">// 这里要使用闭包，否则永远绑定到指定span上的delete函数的cur永远等于跳出循环时的cur值(length)</span></div><div class="line">        addEvent($(<span class="string">'numContent'</span>).childNodes[cur], <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">cur</span>) </span>&#123;</div><div class="line">          <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> queue.deleteID(cur)</div><div class="line">          &#125;</div><div class="line">        &#125;(cur))</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 将输入的内容分割为数组</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">spiltInput</span>(<span class="params">text</span>) </span>&#123;</div><div class="line">      <span class="keyword">var</span> inputArray = [];</div><div class="line">      inputArray = (text).split(<span class="regexp">/[,，;；、\s\n]+/</span>);</div><div class="line">      <span class="keyword">return</span> inputArray;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> queue = &#123;</div><div class="line">      <span class="attr">str</span>: [],</div><div class="line">      <span class="attr">paint</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> html = <span class="string">''</span>;</div><div class="line">        each(<span class="keyword">this</span>.str,<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</div><div class="line">          html += <span class="string">"&lt;span&gt;"</span>+item+<span class="string">"&lt;/span&gt;"</span></div><div class="line">        &#125;)</div><div class="line">        $(<span class="string">'numContent'</span>).innerHTML = html;</div><div class="line">        addDivDelEvent();</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">leftPush</span>: <span class="function"><span class="keyword">function</span>(<span class="params">num</span>)</span>&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> cur <span class="keyword">in</span> num)&#123;</div><div class="line">          <span class="keyword">this</span>.str.unshift(num[cur]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.paint();</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">rightPush</span>: <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> cur <span class="keyword">in</span> num)&#123;</div><div class="line">          <span class="keyword">this</span>.str.push(num[cur]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.paint();</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">isEmpty</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.str.length == <span class="number">0</span>;</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">leftPop</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.isEmpty()) &#123;</div><div class="line">          alert(<span class="keyword">this</span>.str.shift());</div><div class="line">          <span class="keyword">this</span>.paint();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">          alert(<span class="string">"队列已经是空的!"</span>);</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">rightPop</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.isEmpty()) &#123;</div><div class="line">          alert(<span class="keyword">this</span>.str.pop());</div><div class="line">          <span class="keyword">this</span>.paint();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">          alert(<span class="string">"队列已经是空的!"</span>);</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">deleteID</span>: <span class="function"><span class="keyword">function</span>(<span class="params">id</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.str.splice(id, <span class="number">1</span>);</div><div class="line">        <span class="keyword">this</span>.paint();</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">searchNumContent</span>: <span class="function"><span class="keyword">function</span>(<span class="params">num</span>)</span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; $(<span class="string">'numContent'</span>).childNodes.length; i++) &#123;</div><div class="line">          $(<span class="string">'numContent'</span>).childNodes[i].style.color = <span class="string">"#FFFFFF"</span>;</div><div class="line">          $(<span class="string">'numContent'</span>).childNodes[i].style.background = <span class="string">"red"</span>;</div><div class="line">          <span class="keyword">if</span> ($(<span class="string">'numContent'</span>).childNodes[i].innerHTML.indexOf(num) != <span class="number">-1</span>) &#123;</div><div class="line">            $(<span class="string">'numContent'</span>).childNodes[i].style.color = <span class="string">"green"</span>;</div><div class="line">            $(<span class="string">'numContent'</span>).childNodes[i].style.background = <span class="string">"black"</span>;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 4个按钮分别绑定事件函数</span></div><div class="line">    addEvent($(<span class="string">"leftIn"</span>),<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> num = spiltInput($(<span class="string">'num'</span>).value.trim())</div><div class="line">      queue.leftPush(num)</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    addEvent($(<span class="string">"rightIn"</span>),<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> num = spiltInput($(<span class="string">'num'</span>).value.trim())</div><div class="line">      queue.rightPush(num)</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    addEvent($(<span class="string">"leftOut"</span>),<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      queue.leftPop()</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    addEvent($(<span class="string">"rightOut"</span>),<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      queue.rightPop()</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    addEvent($(<span class="string">"searchBtn"</span>),<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> num = $(<span class="string">"searchInput"</span>).value</div><div class="line">      queue.searchNumContent(num)</div><div class="line">    &#125;)</div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="预览-2"><a href="#预览-2" class="headerlink" title="预览"></a>预览</h2><p><a href="https://zy343134464.github.io/js-IFE2016/task20/task.html" target="_blank" rel="external">任务三</a></p>
<h1 id="任务四"><a href="#任务四" class="headerlink" title="任务四"></a>任务四</h1><h2 id="任务目的-3"><a href="#任务目的-3" class="headerlink" title="任务目的"></a>任务目的</h2><p>学习与实践JavaScript的基本语法、语言特性</p>
<p>练习使用JavaScript实现拖拽功能</p>
<h2 id="任务描述-3"><a href="#任务描述-3" class="headerlink" title="任务描述"></a>任务描述</h2><p>基于任务20，将任务20的代码进行抽象、封装，然后在此基础上实现如图中的两个需求：Tag输入和兴趣爱好输入</p>
<p>如示例图上方，实现一个tag输入框</p>
<p>要求遇到用户输入空格，逗号，回车时，都自动把当前输入的内容作为一个tag放在输入框下面</p>
<p>Tag不能有重复的，遇到重复输入的Tag，自动忽视</p>
<p>每个Tag请做trim处理</p>
<p>最多允许10个Tag，多于10个时，按照录入的先后顺序，把最前面的删掉</p>
<p>当鼠标悬停在tag上时，tag前增加删除二字，点击tag可删除</p>
<p>如示例图下方，实现一个兴趣爱好输入的功能</p>
<p>通过一个Textarea进行兴趣爱好的输入，可以通过用回车，逗号（全角半角均可），顿号，空格（全角半角、Tab等均可）等符号作为间隔</p>
<p>当点击“确认兴趣爱好”的按钮时，将textarea中的输入按照你设定的间隔符，拆解成一个个的爱好，显示在textarea下方</p>
<p>爱好不能重复，所以在下方呈现前，需要做一个去重</p>
<p>每个爱好内容需要做trim处理</p>
<p>最多允许10个兴趣爱好，多于10个时，按照录入的先后顺序，把最前面的删掉</p>
<h2 id="注意事项-3"><a href="#注意事项-3" class="headerlink" title="注意事项"></a>注意事项</h2><p>实现简单功能的同时，请仔细学习JavaScript基本语法、事件、DOM相关的知识</p>
<p>示例图仅为参考，不需要完全一致</p>
<p>请注意代码风格的整齐、优雅</p>
<p>代码中含有必要的注释</p>
<p>建议不使用任何第三方库、框架</p>
<h2 id="参考资料-3"><a href="#参考资料-3" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.imooc.com/learn/36" target="_blank" rel="external">JavaScript入门篇</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" target="_blank" rel="external">MDN JavaScript</a></p>
<h2 id="任务代码-3"><a href="#任务代码-3" class="headerlink" title="任务代码"></a>任务代码</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>IFE JavaScript Task 02<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line">      <span class="selector-tag">button</span> &#123;</div><div class="line">        <span class="attribute">margin</span>:<span class="number">2px</span> <span class="number">4px</span>;</div><div class="line">        <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</div><div class="line">        <span class="attribute">background</span>: white;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-id">#numContent</span>,</div><div class="line">      <span class="selector-id">#tagContent</span>&#123;</div><div class="line">        <span class="attribute">margin-top</span>: <span class="number">20px</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-tag">textarea</span>&#123;</div><div class="line">        <span class="attribute">margin-top</span>: <span class="number">20px</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-tag">span</span>&#123;</div><div class="line">        <span class="attribute">height</span>: <span class="number">30px</span>;</div><div class="line">        <span class="attribute">display</span>: inline-block;</div><div class="line">        <span class="attribute">text-align</span>: center;</div><div class="line">        <span class="attribute">color</span>: white;</div><div class="line">        <span class="attribute">background-color</span>: red;</div><div class="line">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</div><div class="line">        <span class="attribute">padding-top</span>: <span class="number">10px</span>;</div><div class="line">        <span class="attribute">margin-right</span>: <span class="number">10px</span>;</div><div class="line">      &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>Tag: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"tagInput"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"tagContent"</span>&gt;</span></div><div class="line">    </div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">"num"</span> <span class="attr">cols</span>=<span class="string">"40"</span> <span class="attr">rows</span>=<span class="string">"10"</span>&gt;</span>你好,大家好， 才是 真的哈哈、好啊<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"sureBtn"</span>&gt;</span>确认兴趣按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"numContent"</span>&gt;</span></div><div class="line">    </div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="comment">//事件绑定函数，兼容浏览器差异</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addEvent</span>(<span class="params">element, event, listener</span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> (element.addEventListener) &#123;</div><div class="line">        element.addEventListener(event, listener, <span class="literal">false</span>);</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (element.attachEvent) &#123;</div><div class="line">        element.attachEvent(<span class="string">"on"</span> + event, listener);</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">else</span> &#123;</div><div class="line">        element[<span class="string">"on"</span> + event] = listener;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 复用id选择器</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">$</span>(<span class="params">id</span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="built_in">document</span>.getElementById(id);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//遍历数组的方法，针对数组中每一个元素执行fn函数，并将数组索引和元素作为参数传递</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">each</span>(<span class="params">arr, fn</span>) </span>&#123;</div><div class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> cur = <span class="number">0</span>; cur &lt; arr.length; cur++) &#123;</div><div class="line">        fn(arr[cur]);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 为numContent中的每个span绑定删除函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addDivDelEvent</span>(<span class="params">Queue, container</span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(container.childNodes)</div><div class="line">      <span class="keyword">var</span> temp = []</div><div class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> cur = <span class="number">0</span>; cur &lt; container.childNodes.length; cur++) &#123;</div><div class="line">        temp.push(container.childNodes[cur].innerHTML);</div><div class="line">        <span class="comment">// 这里要使用闭包，否则永远绑定到指定span上的delete函数的cur永远等于跳出循环时的cur值(length)</span></div><div class="line">        addEvent(container.childNodes[cur], <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">cur</span>) </span>&#123;</div><div class="line">          <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> Queue.deleteID(cur)</div><div class="line">          &#125;</div><div class="line">        &#125;(cur))</div><div class="line">        addEvent(container.childNodes[cur], <span class="string">"mouseover"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">cur</span>) </span>&#123;</div><div class="line">          <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            container.childNodes[cur].style.background = <span class="string">"green"</span>;</div><div class="line">            container.childNodes[cur].innerHTML = <span class="string">"删除"</span> + temp[cur] + <span class="string">"?"</span>;</div><div class="line">          &#125;</div><div class="line">        &#125;(cur))</div><div class="line">        addEvent(container.childNodes[cur], <span class="string">"mouseout"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">cur</span>) </span>&#123;</div><div class="line">          <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            container.childNodes[cur].style.background = <span class="string">"red"</span>;</div><div class="line">            container.childNodes[cur].innerHTML = temp[cur];</div><div class="line">          &#125;</div><div class="line">        &#125;(cur))</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 将输入的内容分割为数组</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">spiltInput</span>(<span class="params">text</span>) </span>&#123;</div><div class="line">      <span class="keyword">var</span> inputArray = [];</div><div class="line">      inputArray = (text).split(<span class="regexp">/[,，;；、\s\n]+/</span>);</div><div class="line">      <span class="keyword">return</span> inputArray;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Queue</span>(<span class="params">container,isDelDiv</span>)</span>&#123;</div><div class="line">      <span class="keyword">this</span>.str = []</div><div class="line">      <span class="keyword">this</span>.paint = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> html = <span class="string">''</span>;</div><div class="line">        each(<span class="keyword">this</span>.str,<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</div><div class="line">          html += <span class="string">"&lt;span&gt;"</span>+item+<span class="string">"&lt;/span&gt;"</span></div><div class="line">        &#125;)</div><div class="line">        container.innerHTML = html;</div><div class="line">        <span class="keyword">if</span>(isDelDiv)&#123;</div><div class="line">          addDivDelEvent(<span class="keyword">this</span>,container)</div><div class="line">        &#125;;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">this</span>.leftPush = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (obj.length) &#123;</div><div class="line">          <span class="keyword">this</span>.str.unshift(obj);</div><div class="line">          <span class="keyword">this</span>.paint();</div><div class="line">        &#125;</div><div class="line">      &#125;  </div><div class="line">      <span class="keyword">this</span>.rightPush = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">          <span class="keyword">if</span> (obj.length) &#123;</div><div class="line">            <span class="keyword">this</span>.str.push(obj);</div><div class="line">            <span class="keyword">this</span>.paint();</div><div class="line">          &#125;</div><div class="line">      &#125;    </div><div class="line">      <span class="keyword">this</span>.isEmpty = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">          <span class="keyword">return</span> (<span class="keyword">this</span>.str.length == <span class="number">0</span>);</div><div class="line">      &#125;   </div><div class="line">      <span class="keyword">this</span>.leftPop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">          <span class="keyword">if</span> (!<span class="keyword">this</span>.isEmpty()) &#123;</div><div class="line">            <span class="keyword">this</span>.str.shift();</div><div class="line">            <span class="keyword">this</span>.paint();</div><div class="line">          &#125;</div><div class="line">          <span class="keyword">else</span> &#123;</div><div class="line">            alert(<span class="string">"The queue is already empty!"</span>);</div><div class="line">          &#125;</div><div class="line">      &#125;   </div><div class="line">      <span class="keyword">this</span>.rightPop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">          <span class="keyword">if</span> (!<span class="keyword">this</span>.isEmpty()) &#123;</div><div class="line">            <span class="keyword">this</span>.str.pop();</div><div class="line">            <span class="keyword">this</span>.paint();</div><div class="line">          &#125;</div><div class="line">          <span class="keyword">else</span> &#123;</div><div class="line">            alert(<span class="string">"The queue is already empty!"</span>);</div><div class="line">          &#125;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">this</span>.deleteID = <span class="function"><span class="keyword">function</span>(<span class="params">id</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.str.splice(id, <span class="number">1</span>);</div><div class="line">        <span class="keyword">this</span>.paint();</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//实例1：Tag;</span></div><div class="line">    <span class="keyword">var</span> tagQueue = <span class="keyword">new</span> Queue($(<span class="string">'tagContent'</span>), <span class="literal">true</span>);</div><div class="line"></div><div class="line">    <span class="comment">//实例2：不用给div增加删除事件</span></div><div class="line">    <span class="keyword">var</span> queue = <span class="keyword">new</span> Queue($(<span class="string">'numContent'</span>), <span class="literal">false</span>);</div><div class="line"></div><div class="line">    <span class="comment">// 确认按钮分别绑定事件函数</span></div><div class="line">    addEvent($(<span class="string">"sureBtn"</span>),<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> num = spiltInput($(<span class="string">'num'</span>).value.trim())</div><div class="line">      each(num, <span class="function"><span class="keyword">function</span>(<span class="params">item, index</span>) </span>&#123;</div><div class="line">       <span class="keyword">if</span> (queue.str.indexOf(item) === <span class="number">-1</span>) &#123;</div><div class="line">          queue.rightPush(item);</div><div class="line">          <span class="keyword">if</span> (queue.str.length &gt; <span class="number">10</span>) &#123;</div><div class="line">            queue.leftPop();</div><div class="line">          &#125;</div><div class="line">        &#125; </div><div class="line">      &#125;)</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    addEvent($(<span class="string">"tagInput"</span>),<span class="string">'keyup'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">      <span class="keyword">if</span> (<span class="regexp">/[,，;；、\s\n]+/</span>.test($(<span class="string">"tagInput"</span>).value) || e.keyCode ===<span class="number">13</span>) &#123;</div><div class="line">        <span class="keyword">var</span> tagInput = spiltInput($(<span class="string">'tagInput'</span>).value.trim())</div><div class="line">        <span class="keyword">var</span> data = tagInput[<span class="number">0</span>]</div><div class="line">        <span class="keyword">if</span> (tagQueue.str.indexOf(data) === <span class="number">-1</span>) &#123;</div><div class="line">          tagQueue.rightPush(data)</div><div class="line">          <span class="keyword">if</span> (tagQueue.str.length &gt; <span class="number">10</span>) &#123;</div><div class="line">            tagQueue.leftPop()</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">        $(<span class="string">"tagInput"</span>).value = <span class="string">""</span>;</div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="预览-3"><a href="#预览-3" class="headerlink" title="预览"></a>预览</h2><p><a href="https://zy343134464.github.io/js-IFE2016/task21/task.html" target="_blank" rel="external">任务四</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;任务一&quot;&gt;&lt;a href=&quot;#任务一&quot; class=&quot;headerlink&quot; title=&quot;任务一&quot;&gt;&lt;/a&gt;任务一&lt;/h1&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://yoursite.com/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>【实战】速卖通产品页列表nodejs爬虫</title>
    <link href="http://yoursite.com/2018/09/06/2018.9.6/"/>
    <id>http://yoursite.com/2018/09/06/2018.9.6/</id>
    <published>2018-09-06T15:16:41.000Z</published>
    <updated>2018-09-23T13:45:27.602Z</updated>
    
    <content type="html"><![CDATA[<h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><a id="more"></a>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// package.json</span></div><div class="line">&#123;</div><div class="line">  <span class="string">"name"</span>: <span class="string">"1"</span>,</div><div class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</div><div class="line">  <span class="string">"description"</span>: <span class="string">""</span>,</div><div class="line">  <span class="string">"main"</span>: <span class="string">"index_ali.js"</span>,</div><div class="line">  <span class="string">"dependencies"</span>: &#123;</div><div class="line">    <span class="string">"exceljs"</span>: <span class="string">"^1.0.0"</span>,</div><div class="line">    <span class="string">"iconv-lite"</span>: <span class="string">"^0.4.19"</span>,</div><div class="line">    <span class="string">"jsdom"</span>: <span class="string">"^11.6.2"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="string">"devDependencies"</span>: &#123;&#125;,</div><div class="line">  <span class="string">"scripts"</span>: &#123;</div><div class="line">    <span class="string">"test"</span>: <span class="string">"echo \"</span><span class="keyword">Error</span>: <span class="keyword">no</span> <span class="keyword">test</span> specified\<span class="string">" &amp;&amp; exit 1"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="string">"author"</span>: <span class="string">""</span>,</div><div class="line">  <span class="string">"license"</span>: <span class="string">"ISC"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// index_ali.js</span></div><div class="line"><span class="keyword">const</span> https = <span class="built_in">require</span>(<span class="string">'https'</span>)</div><div class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</div><div class="line"><span class="keyword">const</span> iconv = <span class="built_in">require</span>(<span class="string">'iconv-lite'</span>)</div><div class="line"><span class="keyword">const</span> jsdom = <span class="built_in">require</span>(<span class="string">'jsdom'</span>)</div><div class="line"><span class="keyword">const</span> &#123; JSDOM &#125; = jsdom</div><div class="line"></div><div class="line"><span class="keyword">var</span> items = <span class="keyword">new</span> <span class="built_in">Array</span>()</div><div class="line"></div><div class="line"><span class="keyword">var</span> getInput = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">var</span> datas = fs.readFileSync(<span class="string">'./input-ali.txt'</span>)</div><div class="line">    <span class="keyword">const</span> dom = <span class="keyword">new</span> JSDOM(datas.toString())</div><div class="line">    <span class="keyword">var</span> lines = dom.window.document.getElementsByClassName(<span class="string">'_3liAhj _1R0K0g'</span>)</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> line <span class="keyword">of</span> lines) &#123;</div><div class="line">        <span class="keyword">var</span> info1 = line.getElementsByClassName(<span class="string">'_2cLu-l'</span>)[<span class="number">0</span>]</div><div class="line">        <span class="keyword">var</span> href = info1.getAttribute(<span class="string">'href'</span>)</div><div class="line">        <span class="keyword">var</span> name = info1.getAttribute(<span class="string">'title'</span>)</div><div class="line">        <span class="keyword">var</span> price = line.getElementsByClassName(<span class="string">'_1vC4OE'</span>)[<span class="number">0</span>].innerHTML</div><div class="line">        <span class="keyword">var</span> cnum = (line.getElementsByClassName(<span class="string">'_38sUEc'</span>)[<span class="number">0</span>] === <span class="literal">undefined</span> ? <span class="string">'0'</span> : line.getElementsByClassName(<span class="string">'_38sUEc'</span>)[<span class="number">0</span>].innerHTML)</div><div class="line">        <span class="keyword">var</span> onum = (line.getElementsByClassName(<span class="string">'_2_KrJI'</span>)[<span class="number">0</span>] === <span class="literal">undefined</span> ? <span class="string">'0'</span> : line.getElementsByClassName(<span class="string">'_2_KrJI'</span>)[<span class="number">0</span>].innerHTML)</div><div class="line">        <span class="keyword">var</span> info2 = line.getElementsByClassName(<span class="string">'_1Nyybr  _30XEf0'</span>)[<span class="number">0</span>]</div><div class="line">        <span class="keyword">var</span> img =  (info2.getAttribute(<span class="string">'src'</span>) == <span class="literal">null</span> ? info2.getAttribute(<span class="string">'image-src'</span>) : info2.getAttribute(<span class="string">'src'</span>))</div><div class="line">        items.push(&#123;</div><div class="line">            <span class="attr">href</span>: href,</div><div class="line">            <span class="attr">img</span>: img,</div><div class="line">            <span class="attr">name</span>: name,</div><div class="line">            <span class="attr">price</span>: price,</div><div class="line">            <span class="attr">cnum</span>: cnum,</div><div class="line">            <span class="attr">onum</span>: onum</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> setOutput = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    fs.writeFile(<span class="string">'./Electric_pressure_cooker/mid_output_ali.txt'</span>, <span class="built_in">JSON</span>.stringify(items), err =&gt; <span class="built_in">console</span>.log(err))</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> prepare = <span class="function"><span class="params">str</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">if</span> (str === <span class="literal">undefined</span>) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="literal">null</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">      <span class="comment">// 这里的/,/g和/\n/g是正则表达式</span></div><div class="line">      <span class="keyword">return</span> str.replace(<span class="regexp">/,/g</span>,<span class="string">'，'</span>).replace(<span class="regexp">/\n/g</span>, <span class="string">' '</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> toExcel = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">var</span> cnt = <span class="number">1</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> data <span class="keyword">of</span> items) &#123;</div><div class="line">        <span class="keyword">var</span> str = <span class="string">''</span></div><div class="line">        str += cnt++</div><div class="line">        str += <span class="string">','</span> + prepare(data[<span class="string">'href'</span>])</div><div class="line">        str += <span class="string">','</span> + prepare(data[<span class="string">'img'</span>])</div><div class="line">        str += <span class="string">','</span> + prepare(data[<span class="string">'name'</span>])</div><div class="line">        str += <span class="string">','</span> + prepare(data[<span class="string">'price'</span>])</div><div class="line">        str += <span class="string">','</span> + prepare(data[<span class="string">'cnum'</span>])</div><div class="line">        str += <span class="string">','</span> + prepare(data[<span class="string">'onum'</span>])</div><div class="line">        str += <span class="string">'\n'</span></div><div class="line">        <span class="comment">// 同步的写文件，将str写到'output.txt'，将flag设置为'a'，即append，将数据追加到源文件结尾</span></div><div class="line">        fs.writeFileSync(<span class="string">'./output-ali.csv'</span>, str, &#123;<span class="attr">flag</span>: <span class="string">'a'</span>&#125;, err =&gt; <span class="built_in">console</span>.log(err))</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">getInput()</div><div class="line"></div><div class="line"><span class="comment">//console.log(items[0])</span></div><div class="line"><span class="comment">//setOutput()</span></div><div class="line"></div><div class="line">toExcel()</div></pre></td></tr></table></figure>
<h1 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h1><p>1.打开速卖通产品列表</p>
<p>2.按F12,选择列表div,右键copy-&gt;copy element</p>
<p>3.打开input.txt,将数据删除后粘贴新的数据</p>
<p>4.运行node index_ali.js 生成csv格式文件</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;配置文件&quot;&gt;&lt;a href=&quot;#配置文件&quot; class=&quot;headerlink&quot; title=&quot;配置文件&quot;&gt;&lt;/a&gt;配置文件&lt;/h1&gt;
    
    </summary>
    
      <category term="Node.js" scheme="http://yoursite.com/categories/Node-js/"/>
    
    
      <category term="node.js" scheme="http://yoursite.com/tags/node-js/"/>
    
  </entry>
  
  <entry>
    <title>【实战】IFE的JavaScript编码</title>
    <link href="http://yoursite.com/2018/09/03/2018.9.3/"/>
    <id>http://yoursite.com/2018/09/03/2018.9.3/</id>
    <published>2018-09-03T15:16:41.000Z</published>
    <updated>2018-09-16T06:04:03.602Z</updated>
    
    <content type="html"><![CDATA[<h1 id="任务一"><a href="#任务一" class="headerlink" title="任务一"></a>任务一</h1><h2 id="任务目的"><a href="#任务目的" class="headerlink" title="任务目的"></a>任务目的</h2><a id="more"></a>
<p>JavaScript初体验</p>
<p>初步明白JavaScript的简单基本语法，如变量、函数</p>
<p>初步了解JavaScript的事件是什么</p>
<p>初步了解JavaScript中的DOM是什么</p>
<h2 id="任务描述"><a href="#任务描述" class="headerlink" title="任务描述"></a>任务描述</h2><p>用户可以在输入框中输入任何内容，点击“确认填写”按钮后，用户输入的内容会显示在“您输入的值是”文字的右边</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>IFE JavaScript Task 01<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>请输入北京今天空气质量：<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"aqi-input"</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"button"</span>&gt;</span>确认填写<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>您输入的值是：<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"aqi-display"</span>&gt;</span>尚无录入<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="actionscript"></span></div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="comment">/*	</span></div><div class="line">  在注释下方写下代码</div><div class="line">  给按钮button绑定一个点击事件</div><div class="line">  在事件处理函数中</div><div class="line">  获取aqi-input输入的值，并显示在aqi-display中</div><div class="line">  */</div><div class="line"></div><div class="line">&#125;)();</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>实现简单功能的同时，请仔细学习JavaScript基本语法、事件、DOM相关的知识</p>
<p>请注意代码风格的整齐、优雅</p>
<p>代码中含有必要的注释</p>
<p>可以不考虑输入的合法性</p>
<p>建议不使用任何第三方库、框架</p>
<p>示例代码仅为示例，可以直接使用，也可以完全自己重写</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.imooc.com/learn/36" target="_blank" rel="external">JavaScript入门篇</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" target="_blank" rel="external">MDN JavaScript</a></p>
<h2 id="任务代码"><a href="#任务代码" class="headerlink" title="任务代码"></a>任务代码</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>IFE JavaScript Task 01<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>请输入北京今天空气质量：<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"aqi-input"</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"button"</span>&gt;</span>确认填写<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>您输入的值是：<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"aqi-display"</span>&gt;</span>尚无录入<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">/*    </span></div><div class="line">  在注释下方写下代码</div><div class="line">  给按钮button绑定一个点击事件</div><div class="line">  在事件处理函数中</div><div class="line">  获取aqi-input输入的值，并显示在aqi-display中</div><div class="line">  */</div><div class="line">  <span class="keyword">var</span> $ = <span class="function"><span class="keyword">function</span>(<span class="params">id</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">document</span>.getElementById(id)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> hander = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> num = <span class="built_in">parseInt</span>($(<span class="string">'aqi-input'</span>).value)</div><div class="line">    <span class="keyword">if</span> ((!<span class="built_in">isNaN</span>(num)) &amp;&amp; (num &gt;= <span class="number">0</span>) &amp;&amp; (num &lt;=<span class="number">1000</span>)) &#123;</div><div class="line">      $(<span class="string">"aqi-display"</span>).innerHTML = num;</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">      alert($(<span class="string">'aqi-input'</span>).value + <span class="string">" 不是有效的空气质量数值，请重新输入0-1000的有效整数！"</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  $(<span class="string">'button'</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    hander()</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  $(<span class="string">'aqi-input'</span>).onkeyup = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span> (event.keyCode === <span class="number">13</span>) &#123;</div><div class="line">      hander()</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)();</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="任务二"><a href="#任务二" class="headerlink" title="任务二"></a>任务二</h1><h2 id="任务目的-1"><a href="#任务目的-1" class="headerlink" title="任务目的"></a>任务目的</h2><p>在上一任务基础上继续JavaScript的体验</p>
<p>学习JavaScript中的if判断语法，for循环语法</p>
<p>学习JavaScript中的数组对象</p>
<p>学习如何读取、处理数据，并动态创建、修改DOM中的内容</p>
<h2 id="任务描述-1"><a href="#任务描述-1" class="headerlink" title="任务描述"></a>任务描述</h2><p>参考以下示例代码，页面加载后，将提供的空气质量数据数组，按照某种逻辑（比如空气质量大于60）进行过滤筛选，最后将符合条件的数据按照一定的格式要求显示在网页上</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>IFE JavaScript Task 01<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>污染城市列表<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"aqi-list"</span>&gt;</span></div><div class="line"><span class="comment">&lt;!--   </span></div><div class="line">    &lt;li&gt;第一名：福州（样例），10&lt;/li&gt;</div><div class="line">  	&lt;li&gt;第二名：福州（样例），10&lt;/li&gt; --&gt;</div><div class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="actionscript"></span></div><div class="line"></div><div class="line"><span class="keyword">var</span> aqiData = [</div><div class="line">  [<span class="string">"北京"</span>, <span class="number">90</span>],</div><div class="line">  [<span class="string">"上海"</span>, <span class="number">50</span>],</div><div class="line">  [<span class="string">"福州"</span>, <span class="number">10</span>],</div><div class="line">  [<span class="string">"广州"</span>, <span class="number">50</span>],</div><div class="line">  [<span class="string">"成都"</span>, <span class="number">90</span>],</div><div class="line">  [<span class="string">"西安"</span>, <span class="number">100</span>]</div><div class="line">];</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="comment">/*</span></div><div class="line">  在注释下方编写代码</div><div class="line">  遍历读取aqiData中各个城市的数据</div><div class="line">  将空气质量指数大于60的城市显示到aqi-list的列表中</div><div class="line">  */</div><div class="line"></div><div class="line">&#125;)();</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="注意事项-1"><a href="#注意事项-1" class="headerlink" title="注意事项"></a>注意事项</h2><p>实现简单功能的同时，请仔细学习JavaScript基本语法、事件、DOM相关的知识</p>
<p>请注意代码风格的整齐、优雅</p>
<p>代码中含有必要的注释</p>
<p>其中的数据以及60的判断逻辑可以自行设定</p>
<p>建议不使用任何第三方库、框架</p>
<p>示例代码仅为示例，可以直接使用，也可以完全自己重写</p>
<h2 id="参考资料-1"><a href="#参考资料-1" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.imooc.com/learn/36" target="_blank" rel="external">JavaScript入门篇</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" target="_blank" rel="external">MDN JavaScript</a></p>
<h2 id="任务代码-1"><a href="#任务代码-1" class="headerlink" title="任务代码"></a>任务代码</h2><p>方案一</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>IFE JavaScript Task 01<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>污染城市列表<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"aqi-list"</span>&gt;</span> </div><div class="line"></div><div class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line"></div><div class="line"><span class="keyword">var</span> aqiData = [</div><div class="line">  [<span class="string">"北京"</span>, <span class="number">90</span>],</div><div class="line">  [<span class="string">"上海"</span>, <span class="number">50</span>],</div><div class="line">  [<span class="string">"福州"</span>, <span class="number">10</span>],</div><div class="line">  [<span class="string">"广州"</span>, <span class="number">50</span>],</div><div class="line">  [<span class="string">"成都"</span>, <span class="number">90</span>],</div><div class="line">  [<span class="string">"西安"</span>, <span class="number">100</span>]</div><div class="line">];</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">/*</span></div><div class="line">  在注释下方编写代码</div><div class="line">  遍历读取aqiData中各个城市的数据</div><div class="line">  将空气质量指数大于60的城市显示到aqi-list的列表中</div><div class="line">  */</div><div class="line">  <span class="keyword">var</span> $ = <span class="function"><span class="keyword">function</span>(<span class="params">id</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">document</span>.getElementById(id)</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  aqiData.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> b[<span class="number">1</span>]-a[<span class="number">1</span>];</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  <span class="keyword">var</span> html = <span class="string">''</span>;</div><div class="line">  <span class="keyword">var</span> cnum = [<span class="string">'一'</span>, <span class="string">'二'</span>, <span class="string">'三'</span>, <span class="string">'四'</span>, <span class="string">'五'</span>, <span class="string">'六'</span>, <span class="string">'七'</span>, <span class="string">'八'</span>, <span class="string">'九'</span>,<span class="string">'十'</span>];</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; aqiData.length; i++) &#123;</div><div class="line">    <span class="keyword">if</span> (aqiData[i][<span class="number">1</span>] &gt; <span class="number">60</span>) &#123;</div><div class="line">      html += <span class="string">'&lt;li&gt;第'</span>+cnum[i]+<span class="string">'名: '</span>+aqiData[i][<span class="number">0</span>]+<span class="string">', '</span>+aqiData[i][<span class="number">1</span>]+<span class="string">'&lt;/li&gt;'</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  $(<span class="string">'aqi-list'</span>).innerHTML = html;</div><div class="line">&#125;)();</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>方案二</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>IFE JavaScript Task 01<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>污染城市列表<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"aqi-list"</span>&gt;</span> </div><div class="line"></div><div class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line"></div><div class="line"><span class="keyword">var</span> aqiData = [</div><div class="line">  [<span class="string">"北京"</span>, <span class="number">90</span>],</div><div class="line">  [<span class="string">"上海"</span>, <span class="number">50</span>],</div><div class="line">  [<span class="string">"福州"</span>, <span class="number">10</span>],</div><div class="line">  [<span class="string">"广州"</span>, <span class="number">50</span>],</div><div class="line">  [<span class="string">"成都"</span>, <span class="number">90</span>],</div><div class="line">  [<span class="string">"西安"</span>, <span class="number">100</span>]</div><div class="line">];</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">/*</span></div><div class="line">  在注释下方编写代码</div><div class="line">  遍历读取aqiData中各个城市的数据</div><div class="line">  将空气质量指数大于60的城市显示到aqi-list的列表中</div><div class="line">  */</div><div class="line">  <span class="keyword">var</span> $ = <span class="function"><span class="keyword">function</span>(<span class="params">id</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">document</span>.getElementById(id)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> html = <span class="string">''</span>;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> cnum = [<span class="string">'一'</span>, <span class="string">'二'</span>, <span class="string">'三'</span>, <span class="string">'四'</span>, <span class="string">'五'</span>, <span class="string">'六'</span>, <span class="string">'七'</span>, <span class="string">'八'</span>, <span class="string">'九'</span>,<span class="string">'十'</span>];</div><div class="line"></div><div class="line">  aqiData.filter(<span class="function"><span class="keyword">function</span>(<span class="params">element</span>)</span>&#123;<span class="keyword">return</span> element[<span class="number">1</span>] &gt; <span class="number">60</span>&#125;)</div><div class="line">  .sort(<span class="function"><span class="keyword">function</span> (<span class="params">d1,d2</span>)</span>&#123; <span class="keyword">return</span> d2[<span class="number">1</span>] - d1[<span class="number">1</span>]&#125;)</div><div class="line">  .forEach(<span class="function"><span class="keyword">function</span>(<span class="params">element,index</span>)</span>&#123;</div><div class="line">    html += <span class="string">'&lt;li&gt;第'</span>+cnum[index]+<span class="string">'名: '</span>+element[<span class="number">0</span>]+<span class="string">', '</span>+element[<span class="number">1</span>]+<span class="string">'&lt;/li&gt;'</span>;</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  $(<span class="string">'aqi-list'</span>).innerHTML = html;</div><div class="line">&#125;)();</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="任务三"><a href="#任务三" class="headerlink" title="任务三"></a>任务三</h1><h2 id="任务目的-2"><a href="#任务目的-2" class="headerlink" title="任务目的"></a>任务目的</h2><p>在上一任务基础上继续JavaScript的体验</p>
<p>接触一下JavaScript中的高级选择器</p>
<p>学习JavaScript中的数组对象遍历、读写、排序等操作</p>
<p>学习简单的字符串处理操作</p>
<h2 id="任务描述-2"><a href="#任务描述-2" class="headerlink" title="任务描述"></a>任务描述</h2><p>参考以下示例代码，读取页面上已有的source列表，从中提取出城市以及对应的空气质量</p>
<p>将数据按照某种顺序排序后，在resort列表中按照顺序显示出来</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>IFE JavaScript Task 01<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"source"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>北京空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>90<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>上海空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>70<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>天津空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>80<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>广州空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>50<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>深圳空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>40<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>福州空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>32<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>成都空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>90<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"resort"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- </span></div><div class="line">    &lt;li&gt;第一名：北京空气质量：&lt;b&gt;90&lt;/b&gt;&lt;/li&gt;</div><div class="line">    &lt;li&gt;第二名：北京空气质量：&lt;b&gt;90&lt;/b&gt;&lt;/li&gt;</div><div class="line">    &lt;li&gt;第三名：北京空气质量：&lt;b&gt;90&lt;/b&gt;&lt;/li&gt;</div><div class="line">     --&gt;</div><div class="line"></div><div class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"sort-btn"</span>&gt;</span>排序<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="actionscript"></span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * getData方法</div><div class="line"> * 读取id为source的列表，获取其中城市名字及城市对应的空气质量</div><div class="line"> * 返回一个数组，格式见函数中示例</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getData</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="comment">/*</span></div><div class="line">  coding here</div><div class="line">  */</div><div class="line"></div><div class="line">  <span class="comment">/*</span></div><div class="line">  data = [</div><div class="line">    ["北京", 90],</div><div class="line">    ["北京", 90]</div><div class="line">    ……</div><div class="line">  ]</div><div class="line">  */</div><div class="line"></div><div class="line">  <span class="keyword">return</span> data;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * sortAqiData</div><div class="line"> * 按空气质量对data进行从小到大的排序</div><div class="line"> * 返回一个排序后的数组</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sortAqiData</span><span class="params">(data)</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * render</div><div class="line"> * 将排好序的城市及空气质量指数，输出显示到id位resort的列表中</div><div class="line"> * 格式见ul中的注释的部分</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span><span class="params">(data)</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">btnHandle</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> aqiData = getData();</div><div class="line">  aqiData = sortAqiData(aqiData);</div><div class="line">  render(aqiData);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="comment">// 在这下面给sort-btn绑定一个点击事件，点击时触发btnHandle函数</span></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">init();</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="注意事项-2"><a href="#注意事项-2" class="headerlink" title="注意事项"></a>注意事项</h2><p>实现简单功能的同时，请仔细学习JavaScript基本语法、事件、DOM相关的知识</p>
<p>请注意代码风格的整齐、优雅</p>
<p>代码中含有必要的注释</p>
<p>建议不使用任何第三方库、框架</p>
<p>示例代码仅为示例，可以直接使用，也可以完全自己重写</p>
<h2 id="参考资料-2"><a href="#参考资料-2" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.imooc.com/learn/36" target="_blank" rel="external">JavaScript入门篇</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" target="_blank" rel="external">MDN JavaScript</a></p>
<h2 id="任务代码-2"><a href="#任务代码-2" class="headerlink" title="任务代码"></a>任务代码</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>IFE JavaScript Task 01<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"source"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>北京空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>90<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>上海空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>70<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>天津空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>80<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>广州空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>50<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>深圳空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>40<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>福州空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>32<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>成都空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>90<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"resort"</span>&gt;</span></div><div class="line"><span class="comment">&lt;!--     &lt;li&gt;第一名：北京空气质量：&lt;b&gt;90&lt;/b&gt;&lt;/li&gt;</span></div><div class="line">&lt;li&gt;第二名：北京空气质量：&lt;b&gt;90&lt;/b&gt;&lt;/li&gt;</div><div class="line">&lt;li&gt;第三名：北京空气质量：&lt;b&gt;90&lt;/b&gt;&lt;/li&gt; --&gt;</div><div class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"sort-btn"</span>&gt;</span>排序<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * getData方法</div><div class="line"> * 读取id为source的列表，获取其中城市名字及城市对应的空气质量</div><div class="line"> * 返回一个数组，格式见函数中示例</div><div class="line"> */</div><div class="line"><span class="keyword">var</span> $ = <span class="function"><span class="keyword">function</span> (<span class="params">id</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="built_in">document</span>.getElementById(id)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getData</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">/*</span></div><div class="line">  coding here</div><div class="line">  */</div><div class="line"></div><div class="line">  <span class="comment">/*</span></div><div class="line">  data = [</div><div class="line">    ["北京", 90],</div><div class="line">    ["北京", 90]</div><div class="line">    ……</div><div class="line">  ]</div><div class="line">  */</div><div class="line">  <span class="keyword">var</span> data = [];</div><div class="line"></div><div class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; $(<span class="string">'source'</span>).children.length; i++)&#123;</div><div class="line">    <span class="keyword">var</span> str = $(<span class="string">'source'</span>).children[i].innerText</div><div class="line">    arr = str.split(<span class="string">'：'</span>)</div><div class="line">    data.push(arr)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> data;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * sortAqiData</div><div class="line"> * 按空气质量对data进行从小到大的排序</div><div class="line"> * 返回一个排序后的数组</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sortAqiData</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">  data.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> b[<span class="number">1</span>]-a[<span class="number">1</span>]</div><div class="line">  &#125;)</div><div class="line">  <span class="keyword">return</span> data</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * render</div><div class="line"> * 将排好序的城市及空气质量指数，输出显示到id位resort的列表中</div><div class="line"> * 格式见ul中的注释的部分</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> cnum = [<span class="string">'一'</span>, <span class="string">'二'</span>, <span class="string">'三'</span>, <span class="string">'四'</span>, <span class="string">'五'</span>, <span class="string">'六'</span>, <span class="string">'七'</span>, <span class="string">'八'</span>, <span class="string">'九'</span>,<span class="string">'十'</span>];</div><div class="line">  <span class="keyword">var</span> html = <span class="string">''</span></div><div class="line">  data.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">element,index</span>)</span>&#123;</div><div class="line">    html += <span class="string">'&lt;li&gt;第'</span>+cnum[index]+<span class="string">'名: '</span>+element[<span class="number">0</span>]+<span class="string">', &lt;b&gt;'</span>+element[<span class="number">1</span>]+<span class="string">'&lt;/b&gt;&lt;/li&gt;'</span>;</div><div class="line">  &#125;)</div><div class="line">  $(<span class="string">'resort'</span>).innerHTML = html;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">btnHandle</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> aqiData = getData();</div><div class="line">  aqiData = sortAqiData(aqiData);</div><div class="line">  render(aqiData);</div><div class="line">  $(<span class="string">'sort-btn'</span>).disabled = <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">  <span class="comment">// 在这下面给sort-btn绑定一个点击事件，点击时触发btnHandle函数</span></div><div class="line">  $(<span class="string">'sort-btn'</span>).onclick = btnHandle</div><div class="line">&#125;</div><div class="line"></div><div class="line">init();</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="任务四"><a href="#任务四" class="headerlink" title="任务四"></a>任务四</h1><h2 id="任务目的-3"><a href="#任务目的-3" class="headerlink" title="任务目的"></a>任务目的</h2><p>在上一任务基础上继续JavaScript的体验</p>
<p>深入学习JavaScript的事件机制及DOM操作</p>
<p>学习事件代理机制</p>
<p>学习简单的表单验证功能</p>
<p>学习外部加载JavaScript文件</p>
<h2 id="任务描述-3"><a href="#任务描述-3" class="headerlink" title="任务描述"></a>任务描述</h2><p>参考以下示例代码，用户输入城市名称和空气质量指数后，点击“确认添加”按钮后，就会将用户的输入在进行验证后，添加到下面的表格中，新增一行进行显示</p>
<p>用户输入的城市名必须为中英文字符，空气质量指数必须为整数</p>
<p>用户输入的城市名字和空气质量指数需要进行前后去空格及空字符处理（trim）</p>
<p>用户输入不合规格时，需要给出提示（允许用alert，也可以自行定义提示方式）</p>
<p>用户可以点击表格列中的“删除”按钮，删掉那一行的数据</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// task.html</span></div><div class="line"><span class="params">&lt;!DOCTYPE&gt;</span></div><div class="line"><span class="params">&lt;html&gt;</span></div><div class="line">  <span class="params">&lt;head&gt;</span></div><div class="line">    <span class="params">&lt;meta charset="utf<span class="number">-8</span>"&gt;</span></div><div class="line">    <span class="params">&lt;title&gt;</span>IFE JavaScript Task <span class="number">01</span><span class="params">&lt;/title&gt;</span></div><div class="line">    <span class="params">&lt;script src="task.js"&gt;</span><span class="params">&lt;/script&gt;</span></div><div class="line">  <span class="params">&lt;/head&gt;</span></div><div class="line"><span class="params">&lt;body&gt;</span></div><div class="line"></div><div class="line">  <span class="params">&lt;div&gt;</span></div><div class="line">    <span class="params">&lt;label&gt;</span>城市名称：<span class="params">&lt;input id="aqi-city-input" type="text"&gt;</span><span class="params">&lt;/label&gt;</span><span class="params">&lt;br&gt;</span></div><div class="line">    <span class="params">&lt;label&gt;</span>空气质量指数：<span class="params">&lt;input id="aqi-value-input" type="text"&gt;</span><span class="params">&lt;/label&gt;</span><span class="params">&lt;br&gt;</span></div><div class="line">    <span class="params">&lt;button id="add-btn"&gt;</span>确认添加<span class="params">&lt;/button&gt;</span></div><div class="line">  <span class="params">&lt;/div&gt;</span></div><div class="line">  <span class="params">&lt;table id="aqi-table"&gt;</span></div><div class="line">  <span class="params">&lt;!-- </span></div><div class="line">    &lt;tr&gt;</div><div class="line">      <span class="params">&lt;td&gt;</span>城市<span class="params">&lt;/td&gt;</span><span class="params">&lt;td&gt;</span>空气质量<span class="params">&lt;/td&gt;</span><span class="params">&lt;td&gt;</span>操作<span class="params">&lt;/td&gt;</span></div><div class="line">    <span class="params">&lt;/tr&gt;</span></div><div class="line">    <span class="params">&lt;tr&gt;</span></div><div class="line">      <span class="params">&lt;td&gt;</span>北京<span class="params">&lt;/td&gt;</span><span class="params">&lt;td&gt;</span><span class="number">90</span><span class="params">&lt;/td&gt;</span><span class="params">&lt;td&gt;</span><span class="params">&lt;button&gt;</span>删除<span class="params">&lt;/button&gt;</span><span class="params">&lt;/td&gt;</span></div><div class="line">    <span class="params">&lt;/tr&gt;</span></div><div class="line">    <span class="params">&lt;tr&gt;</span></div><div class="line">      <span class="params">&lt;td&gt;</span>北京<span class="params">&lt;/td&gt;</span><span class="params">&lt;td&gt;</span><span class="number">90</span><span class="params">&lt;/td&gt;</span><span class="params">&lt;td&gt;</span><span class="params">&lt;button&gt;</span>删除<span class="params">&lt;/button&gt;</span><span class="params">&lt;/td&gt;</span></div><div class="line">    <span class="params">&lt;/tr&gt;</span></div><div class="line">   --&gt;</div><div class="line">  <span class="params">&lt;/table&gt;</span></div><div class="line"></div><div class="line"><span class="params">&lt;/body&gt;</span></div><div class="line"><span class="params">&lt;/html&gt;</span></div><div class="line"></div><div class="line"><span class="comment">// task.js</span></div><div class="line"><span class="comment">/**</span></div><div class="line"> * aqiData，存储用户输入的空气指数数据</div><div class="line"> * 示例格式：</div><div class="line"> * aqiData = &#123;</div><div class="line"> *    "北京": 90,</div><div class="line"> *    "上海": 40</div><div class="line"> * &#125;;</div><div class="line"> */</div><div class="line">var aqiData = &#123;&#125;;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 从用户输入中获取数据，向aqiData中增加一条数据</div><div class="line"> * 然后渲染aqi-list列表，增加新增的数据</div><div class="line"> */</div><div class="line">function addAqiData() &#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 渲染aqi-table表格</div><div class="line"> */</div><div class="line">function renderAqiList() &#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 点击add-btn时的处理逻辑</div><div class="line"> * 获取用户输入，更新数据，并进行页面呈现的更新</div><div class="line"> */</div><div class="line">function addBtnHandle() &#123;</div><div class="line">  addAqiData();</div><div class="line">  renderAqiList();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 点击各个删除按钮的时候的处理逻辑</div><div class="line"> * 获取哪个城市数据被删，删除数据，更新表格显示</div><div class="line"> */</div><div class="line">function delBtnHandle() &#123;</div><div class="line">  <span class="comment">// do sth.</span></div><div class="line"></div><div class="line">  renderAqiList();</div><div class="line">&#125;</div><div class="line"></div><div class="line">function init() &#123;</div><div class="line"></div><div class="line">  <span class="comment">// 在这下面给add-btn绑定一个点击事件，点击时触发addBtnHandle函数</span></div><div class="line"></div><div class="line">  <span class="comment">// 想办法给aqi-table中的所有删除按钮绑定事件，触发delBtnHandle函数</span></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">init();</div></pre></td></tr></table></figure>
<h2 id="注意事项-3"><a href="#注意事项-3" class="headerlink" title="注意事项"></a>注意事项</h2><p>实现简单功能的同时，请仔细学习JavaScript基本语法、事件、DOM相关的知识</p>
<p>请注意代码风格的整齐、优雅</p>
<p>代码中含有必要的注释</p>
<p>验证输入逻辑可以在失去焦点时判断，也可以在点击按钮时判断</p>
<p>建议不使用任何第三方库、框架</p>
<p>示例代码仅为示例，可以直接使用，也可以完全自己重写</p>
<h2 id="参考资料-3"><a href="#参考资料-3" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.imooc.com/learn/36" target="_blank" rel="external">JavaScript入门篇</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" target="_blank" rel="external">MDN JavaScript</a></p>
<h2 id="任务代码-3"><a href="#任务代码-3" class="headerlink" title="任务代码"></a>任务代码</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div></pre></td><td class="code"><pre><div class="line">// task.html</div><div class="line"><span class="meta">&lt;!DOCTYPE&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>IFE JavaScript Task 01<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line">      *&#123;</div><div class="line">        <span class="attribute">margin</span>: <span class="number">5px</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-tag">table</span>&#123;</div><div class="line">        <span class="attribute">border-collapse</span>: collapse;</div><div class="line">      &#125;</div><div class="line">      <span class="selector-tag">table</span>,</div><div class="line">      <span class="selector-tag">tr</span>,</div><div class="line">      <span class="selector-tag">th</span>,</div><div class="line">      <span class="selector-tag">td</span>&#123;</div><div class="line">        <span class="attribute">border</span>: <span class="number">2px</span> solid purple;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="selector-tag">th</span>,</div><div class="line">      <span class="selector-tag">td</span>&#123;</div><div class="line">        <span class="attribute">width</span>: <span class="number">100px</span>;</div><div class="line">        <span class="attribute">height</span>: <span class="number">30px</span>;</div><div class="line">        <span class="attribute">text-align</span>: center;</div><div class="line">      &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>城市名称：<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"aqi-city-input"</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>空气质量指数：<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"aqi-value-input"</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"add-btn"</span>&gt;</span>确认添加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">"aqi-table"</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- </span></div><div class="line">    &lt;tr&gt;</div><div class="line">      &lt;td&gt;城市&lt;/td&gt;&lt;td&gt;空气质量&lt;/td&gt;&lt;td&gt;操作&lt;/td&gt;</div><div class="line">    &lt;/tr&gt;</div><div class="line">    &lt;tr&gt;</div><div class="line">      &lt;td&gt;北京&lt;/td&gt;&lt;td&gt;90&lt;/td&gt;&lt;td&gt;&lt;button&gt;删除&lt;/button&gt;&lt;/td&gt;</div><div class="line">    &lt;/tr&gt;</div><div class="line">    &lt;tr&gt;</div><div class="line">      &lt;td&gt;北京&lt;/td&gt;&lt;td&gt;90&lt;/td&gt;&lt;td&gt;&lt;button&gt;删除&lt;/button&gt;&lt;/td&gt;</div><div class="line">    &lt;/tr&gt;</div><div class="line">   --&gt;</div><div class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"task.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div><div class="line"></div><div class="line">// task.js</div><div class="line">/**</div><div class="line"> * aqiData，存储用户输入的空气指数数据</div><div class="line"> * 示例格式：</div><div class="line"> * aqiData = &#123;</div><div class="line"> *    "北京": 90,</div><div class="line"> *    "上海": 40</div><div class="line"> * &#125;;</div><div class="line"> */</div><div class="line">var aqiData = &#123;&#125;;</div><div class="line"></div><div class="line">var $ = function (id)&#123;</div><div class="line">  return document.getElementById(id)</div><div class="line">&#125;</div><div class="line">/**</div><div class="line"> * 从用户输入中获取数据，向aqiData中增加一条数据</div><div class="line"> * 然后渲染aqi-list列表，增加新增的数据</div><div class="line"> */</div><div class="line">function addAqiData() &#123;</div><div class="line">	var strCity = document.getElementById("aqi-city-input").value.trim();</div><div class="line">    var strAqi = document.getElementById("aqi-value-input").value.trim();</div><div class="line"></div><div class="line">    if (!strCity.match(/^[A-Za-z\u4E00-\u9FA5]+$/)) &#123;</div><div class="line">        alert("城市名必须为中英文字符！")</div><div class="line">        return</div><div class="line">    &#125;else if (!strAqi.match(/^\d+$/)) &#123;</div><div class="line">        alert("空气质量指数必须为整数！")</div><div class="line">        return</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    aqiData[strCity] = strAqi;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> * 渲染aqi-table表格</div><div class="line"> */</div><div class="line">function renderAqiList() &#123;</div><div class="line">	var table = document.getElementById("aqi-table");</div><div class="line">    table.innerHTML = "";</div><div class="line">    for (var strCity in aqiData) &#123;</div><div class="line">		if (table.children.length === 0) &#123;</div><div class="line">			table.innerHTML = "<span class="tag">&lt;<span class="name">tr</span>&gt;</span> <span class="tag">&lt;<span class="name">td</span>&gt;</span>城市<span class="tag">&lt;/<span class="name">td</span>&gt;</span> <span class="tag">&lt;<span class="name">td</span>&gt;</span>空气质量<span class="tag">&lt;/<span class="name">td</span>&gt;</span> <span class="tag">&lt;<span class="name">td</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">td</span>&gt;</span> <span class="tag">&lt;/<span class="name">tr</span>&gt;</span>";</div><div class="line">		&#125;</div><div class="line">		var tr = document.createElement("tr");</div><div class="line">		var td1 = document.createElement("td");</div><div class="line">		td1.innerHTML = strCity;</div><div class="line">		tr.appendChild(td1);</div><div class="line">		var td2 = document.createElement("td");</div><div class="line">		td2.innerHTML = aqiData[strCity];</div><div class="line">		tr.appendChild(td2);</div><div class="line">		var td3 = document.createElement("td");</div><div class="line">		td3.innerHTML = "<span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">'del-btn'</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span>";</div><div class="line">		tr.appendChild(td3);</div><div class="line">		table.appendChild(tr);</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> * 点击add-btn时的处理逻辑</div><div class="line"> * 获取用户输入，更新数据，并进行页面呈现的更新</div><div class="line"> */</div><div class="line">function addBtnHandle() &#123;</div><div class="line">  addAqiData()</div><div class="line">  renderAqiList()</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> * 点击各个删除按钮的时候的处理逻辑</div><div class="line"> * 获取哪个城市数据被删，删除数据，更新表格显示</div><div class="line"> */</div><div class="line">function delBtnHandle(target) &#123;</div><div class="line">  var tr = target.parentElement.parentElement</div><div class="line">  var strCity = tr.children[0].innerHTML</div><div class="line">  delete aqiData[strCity]</div><div class="line">  // do sth.</div><div class="line">  renderAqiList()</div><div class="line">&#125;</div><div class="line"></div><div class="line">function init() &#123;</div><div class="line"></div><div class="line">  // 在这下面给add-btn绑定一个点击事件，点击时触发addBtnHandle函数</div><div class="line"> $('add-btn').onclick = addBtnHandle</div><div class="line">  // 想办法给aqi-table中的所有删除按钮绑定事件，触发delBtnHandle函数</div><div class="line"> $('aqi-table').addEventListener('click',function(e)&#123;</div><div class="line"> 	if (e.target &amp;&amp; e.target.nodeName === "BUTTON") &#123;</div><div class="line">        delBtnHandle(e.target)</div><div class="line">    &#125;</div><div class="line"> &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">init()</div></pre></td></tr></table></figure>
<h1 id="任务五"><a href="#任务五" class="headerlink" title="任务五"></a>任务五</h1><h2 id="任务目的-4"><a href="#任务目的-4" class="headerlink" title="任务目的"></a>任务目的</h2><p>在上一任务基础上继续JavaScript的体验</p>
<p>接触更加复杂的表单对象</p>
<p>实现页面上的一个完整交互功能</p>
<p>用DOM实现一个柱状图图表</p>
<h2 id="任务描述-4"><a href="#任务描述-4" class="headerlink" title="任务描述"></a>任务描述</h2><p>参考以下示例代码，原始数据包含几个城市的空气质量指数数据</p>
<p>用户可以选择查看不同的时间粒度，以选择要查看的空气质量指数是以天为粒度还是以周或月为粒度</p>
<p>天：显示每天的空气质量指数</p>
<p>周：以自然周（周一到周日）为粒度，统计一周7天的平均数为这一周的空气质量数值，如果数据中缺少一个自然周的几天，则按剩余天进行计算</p>
<p>月：以自然月为粒度，统一一个月所有天的平均数为这一个月的空气质量数值</p>
<p>用户可以通过select切换城市</p>
<p>通过在”aqi-chart-wrap”里添加DOM，来模拟一个柱状图图表，横轴是时间，纵轴是空气质量指数，参考图（点击打开）。天、周、月的数据只根据用户的选择显示一种</p>
<p>天：每天的数据是一个很细的矩形</p>
<p>周：每周的数据是一个矩形</p>
<p>月：每周的数据是一个很粗的矩形</p>
<p>鼠标移动到柱状图的某个柱子时，用title属性提示这个柱子的具体日期和数据</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// task.html</span></div><div class="line">&lt;!DOCTYPE&gt;</div><div class="line">&lt;html&gt;</div><div class="line">  &lt;head&gt;</div><div class="line">    &lt;meta charset=<span class="string">"utf-8"</span>&gt;</div><div class="line">    &lt;title&gt;IFE JavaScript Task <span class="number">01</span>&lt;/title&gt;</div><div class="line">    &lt;script src=<span class="string">"task.js"</span>&gt;&lt;/script&gt;</div><div class="line">  &lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">  &lt;fieldset id=<span class="string">"form-gra-time"</span>&gt;</div><div class="line">    &lt;legend&gt;请选择日期粒度：&lt;/legend&gt;</div><div class="line">    &lt;label&gt;日&lt;input name=<span class="string">"gra-time"</span> value=<span class="string">"day"</span> type=<span class="string">"radio"</span> checked=<span class="string">"checked"</span>&gt;&lt;/label&gt;</div><div class="line">    &lt;label&gt;周&lt;input name=<span class="string">"gra-time"</span> value=<span class="string">"week"</span> type=<span class="string">"radio"</span>&gt;&lt;/label&gt;</div><div class="line">    &lt;label&gt;月&lt;input name=<span class="string">"gra-time"</span> value=<span class="string">"month"</span> type=<span class="string">"radio"</span>&gt;&lt;/label&gt;</div><div class="line">  &lt;/fieldset&gt;</div><div class="line"></div><div class="line">  &lt;fieldset&gt;</div><div class="line">    &lt;legend&gt;请选择查看的城市：&lt;/legend&gt;</div><div class="line">    &lt;select id=<span class="string">"city-select"</span>&gt;</div><div class="line">      &lt;option&gt;北京&lt;/option&gt;</div><div class="line">    &lt;/select&gt;</div><div class="line">  &lt;/fieldset&gt;</div><div class="line"></div><div class="line">  &lt;div <span class="class"><span class="keyword">class</span>="<span class="title">aqi</span>-<span class="title">chart</span>-<span class="title">wrap</span>"&gt;</span></div><div class="line">  &lt;/<span class="title">div</span>&gt;</div><div class="line">&lt;/<span class="title">body</span>&gt;</div><div class="line">&lt;/<span class="title">html</span>&gt;</div><div class="line"></div><div class="line">// <span class="title">task</span>.<span class="title">js</span></div><div class="line">/* 数据格式演示</div><div class="line"><span class="title">var</span> <span class="title">aqiSourceData</span> = &#123;</div><div class="line">  <span class="string">"北京"</span>: &#123;</div><div class="line">    <span class="string">"2016-01-01"</span>: <span class="number">10</span>,</div><div class="line">    <span class="string">"2016-01-02"</span>: <span class="number">10</span>,</div><div class="line">    <span class="string">"2016-01-03"</span>: <span class="number">10</span>,</div><div class="line">    <span class="string">"2016-01-04"</span>: <span class="number">10</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// 以下两个函数用于随机模拟生成测试数据</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDateStr</span><span class="params">(dat)</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> y = dat.getFullYear();</div><div class="line">  <span class="keyword">var</span> m = dat.getMonth() + <span class="number">1</span>;</div><div class="line">  m = m &lt; <span class="number">10</span> ? <span class="string">'0'</span> + m : m;</div><div class="line">  <span class="keyword">var</span> d = dat.getDate();</div><div class="line">  d = d &lt; <span class="number">10</span> ? <span class="string">'0'</span> + d : d;</div><div class="line">  <span class="keyword">return</span> y + <span class="string">'-'</span> + m + <span class="string">'-'</span> + d;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomBuildData</span><span class="params">(seed)</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> returnData = &#123;&#125;;</div><div class="line">  <span class="keyword">var</span> dat = <span class="keyword">new</span> Date(<span class="string">"2016-01-01"</span>);</div><div class="line">  <span class="keyword">var</span> datStr = <span class="string">''</span></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; <span class="number">92</span>; i++) &#123;</div><div class="line">    datStr = getDateStr(dat);</div><div class="line">    returnData[datStr] = Math.ceil(Math.random() * seed);</div><div class="line">    dat.setDate(dat.getDate() + <span class="number">1</span>);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> returnData;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> aqiSourceData = &#123;</div><div class="line">  <span class="string">"北京"</span>: randomBuildData(<span class="number">500</span>),</div><div class="line">  <span class="string">"上海"</span>: randomBuildData(<span class="number">300</span>),</div><div class="line">  <span class="string">"广州"</span>: randomBuildData(<span class="number">200</span>),</div><div class="line">  <span class="string">"深圳"</span>: randomBuildData(<span class="number">100</span>),</div><div class="line">  <span class="string">"成都"</span>: randomBuildData(<span class="number">300</span>),</div><div class="line">  <span class="string">"西安"</span>: randomBuildData(<span class="number">500</span>),</div><div class="line">  <span class="string">"福州"</span>: randomBuildData(<span class="number">100</span>),</div><div class="line">  <span class="string">"厦门"</span>: randomBuildData(<span class="number">100</span>),</div><div class="line">  <span class="string">"沈阳"</span>: randomBuildData(<span class="number">500</span>)</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 用于渲染图表的数据</span></div><div class="line"><span class="keyword">var</span> chartData = &#123;&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 记录当前页面的表单选项</span></div><div class="line"><span class="keyword">var</span> pageState = &#123;</div><div class="line">  nowSelectCity: <span class="number">-1</span>,</div><div class="line">  nowGraTime: <span class="string">"day"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 渲染图表</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">renderChart</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 日、周、月的radio事件点击时的处理函数</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">graTimeChange</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="comment">// 确定是否选项发生了变化 </span></div><div class="line"></div><div class="line">  <span class="comment">// 设置对应数据</span></div><div class="line"></div><div class="line">  <span class="comment">// 调用图表渲染函数</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * select发生变化时的处理函数</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">citySelectChange</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="comment">// 确定是否选项发生了变化 </span></div><div class="line"></div><div class="line">  <span class="comment">// 设置对应数据</span></div><div class="line"></div><div class="line">  <span class="comment">// 调用图表渲染函数</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 初始化日、周、月的radio事件，当点击时，调用函数graTimeChange</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">initGraTimeForm</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 初始化城市Select下拉选择框中的选项</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">initCitySelector</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="comment">// 读取aqiSourceData中的城市，然后设置id为city-select的下拉列表中的选项</span></div><div class="line"></div><div class="line">  <span class="comment">// 给select设置事件，当选项发生变化时调用函数citySelectChange</span></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 初始化图表需要的数据格式</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">initAqiChartData</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="comment">// 将原始的源数据处理成图表需要的数据格式</span></div><div class="line">  <span class="comment">// 处理好的数据存到 chartData 中</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 初始化函数</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</div><div class="line">  initGraTimeForm()</div><div class="line">  initCitySelector();</div><div class="line">  initAqiChartData();</div><div class="line">&#125;</div><div class="line"></div><div class="line">init();</div></pre></td></tr></table></figure>
<h2 id="注意事项-4"><a href="#注意事项-4" class="headerlink" title="注意事项"></a>注意事项</h2><p>实现简单功能的同时，请仔细学习JavaScript基本语法、事件、DOM相关的知识</p>
<p>请注意代码风格的整齐、优雅</p>
<p>代码中含有必要的注释</p>
<p>示例图仅为参考，不需要完全一致</p>
<p>点击select或者radio选项时，如果没有发生变化，则图表不需要重新渲染</p>
<p>建议不使用任何第三方库、框架</p>
<p>示例代码仅为示例，可以直接使用，也可以完全自己重写</p>
<h2 id="参考资料-4"><a href="#参考资料-4" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.imooc.com/learn/36" target="_blank" rel="external">JavaScript入门篇</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" target="_blank" rel="external">MDN JavaScript</a></p>
<h2 id="任务代码-4"><a href="#任务代码-4" class="headerlink" title="任务代码"></a>任务代码</h2><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// task.html</span></div><div class="line">&lt;!DOCTYPE&gt;</div><div class="line">&lt;html&gt;</div><div class="line">  &lt;head&gt;</div><div class="line">    &lt;meta charset=<span class="string">"utf-8"</span>&gt;</div><div class="line">    &lt;title&gt;IFE JavaScript Task <span class="number">17</span>&lt;/title&gt;</div><div class="line">    &lt;style&gt;</div><div class="line">    .aqi-chart-wrap &#123;</div><div class="line">      display: flex;</div><div class="line">      width: <span class="number">90</span>%;</div><div class="line">      height: <span class="number">600</span>px;</div><div class="line">      justify-content: center;</div><div class="line">      align-items: flex-end;</div><div class="line">      align-content: center;</div><div class="line">      margin: <span class="number">10</span>px auto;</div><div class="line">      padding: <span class="number">10</span>px;</div><div class="line">      border: <span class="number">2</span>px solid <span class="meta">#000;</span></div><div class="line">    &#125;</div><div class="line">    .aqi-chart-wrap div &#123;</div><div class="line">      border: <span class="number">1</span>px solid <span class="meta">#000;</span></div><div class="line">      flex: <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    &lt;/style&gt;</div><div class="line">  &lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">  &lt;fieldset id=<span class="string">"form-gra-time"</span>&gt;</div><div class="line">    &lt;legend&gt;请选择日期粒度：&lt;/legend&gt;</div><div class="line">    &lt;label&gt;日&lt;input name=<span class="string">"gra-time"</span> <span class="keyword">value</span>=<span class="string">"day"</span> type=<span class="string">"radio"</span> <span class="keyword">checked</span>=<span class="string">"checked"</span>&gt;&lt;/label&gt;</div><div class="line">    &lt;label&gt;周&lt;input name=<span class="string">"gra-time"</span> <span class="keyword">value</span>=<span class="string">"week"</span> type=<span class="string">"radio"</span>&gt;&lt;/label&gt;</div><div class="line">    &lt;label&gt;月&lt;input name=<span class="string">"gra-time"</span> <span class="keyword">value</span>=<span class="string">"month"</span> type=<span class="string">"radio"</span>&gt;&lt;/label&gt;</div><div class="line">  &lt;/fieldset&gt;</div><div class="line"></div><div class="line">  &lt;fieldset&gt;</div><div class="line">    &lt;legend&gt;请选择查看的城市：&lt;/legend&gt;</div><div class="line">    &lt;<span class="keyword">select</span> id=<span class="string">"city-select"</span>&gt;</div><div class="line">      &lt;option&gt;北京&lt;/option&gt;</div><div class="line">    &lt;/<span class="keyword">select</span>&gt;</div><div class="line">  &lt;/fieldset&gt;</div><div class="line"></div><div class="line">  &lt;div <span class="keyword">class</span>=<span class="string">"aqi-chart-wrap"</span>&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">  &lt;script src=<span class="string">"task_17.js"</span>&gt;&lt;/script&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"><span class="comment">// task.js</span></div><div class="line"><span class="comment">/* 数据格式演示</span></div><div class="line">var aqiSourceData = &#123;</div><div class="line">  "北京": &#123;</div><div class="line">    "2016-01-01": 10,</div><div class="line">    "2016-01-02": 10,</div><div class="line">    "2016-01-03": 10,</div><div class="line">    "2016-01-04": 10</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">*/</div><div class="line"><span class="comment">//跨浏览器事件绑定</span></div><div class="line"><span class="function">function <span class="title">addEventHandler</span>(<span class="params">ele, <span class="keyword">event</span>, hanlder</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (ele.addEventListener) &#123;</div><div class="line">        ele.addEventListener(<span class="keyword">event</span>, hanlder, <span class="literal">false</span>);</div><div class="line">    &#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span> (<span class="params">ele.attachEvent</span>) </span>&#123;</div><div class="line">        ele.attachEvent(<span class="string">"on"</span>+<span class="keyword">event</span>, hanlder);</div><div class="line">    &#125; <span class="keyword">else</span>  &#123;</div><div class="line">        ele[<span class="string">"on"</span> + <span class="keyword">event</span>] = hanlder;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// 以下两个函数用于随机模拟生成测试数据</span></div><div class="line"><span class="function">function <span class="title">getDateStr</span>(<span class="params">dat</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> y = dat.getFullYear();</div><div class="line">  <span class="keyword">var</span> m = dat.getMonth() + <span class="number">1</span>;</div><div class="line">  m = m &lt; <span class="number">10</span> ? <span class="string">'0'</span> + m : m;</div><div class="line">  <span class="keyword">var</span> d = dat.getDate();</div><div class="line">  d = d &lt; <span class="number">10</span> ? <span class="string">'0'</span> + d : d;</div><div class="line">  <span class="keyword">return</span> y + <span class="string">'-'</span> + m + <span class="string">'-'</span> + d;</div><div class="line">&#125;</div><div class="line"><span class="function">function <span class="title">randomBuildData</span>(<span class="params">seed</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> returnData = &#123;&#125;;</div><div class="line">  <span class="keyword">var</span> dat = <span class="keyword">new</span> Date(<span class="string">"2016-01-01"</span>);</div><div class="line">  <span class="keyword">var</span> datStr = <span class="string">''</span></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; <span class="number">92</span>; i++) &#123;</div><div class="line">    datStr = getDateStr(dat);</div><div class="line">    returnData[datStr] = Math.ceil(Math.random() * seed);</div><div class="line">    dat.setDate(dat.getDate() + <span class="number">1</span>);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> returnData;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> aqiSourceData = &#123;</div><div class="line">  <span class="string">"北京"</span>: randomBuildData(<span class="number">500</span>),</div><div class="line">  <span class="string">"上海"</span>: randomBuildData(<span class="number">300</span>),</div><div class="line">  <span class="string">"广州"</span>: randomBuildData(<span class="number">200</span>),</div><div class="line">  <span class="string">"深圳"</span>: randomBuildData(<span class="number">100</span>),</div><div class="line">  <span class="string">"成都"</span>: randomBuildData(<span class="number">300</span>),</div><div class="line">  <span class="string">"西安"</span>: randomBuildData(<span class="number">500</span>),</div><div class="line">  <span class="string">"福州"</span>: randomBuildData(<span class="number">100</span>),</div><div class="line">  <span class="string">"厦门"</span>: randomBuildData(<span class="number">100</span>),</div><div class="line">  <span class="string">"沈阳"</span>: randomBuildData(<span class="number">500</span>)</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 用于渲染图表的数据</span></div><div class="line"><span class="keyword">var</span> chartData = &#123;&#125;;</div><div class="line"><span class="comment">// 记录当前页面的表单选项</span></div><div class="line"><span class="keyword">var</span> pageState = &#123;</div><div class="line">  nowSelectCity: <span class="string">"北京"</span>,</div><div class="line">  nowGraTime: <span class="string">"day"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> formGraTime = document.getElementById(<span class="string">'form-gra-time'</span>);</div><div class="line"><span class="keyword">var</span> citySelect = document.getElementById(<span class="string">'city-select'</span>);</div><div class="line"><span class="keyword">var</span> aqiChartWrap = document.getElementsByClassName(<span class="string">'aqi-chart-wrap'</span>)[<span class="number">0</span>];</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 渲染图表</div><div class="line"> */</div><div class="line"><span class="function">function <span class="title">renderChart</span>(<span class="params"></span>) </span>&#123;	</div><div class="line">	<span class="keyword">var</span> color = <span class="string">''</span>,text = <span class="string">''</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> item <span class="keyword">in</span> chartData) &#123;</div><div class="line">		color = <span class="string">'#'</span> + Math.floor(Math.random() * <span class="number">0xFFFFFF</span>).toString(<span class="number">16</span>);</div><div class="line">    text += <span class="string">'&lt;div title="'</span>+item+<span class="string">":"</span>+chartData[item]+<span class="string">'" style="height:'</span>+chartData[item]+<span class="string">'px; background-color:'</span>+color+<span class="string">'"&gt;&lt;/div&gt;'</span>;</div><div class="line">&#125;</div><div class="line">  aqiChartWrap.innerHTML = text;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 日、周、月的radio事件点击时的处理函数</div><div class="line"> */</div><div class="line"><span class="function">function <span class="title">graTimeChange</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// 确定是否选项发生了变化 </span></div><div class="line">  <span class="keyword">if</span> (pageState.nowGraTime == <span class="keyword">this</span>.<span class="keyword">value</span>) &#123;</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    pageState.nowGraTime = <span class="keyword">this</span>.<span class="keyword">value</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// 设置对应数据</span></div><div class="line">  initAqiChartData();</div><div class="line">  <span class="comment">// 调用图表渲染函数</span></div><div class="line">  renderChart();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * select发生变化时的处理函数</div><div class="line"> */</div><div class="line"><span class="function">function <span class="title">citySelectChange</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// 确定是否选项发生了变化</span></div><div class="line">  <span class="keyword">if</span> (pageState.nowSelectCity == <span class="keyword">this</span>.<span class="keyword">value</span>) &#123;</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    pageState.nowSelectCity = <span class="keyword">this</span>.<span class="keyword">value</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// 设置对应数据</span></div><div class="line">  initAqiChartData();</div><div class="line">  <span class="comment">// 调用图表渲染函数</span></div><div class="line">  renderChart();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 初始化日、周、月的radio事件，当点击时，调用函数graTimeChange</div><div class="line"> */</div><div class="line"><span class="function">function <span class="title">initGraTimeForm</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> pageRadio = formGraTime.getElementsByTagName(<span class="string">'input'</span>);</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; pageRadio.length; i++) &#123;</div><div class="line">    addEventHandler(pageRadio[i],<span class="string">'click'</span>,graTimeChange);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 初始化城市Select下拉选择框中的选项</div><div class="line"> */</div><div class="line"><span class="function">function <span class="title">initCitySelector</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// 读取aqiSourceData中的城市，然后设置id为city-select的下拉列表中的选项</span></div><div class="line">  <span class="keyword">var</span> cityList = <span class="string">''</span>;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> aqiSourceData) &#123;</div><div class="line">  	cityList += <span class="string">'&lt;option&gt;'</span> + i +<span class="string">'&lt;/option&gt;'</span>;</div><div class="line">  &#125;</div><div class="line">  citySelect.innerHTML = cityList;</div><div class="line">  <span class="comment">// 给select设置事件，当选项发生变化时调用函数citySelectChange</span></div><div class="line">  addEventHandler(citySelect,<span class="string">'change'</span>,citySelectChange)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 初始化图表需要的数据格式</div><div class="line"> */</div><div class="line"><span class="function">function <span class="title">initAqiChartData</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// 将原始的源数据处理成图表需要的数据格式,现在数据都在aqiSourceData[]中</span></div><div class="line">  <span class="comment">// 处理好的数据存到 chartData 中</span></div><div class="line">  <span class="keyword">var</span> nowCityData = aqiSourceData[pageState.nowSelectCity];</div><div class="line">  <span class="comment">//nowCityData是确定的一个城市的92天降水数组，key是日期，nowCityData[key]是降水量</span></div><div class="line"></div><div class="line">  <span class="keyword">if</span> (pageState.nowGraTime == <span class="string">'day'</span>) &#123;</div><div class="line">    chartData = nowCityData;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (pageState.nowGraTime == <span class="string">'week'</span>) &#123;</div><div class="line">    chartData = &#123;&#125;;</div><div class="line">    <span class="keyword">var</span> countSum=<span class="number">0</span>, daySum=<span class="number">0</span>, week=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> item <span class="keyword">in</span> nowCityData) &#123;</div><div class="line">      countSum += nowCityData[item];</div><div class="line">      daySum ++;</div><div class="line">      <span class="keyword">if</span> ((<span class="keyword">new</span> Date(item)).getDay() == <span class="number">6</span> ) &#123;</div><div class="line">        week ++;</div><div class="line">        chartData[<span class="string">'第'</span>+week+<span class="string">'周'</span>] = Math.floor(countSum/daySum);;</div><div class="line">        countSum = <span class="number">0</span>;</div><div class="line">        daySum = <span class="number">0</span>;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (daySum!=<span class="number">0</span>) &#123;</div><div class="line">      week ++;</div><div class="line">      chartData[<span class="string">'第'</span>+week+<span class="string">'周'</span>] = Math.floor(countSum/daySum);</div><div class="line">    &#125;<span class="comment">//保证最后一周若不满也能算一周</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (pageState.nowGraTime == <span class="string">'month'</span>) &#123;</div><div class="line">    chartData = &#123;&#125;;</div><div class="line">    <span class="keyword">var</span> countSum=<span class="number">0</span>, daySum=<span class="number">0</span>, month=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> item <span class="keyword">in</span> nowCityData) &#123;</div><div class="line">      countSum += nowCityData[item];</div><div class="line">      daySum ++;</div><div class="line">      <span class="keyword">if</span> ((<span class="keyword">new</span> Date(item)).getMonth() !== month) &#123;</div><div class="line">        month ++;</div><div class="line">        chartData[<span class="string">'第'</span>+month+<span class="string">'月'</span>] = Math.floor(countSum/daySum);</div><div class="line">        countSum = <span class="number">0</span></div><div class="line">        daySum = <span class="number">0</span>;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (daySum != <span class="number">0</span>) &#123;</div><div class="line">      month ++;</div><div class="line">      chartData[<span class="string">'第'</span>+month+<span class="string">'月'</span>] = Math.floor(countSum/daySum);</div><div class="line">    &#125;<span class="comment">//逻辑同周，不知道对不对</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 初始化函数</div><div class="line"> */</div><div class="line"><span class="function">function <span class="title">init</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  initGraTimeForm()</div><div class="line">  initCitySelector();</div><div class="line">  initAqiChartData();</div><div class="line">  renderChart();</div><div class="line">&#125;</div><div class="line"></div><div class="line">init();</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;任务一&quot;&gt;&lt;a href=&quot;#任务一&quot; class=&quot;headerlink&quot; title=&quot;任务一&quot;&gt;&lt;/a&gt;任务一&lt;/h1&gt;&lt;h2 id=&quot;任务目的&quot;&gt;&lt;a href=&quot;#任务目的&quot; class=&quot;headerlink&quot; title=&quot;任务目的&quot;&gt;&lt;/a&gt;任务目的&lt;/h2&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://yoursite.com/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>【总结】2018年8月份个人总结</title>
    <link href="http://yoursite.com/2018/08/31/2018.8.31/"/>
    <id>http://yoursite.com/2018/08/31/2018.8.31/</id>
    <published>2018-08-31T15:16:41.000Z</published>
    <updated>2018-09-12T12:53:25.047Z</updated>
    
    <content type="html"><![CDATA[<p>生活不止眼前的苟且,还有诗与远方的田野<br><a id="more"></a></p>
<p>时间的逝去总是让人悲叹，尤其是当你虚度时光之后，你事后的回眸才会发现时光给了你迎头痛击</p>
<p>2018年鬼知道我经历了什么，无法挽回，唯有回味、总结，但对未来的憧憬我一直在路上</p>
<p>没想到已经8月份已经过去,感觉时间要炸了</p>
<p>这个月除了完成海尔的自营产品管理后台和前台页面的同步数据外,下班利用晚上及周末继续学nodejs、php、MySQL、正则表达式</p>
<p>前半个月都是11点睡6点起,但是发现早上虽然精神很好,但是学到快出门上班就有点筋疲力尽的感觉,后半个月作息调整为12点睡7点醒,状态好很多</p>
<p>每天都坚持跑3公里,一年目标是500公里,目前才90多,感觉不妙</p>
<p>用易语言写了个脚本白天上班挂游戏,一天可以赚3块钱,当娱乐及交电费吧,哈哈</p>
<p>学习了C#，看完了C#菜鸟教程，看了一部分ASP.NET，不过很可惜自己没有坚持下来，不过那时也真的很多不懂的，没有遗憾(后续不会在学)</p>
<h1 id="学习"><a href="#学习" class="headerlink" title="学习"></a>学习</h1><p>1.nodejs:搭建一个的服务器,服务器内容包括读写文件、读取前端get或post参数并返回页面及数据</p>
<p>2.nodejs:写三个爬虫,用于公司产品部进行爬速卖通、天猫及亚马逊的产品具体信息(待完善:还不够自动化)</p>
<p>3.重新整理并复习CSS、JavaScript、git、webpack、jQuery、React.js</p>
<p>4.CSS3媒体查询,写了一个兼容手机、ipad、电脑、宽屏电脑四个设备的响应式网站</p>
<p>5.PHP + MySQL 写了一个新闻网建站</p>
<p>6.React.js写了一个简单的调色板</p>
<p>7.学会前端调试技巧</p>
<p>8.css自学border法及js assert法</p>
<p>9.在segmentfault社区答题，了解别人在实际项目中会遇到的问题，感觉还是不错的，毕竟这些都是实际问题</p>
<p>10.复习正则表达式,这玩意真的是记了忘,忘了记</p>
<p>11.Sass学习，算是比较系统地学习了一下</p>
<p>12.前端工程化的学习历史并用到项目上,gulp、grunt、webpack</p>
<p>13.freecodecamp刷题</p>
<h1 id="工作"><a href="#工作" class="headerlink" title="工作"></a>工作</h1><p>1.协同系统-自营产品管理-新增、修改、查看页(增加Hotoem产品绑定信息、产品介绍更换为富本文)</p>
<p>2.协同系统-自营产品管理-产品导入页(增加Hotoem产品绑定信息)</p>
<p>3.协同系统-品类维护-新增页(增加绑定hotoem品类)</p>
<p>4.协同系统-销售区域维护-新增页(增加绑定hotoem销售区域)</p>
<p>5.hotoem后台系统-采购询盘管理-采购商产品留言-查看页(增加协同产品信息)</p>
<p>6.设计易前台-设计服务、成功案例、行业动态页(增加图片懒加载功能)</p>
<p>7.hotoem前台-产品页(增加Contact Us按钮及样式调整)</p>
<h1 id="生活"><a href="#生活" class="headerlink" title="生活"></a>生活</h1><p>1.继续坚持写字帖、夜跑3公里</p>
<p>2.调整作息、恢复学习状态</p>
<p>3.前公司设计同事联系到我并想和我合作建站,他工作经验5年手上有很多腾讯网易的外包项目,是个不错的人际，告知现在情况，占时不行,以后在合作</p>
<p>4.前公司后端同事到我宿舍喝茶,并计划工作室的事</p>
<p>5.家里房子第四层建好,第五层开始,最近大雨，不用清理房子周围的烟沙,老爸挺开心</p>
<p>6.最近汕头部分地区连续大雨,导致很多地方都淹水,非常严重,希望一切都好</p>
<p>7.这个月下了半个月雨,没有去过泳池</p>
<p>8.与同事去大石小区打了2次篮球</p>
<p>9.看新东方新概念英语(一到四册)</p>
<p>10.学习专业素描</p>
<p>11.专利代理人培训教程初学</p>
<h1 id="阅读"><a href="#阅读" class="headerlink" title="阅读"></a>阅读</h1><h2 id="书籍"><a href="#书籍" class="headerlink" title="书籍"></a>书籍</h2><p>《阮一峰JavaScript教程》、《爱前端JavaScript》、《月亮与三个便士》、《蜡笔小新合集二》、《海贼王》、《漫画数据库》、《PHP和MySQL.Web开发(原书第4版)》、《Node.js菜鸟教程》、《爱前端Node.js》、《nodejs入门经典》</p>
<h2 id="电影"><a href="#电影" class="headerlink" title="电影"></a>电影</h2><p>《蚁人》、《狄仁杰之四大天王》</p>
<h2 id="音频"><a href="#音频" class="headerlink" title="音频"></a>音频</h2><p>《JavaScript高程教程》</p>
<h1 id="绩效评估"><a href="#绩效评估" class="headerlink" title="绩效评估"></a>绩效评估</h1><table>
<thead>
<tr>
<th>学习</th>
<th>工作</th>
<th>生活</th>
<th>阅读</th>
<th>总分</th>
</tr>
</thead>
<tbody>
<tr>
<td>8</td>
<td>8</td>
<td>8</td>
<td>8</td>
<td>32</td>
</tr>
</tbody>
</table>
<h1 id="计划"><a href="#计划" class="headerlink" title="计划"></a>计划</h1><p>1.学习Canvas和HTML5,画个皮卡丘</p>
<p>2.继续好好学习nodejs,争取弄懂其中奥妙</p>
<p>3.深入php,开始做大量项目</p>
<p>4.深入React.js,开始建站</p>
<p>5.初学小程序,争取玩一玩框架,听说和vue很像,应该很简单</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;生活不止眼前的苟且,还有诗与远方的田野&lt;br&gt;
    
    </summary>
    
      <category term="lifes" scheme="http://yoursite.com/categories/lifes/"/>
    
    
      <category term="个人总结" scheme="http://yoursite.com/tags/%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>前端调试</title>
    <link href="http://yoursite.com/2018/08/26/2018.8.26/"/>
    <id>http://yoursite.com/2018/08/26/2018.8.26/</id>
    <published>2018-08-26T15:16:41.000Z</published>
    <updated>2018-09-11T14:09:10.342Z</updated>
    
    <content type="html"><![CDATA[<p>给我一首歌时间</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;给我一首歌时间&lt;/p&gt;

    
    </summary>
    
      <category term="JavaScript" scheme="http://yoursite.com/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>【实战】JS语音生成器</title>
    <link href="http://yoursite.com/2018/08/23/2018.8.23/"/>
    <id>http://yoursite.com/2018/08/23/2018.8.23/</id>
    <published>2018-08-23T15:16:41.000Z</published>
    <updated>2018-09-08T08:17:17.434Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JS-语录生成器"><a href="#JS-语录生成器" class="headerlink" title="JS 语录生成器"></a>JS 语录生成器</h1><a id="more"></a>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line">// index.html</div><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>JS Bin<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./index.css"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"page"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"editor"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"word1"</span> <span class="attr">value</span>=<span class="string">"真诚的爱情"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"word2"</span>  <span class="attr">value</span>=<span class="string">"女孩子"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span>  <span class="attr">id</span>=<span class="string">"word3"</span>  <span class="attr">value</span>=<span class="string">"我爱你"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span>  <span class="attr">id</span>=<span class="string">"word4"</span>  <span class="attr">value</span>=<span class="string">"在这份爱上加上一个期限"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">generate</span>&gt;</span>生成<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"preview"</span> <span class="attr">id</span>=<span class="string">"preview"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>曾经有一份 <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"place1"</span>&gt;</span>真诚的爱情<span class="tag">&lt;/<span class="name">span</span>&gt;</span> 放在我面前，我没有珍惜，等我失去的时候我才后悔莫及，人世间最痛苦的事莫过于此。</div><div class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>如果上天能够给我一个再来一次的机会，我会对那个 <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"place2"</span>&gt;</span>女孩子<span class="tag">&lt;/<span class="name">span</span>&gt;</span> 说三个字：<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"place3"</span>&gt;</span>我爱你<span class="tag">&lt;/<span class="name">span</span>&gt;</span>。如果非要 <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"place4"</span>&gt;</span>在这份爱上加上一个期限<span class="tag">&lt;/<span class="name">span</span>&gt;</span>，我希望是……一万年……</div><div class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div><div class="line"></div><div class="line">// index.css</div><div class="line">*&#123;</div><div class="line">  margin: 0;padding:0;box-sizing: border-box;</div><div class="line">&#125;</div><div class="line">ul,ol&#123;</div><div class="line">  list-style: none;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.page&#123;</div><div class="line"></div><div class="line">  display: flex;</div><div class="line">  padding: 1em;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.page .editor&#123;</div><div class="line">  margin-right: 3em;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.page .preview p&#123;</div><div class="line">  margin-bottom: 1em;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// index.js</div><div class="line">console.assert(generate.tagName === 'BUTTON')</div><div class="line">generate.onclick = function()&#123;</div><div class="line">  var w1 = word1.value</div><div class="line">  var w2 = word2.value</div><div class="line">  var w3 = word3.value</div><div class="line">  var w4 = word4.value</div><div class="line">  </div><div class="line">//   place1.innerText = w1</div><div class="line">//   place2.innerText = w2</div><div class="line">//   place3.innerText = w3</div><div class="line">//   place4.innerText = w4</div><div class="line">  var html = `<span class="tag">&lt;<span class="name">p</span>&gt;</span>曾经有一份$&#123;w1&#125;放在我面前，我没有珍惜，等我失去的时候我才后悔莫及，人世间最痛苦的事莫过于此。</div><div class="line">              <span class="tag">&lt;<span class="name">p</span>&gt;</span>如果上天能够给我一个再来一次的机会，我会对那个$&#123;w2&#125;说三个字：$&#123;w3&#125;。如果非要$&#123;w4&#125;，我希望是……一万年……`</div><div class="line">  preview.innerHTML = html</div><div class="line">&#125;</div><div class="line">console.log(document.querySelectorAll('.preview&gt;p'))</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JS-语录生成器&quot;&gt;&lt;a href=&quot;#JS-语录生成器&quot; class=&quot;headerlink&quot; title=&quot;JS 语录生成器&quot;&gt;&lt;/a&gt;JS 语录生成器&lt;/h1&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://yoursite.com/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript assert</title>
    <link href="http://yoursite.com/2018/08/19/2018.8.19/"/>
    <id>http://yoursite.com/2018/08/19/2018.8.19/</id>
    <published>2018-08-19T15:16:41.000Z</published>
    <updated>2018-09-08T08:12:31.121Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JS-assert"><a href="#JS-assert" class="headerlink" title="JS assert"></a>JS assert</h1><p>自学常用方法,assert来猜自己到底对不对,我错在哪<br><a id="more"></a><br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">function assert(value, <span class="keyword">description</span>)&#123;</div><div class="line">  <span class="keyword">description</span> = <span class="keyword">description</span> || <span class="string">''</span></div><div class="line">  <span class="keyword">if</span>(value === <span class="keyword">true</span>)&#123;</div><div class="line">    console.info(<span class="string">'[测试通过]'</span>+ <span class="keyword">description</span>)</div><div class="line">  &#125;<span class="keyword">else</span>&#123;</div><div class="line">    console.error(<span class="string">'[测试不通过]'</span> + <span class="keyword">description</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">assert(<span class="string">'1\n2'</span>.length===<span class="number">3</span>, <span class="string">'\\n占一个字符'</span>)</div></pre></td></tr></table></figure></p>
<h1 id="用-assert-学-JS"><a href="#用-assert-学-JS" class="headerlink" title="用 assert 学 JS"></a>用 assert 学 JS</h1><figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span><span class="params">()</span></span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">'hello world'</span></div><div class="line">&#125;</div><div class="line"><span class="built_in">assert</span>(f1 === <span class="string">'hello world'</span>)</div><div class="line"><span class="built_in">assert</span>(f1() === <span class="string">'hello world'</span>)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span><span class="params">()</span></span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">assert</span>(typeof f1() === <span class="string">'function'</span>)</div><div class="line"></div><div class="line"><span class="built_in">assert</span>(typeof document === <span class="string">'object'</span>)</div></pre></td></tr></table></figure>
<p>学会调试（console.log、console.assert、断点）</p>
<p>先做再理解（Demo 先行）</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JS-assert&quot;&gt;&lt;a href=&quot;#JS-assert&quot; class=&quot;headerlink&quot; title=&quot;JS assert&quot;&gt;&lt;/a&gt;JS assert&lt;/h1&gt;&lt;p&gt;自学常用方法,assert来猜自己到底对不对,我错在哪&lt;br&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://yoursite.com/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>【实战】一个响应式页面</title>
    <link href="http://yoursite.com/2018/08/16/2018.8.16/"/>
    <id>http://yoursite.com/2018/08/16/2018.8.16/</id>
    <published>2018-08-16T15:16:41.000Z</published>
    <updated>2018-09-02T13:57:02.281Z</updated>
    
    <content type="html"><![CDATA[<p>兼容手机、电脑、ipad、宽屏电脑四种设备的简单响应式页面</p>
<a id="more"></a>
<h1 id="设计图"><a href="#设计图" class="headerlink" title="设计图"></a>设计图</h1><p><img src="https://jscode.me/uploads/default/original/2X/e/e1fdde35d7ed6a9c61829804d33aaffff9e75e9a.jpg" alt="image"></p>
<h1 id="HTML部分"><a href="#HTML部分" class="headerlink" title="HTML部分"></a>HTML部分</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div></pre></td><td class="code"><pre><div class="line">// index.html</div><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-Hans"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge,chrome=1"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>一个响应式页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"style.css"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"logo"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"img"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"slogan"</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;<span class="name">li</span>&gt;</span>诚实<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;<span class="name">li</span>&gt;</span>守信<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;<span class="name">li</span>&gt;</span>求是<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;<span class="name">li</span>&gt;</span>创新<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">section</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"banner"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是一个<span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;<span class="name">h2</span>&gt;</span>响应式页面<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"details"</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;<span class="name">p</span>&gt;</span>描述111111111111111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;<span class="name">p</span>&gt;</span>描述111111111111111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">section</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"products"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">ol</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"product"</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"img"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">p</span>&gt;</span>描述2222222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"product"</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"img"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">p</span>&gt;</span>描述2222222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"product"</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"img"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">p</span>&gt;</span>描述2222222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"product"</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"img"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">p</span>&gt;</span>描述2222222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"product"</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"img"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">p</span>&gt;</span>描述2222222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"product"</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"img"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">p</span>&gt;</span>描述2222222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"product"</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"img"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">p</span>&gt;</span>描述2222222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"product"</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"img"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">p</span>&gt;</span>描述2222222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"product"</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"img"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">	      <span class="tag">&lt;<span class="name">p</span>&gt;</span>描述2222222222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">ol</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">section</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="CSS部分"><a href="#CSS部分" class="headerlink" title="CSS部分"></a>CSS部分</h1><figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// style.css</span></div><div class="line"><span class="selector-tag">body</span>&#123;</div><div class="line">	<span class="attribute">margin</span>: <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">ul</span>,<span class="selector-tag">ol</span>&#123;</div><div class="line">	<span class="attribute">list-style</span>:none;</div><div class="line">	<span class="attribute">padding</span>: <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*logo 模块*/</span></div><div class="line"><span class="selector-class">.logo</span>&#123;</div><div class="line">	<span class="attribute">text-align</span>: center;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.logo</span> &gt; <span class="selector-class">.img</span>&#123;</div><div class="line">	<span class="attribute">display</span>: inline-block;</div><div class="line">	<span class="attribute">width</span>: <span class="number">72px</span>;</div><div class="line">	<span class="attribute">height</span>: <span class="number">72px</span>;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#D8D8D8</span>;</div><div class="line">	<span class="attribute">border-radius</span>: <span class="number">36px</span>;</div><div class="line">	<span class="attribute">margin-top</span>: <span class="number">60px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.logo</span> &gt; <span class="selector-class">.slogan</span>&#123;</div><div class="line">	<span class="attribute">margin-top</span>: <span class="number">28px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.logo</span> &gt; <span class="selector-class">.slogan</span> &gt; <span class="selector-tag">li</span>&#123;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#D8D8D8</span>;</div><div class="line">	<span class="attribute">display</span>: inline-block;</div><div class="line">	<span class="attribute">min-width</span>: <span class="number">128px</span>;</div><div class="line">	<span class="attribute">margin-left</span>: <span class="number">10px</span>;</div><div class="line">	<span class="attribute">margin-right</span>: <span class="number">10px</span>;</div><div class="line">	<span class="attribute">margin-bottom</span>: <span class="number">24px</span>;</div><div class="line">	<span class="attribute">padding</span>: <span class="number">1px</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/*banner 模块*/</span></div><div class="line"><span class="selector-class">.banner</span>&#123;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#EFEFEF</span>;</div><div class="line">	<span class="attribute">text-align</span>: center;</div><div class="line">	<span class="attribute">padding-top</span>: <span class="number">46px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.banner</span> &gt; <span class="selector-tag">h2</span>&#123;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#D8D8D8</span>;</div><div class="line">	<span class="attribute">display</span>: inline-block;</div><div class="line">	<span class="attribute">border-radius</span>: <span class="number">14px</span>;</div><div class="line">	<span class="attribute">min-width</span>: <span class="number">200px</span>;</div><div class="line">	<span class="attribute">margin-top</span>: <span class="number">10px</span>;</div><div class="line">	<span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</div><div class="line">	<span class="attribute">line-height</span>: <span class="number">34px</span>;</div><div class="line">	<span class="attribute">padding</span>: <span class="number">3px</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.banner</span> <span class="selector-class">.details</span> <span class="selector-tag">p</span>&#123;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#E8E7E7</span>;</div><div class="line">	<span class="attribute">max-width</span>: <span class="number">250px</span>;</div><div class="line">	<span class="attribute">margin-left</span>: auto;</div><div class="line">	<span class="attribute">margin-right</span>: auto;</div><div class="line">	<span class="attribute">line-height</span>: <span class="number">24px</span>;</div><div class="line">	<span class="attribute">border-radius</span>: <span class="number">14px</span>;</div><div class="line">	<span class="attribute">margin-top</span>: <span class="number">20px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/*products 模块*/</span></div><div class="line"><span class="selector-class">.products</span>&#123;</div><div class="line">	<span class="attribute">margin</span>: <span class="number">0</span> <span class="number">16px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.products</span> &gt; <span class="selector-tag">ol</span>&#123;&#125;</div><div class="line"><span class="selector-class">.products</span> &gt; <span class="selector-tag">ol</span> &gt; <span class="selector-tag">li</span>&#123;&#125;</div><div class="line"><span class="selector-class">.products</span> <span class="selector-class">.product</span>&#123;&#125;</div><div class="line"><span class="selector-class">.products</span> <span class="selector-class">.product</span> &gt; <span class="selector-class">.img</span>&#123;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#D8D8D8</span>;</div><div class="line">	<span class="attribute">border-radius</span>: <span class="number">4px</span>;</div><div class="line">	<span class="attribute">min-width</span>: <span class="number">288px</span>;</div><div class="line">	<span class="attribute">height</span>: <span class="number">180px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.products</span> <span class="selector-class">.product</span> &gt; <span class="selector-tag">h3</span>&#123;</div><div class="line">	<span class="attribute">max-width</span>: <span class="number">204px</span>;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#BCBCBC</span>;</div><div class="line">	<span class="attribute">border-radius</span>: <span class="number">4px</span>;</div><div class="line">	<span class="attribute">line-height</span>: <span class="number">24px</span>;</div><div class="line">	<span class="attribute">margin-top</span>: <span class="number">20px</span>;</div><div class="line">	<span class="attribute">margin-bottom</span>: <span class="number">14px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.products</span> <span class="selector-class">.product</span> &gt;<span class="selector-tag">p</span>&#123;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#ECECEC</span>;</div><div class="line">	<span class="attribute">border-radius</span>: <span class="number">4px</span>;</div><div class="line">	<span class="attribute">line-height</span>: <span class="number">16px</span>;</div><div class="line">	<span class="attribute">font-size</span>: <span class="number">14px</span>;</div><div class="line">	<span class="attribute">margin-top</span>: <span class="number">14px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;兼容手机、电脑、ipad、宽屏电脑四种设备的简单响应式页面&lt;/p&gt;
    
    </summary>
    
      <category term="HTML/CSS" scheme="http://yoursite.com/categories/HTML-CSS/"/>
    
    
      <category term="HTML" scheme="http://yoursite.com/tags/HTML/"/>
    
  </entry>
  
  <entry>
    <title>form、a、iframe 和 table 详解</title>
    <link href="http://yoursite.com/2018/08/13/2018.8.13/"/>
    <id>http://yoursite.com/2018/08/13/2018.8.13/</id>
    <published>2018-08-13T15:16:41.000Z</published>
    <updated>2018-08-27T23:40:53.490Z</updated>
    
    <content type="html"><![CDATA[<h1 id="a标签"><a href="#a标签" class="headerlink" title="a标签"></a>a标签</h1><h2 id="href"><a href="#href" class="headerlink" title="href"></a>href</h2><a id="more"></a>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 相对路径</span></div><div class="line">&lt;<span class="selector-tag">a</span> href=<span class="string">"./xxx"</span>&gt;点击&lt;/a&gt;</div><div class="line"></div><div class="line"><span class="comment">// 绝对路径</span></div><div class="line">&lt;<span class="selector-tag">a</span> href=<span class="string">"www.baidu.com"</span>&gt;点击&lt;/a&gt;</div><div class="line"></div><div class="line"><span class="comment">// 有协议路径</span></div><div class="line">&lt;<span class="selector-tag">a</span> href=<span class="string">"https://www.baidu.com"</span>&gt;点击&lt;/a&gt;</div><div class="line"></div><div class="line"><span class="comment">// 无协议路径(跟随文件所在协议)</span></div><div class="line">&lt;<span class="selector-tag">a</span> href=<span class="string">"//www.baidu.com"</span>&gt;点击&lt;/a&gt;</div><div class="line"></div><div class="line"><span class="comment">// javascipt: 伪协议</span></div><div class="line">&lt;<span class="selector-tag">a</span> href=<span class="string">"javascript:;"</span>&gt;点击&lt;/a&gt;</div><div class="line"></div><div class="line"><span class="comment">// 锚点（fragment）</span></div><div class="line">&lt;<span class="selector-tag">a</span> href=<span class="string">"#xxx"</span>&gt;点击&lt;/a&gt;</div><div class="line">&lt;<span class="selector-tag">div</span> id=<span class="string">"xxx"</span>&gt;<span class="number">2</span>&lt;/div&gt;</div></pre></td></tr></table></figure>
<h2 id="target"><a href="#target" class="headerlink" title="target"></a>target</h2><p>_blank:打开新窗口</p>
<p>_self:自身窗口打开</p>
<p>_top:最顶层窗口打开</p>
<p>_parent:父窗口打开</p>
<blockquote>
<p>a标签打开target给值都是窗口的name</p>
</blockquote>
<h2 id="download"><a href="#download" class="headerlink" title="download"></a>download</h2><h1 id="iframe标签"><a href="#iframe标签" class="headerlink" title="iframe标签"></a>iframe标签</h1><p>页面套页面</p>
<p>性能较低</p>
<p>name 属性</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://baidu.com"</span> <span class="attr">target</span>=<span class="string">"xxx"</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"/b"</span> <span class="attr">name</span>=<span class="string">"xxx"</span> <span class="attr">frameborder</span>=<span class="string">"0"</span> <span class="attr">width</span>=<span class="string">900</span> <span class="attr">height</span>=<span class="string">900</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div></pre></td></tr></table></figure>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/iframe" target="_blank" rel="external">其他属性</a></p>
<h1 id="table标签"><a href="#table标签" class="headerlink" title="table标签"></a>table标签</h1><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/table" target="_blank" rel="external">table属性</a></p>
<h1 id="form构造get请求"><a href="#form构造get请求" class="headerlink" title="form构造get请求"></a>form构造get请求</h1><p>form的action请求路径</p>
<p>inpui的name和value分别对应请求参数的key和value,多个参数用&amp;连接</p>
<p>同个路径,不同请求参数对应不同页面</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">// index.html</div><div class="line">&lt;form action=<span class="string">"/"</span>&gt;</div><div class="line">	&lt;<span class="keyword">div</span>&gt;</div><div class="line">		&lt;input <span class="keyword">type</span>=<span class="string">"text"</span> name=<span class="string">"username"</span> &gt;</div><div class="line">	&lt;/<span class="keyword">div</span>&gt;</div><div class="line">	&lt;<span class="keyword">div</span>&gt;</div><div class="line">		&lt;input <span class="keyword">type</span>=<span class="string">"password"</span> name=<span class="string">"password"</span> &gt;</div><div class="line">	&lt;/<span class="keyword">div</span>&gt;</div><div class="line">	&lt;<span class="keyword">div</span>&gt;</div><div class="line">		&lt;input <span class="keyword">type</span>=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</div><div class="line">	&lt;/<span class="keyword">div</span>&gt;</div><div class="line">&lt;/form&gt;</div><div class="line"></div><div class="line">// server.js</div><div class="line"><span class="keyword">if</span>(path === <span class="string">"/"</span>)&#123;</div><div class="line">	<span class="keyword">var</span> <span class="built_in">string</span> = fs.readFileSync(<span class="string">"./index.html"</span>)</div><div class="line">	response.setHeader(<span class="string">"Content-type"</span>,<span class="string">"text/html;charset=utf-8"</span>)</div><div class="line">	<span class="keyword">if</span>(query.username)&#123;</div><div class="line">		response.<span class="keyword">end</span>(<span class="string">"你好"</span> + query.username)</div><div class="line">	&#125;<span class="keyword">else</span>&#123;</div><div class="line">		response.<span class="keyword">end</span>(<span class="built_in">string</span>)</div><div class="line">	&#125;</div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line">	response.<span class="keyword">end</span>(<span class="string">"404"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="form构造post请求"><a href="#form构造post请求" class="headerlink" title="form构造post请求"></a>form构造post请求</h1><p>get 和 post 的区别</p>
<ul>
<li>消息体：get 没有，post 有</li>
<li>查询参数：get 一般使用查询参数，post 一般不使用</li>
<li>URL 长度：get 的 URL 存在长度限制（1024个字符等），post 没有限制（其实也有）</li>
<li>安全性：post 比 get 安全一丢丢，因为 post 需要用 form 来构造，而 get 可以轻易构造</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">// index.html</div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> &gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> &gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;a标签&quot;&gt;&lt;a href=&quot;#a标签&quot; class=&quot;headerlink&quot; title=&quot;a标签&quot;&gt;&lt;/a&gt;a标签&lt;/h1&gt;&lt;h2 id=&quot;href&quot;&gt;&lt;a href=&quot;#href&quot; class=&quot;headerlink&quot; title=&quot;href&quot;&gt;&lt;/a&gt;href&lt;/h2&gt;
    
    </summary>
    
      <category term="HTML/CSS" scheme="http://yoursite.com/categories/HTML-CSS/"/>
    
    
      <category term="HTML" scheme="http://yoursite.com/tags/HTML/"/>
    
  </entry>
  
  <entry>
    <title>【实战】PHP + MySQL新闻网</title>
    <link href="http://yoursite.com/2018/08/09/2018.8.9/"/>
    <id>http://yoursite.com/2018/08/09/2018.8.9/</id>
    <published>2018-08-09T15:16:41.000Z</published>
    <updated>2018-08-20T14:06:45.555Z</updated>
    
    <content type="html"><![CDATA[<h1 id="我在生le"><a href="#我在生le" class="headerlink" title="我在生le"></a>我在生le</h1>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;我在生le&quot;&gt;&lt;a href=&quot;#我在生le&quot; class=&quot;headerlink&quot; title=&quot;我在生le&quot;&gt;&lt;/a&gt;我在生le&lt;/h1&gt;
    
    </summary>
    
      <category term="BackEnd" scheme="http://yoursite.com/categories/BackEnd/"/>
    
    
      <category term="PHP" scheme="http://yoursite.com/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>正则表达式</title>
    <link href="http://yoursite.com/2018/08/06/2018.8.6/"/>
    <id>http://yoursite.com/2018/08/06/2018.8.6/</id>
    <published>2018-08-06T15:16:41.000Z</published>
    <updated>2018-08-22T14:16:41.266Z</updated>
    
    <content type="html"><![CDATA[<h1 id="正则表达式简介"><a href="#正则表达式简介" class="headerlink" title="正则表达式简介"></a>正则表达式简介</h1><p>正则表达式使用单个字符串来描述、匹配一系列符合某个句法规则的字符串<br><a id="more"></a></p>
<h1 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h1><p>新建正则表达式有两种方法。一种是使用字面量，以斜杠表示开始和结束;另一种是使用RegExp构造函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 两种写法是等价的，都新建了一个内容为xyz的正则表达式对象</span></div><div class="line"><span class="keyword">var</span> regex = <span class="regexp">/xyz/</span>;</div><div class="line"><span class="comment">// 等价于</span></div><div class="line"><span class="keyword">var</span> regex = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'xyz'</span>);</div><div class="line"></div><div class="line"><span class="comment">// RegExp构造函数还可以接受第二个参数，表示修饰符</span></div><div class="line"><span class="keyword">var</span> regex = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'xyz'</span>, <span class="string">'i'</span>);</div><div class="line"><span class="comment">// 等价于</span></div><div class="line"><span class="keyword">var</span> regex = <span class="regexp">/xyz/i</span>;</div></pre></td></tr></table></figure>
<h1 id="实例属性"><a href="#实例属性" class="headerlink" title="实例属性"></a>实例属性</h1><p>正则对象的实例属性分成两类</p>
<p>一类是修饰符相关，返回一个布尔值，表示对应的修饰符是否设置</p>
<ul>
<li>RegExp.prototype.ignoreCase：返回一个布尔值，表示是否设置了i修饰符</li>
<li>RegExp.prototype.global：返回一个布尔值，表示是否设置了g修饰符</li>
<li>RegExp.prototype.multiline：返回一个布尔值，表示是否设置了m修饰符</li>
</ul>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var r = <span class="regexp">/abc/igm</span>;</div><div class="line"></div><div class="line">r.ignoreCase <span class="regexp">//</span> <span class="literal">true</span></div><div class="line">r.<span class="built_in">global</span> <span class="regexp">//</span> <span class="literal">true</span></div><div class="line">r.multiline <span class="regexp">//</span> <span class="literal">true</span></div></pre></td></tr></table></figure>
<p>另一类是与修饰符无关的属性，主要是下面两个</p>
<ul>
<li>RegExp.prototype.lastIndex：返回一个数值，表示下一次开始搜索的位置</li>
<li>RegExp.prototype.source：返回正则表达式的字符串形式（不包括反斜杠），该属性只读</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var r = <span class="regexp">/abc/igm</span>;</div><div class="line"></div><div class="line">r.lastIndex <span class="regexp">//</span> <span class="number">0</span></div><div class="line">r.source <span class="regexp">//</span> <span class="string">"abc"</span></div></pre></td></tr></table></figure>
<h1 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h1><h2 id="RegExp-prototype-test"><a href="#RegExp-prototype-test" class="headerlink" title="RegExp.prototype.test()"></a>RegExp.prototype.test()</h2><p>正则实例对象的test方法返回一个布尔值，表示当前模式是否能匹配参数字符串</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 验证参数字符串之中是否包含cat，结果返回true</span></div><div class="line">/cat/.test(<span class="string">'cats and dogs'</span>) <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="comment">// 正则表达式使用了g修饰符，表示是全局搜索，会有多个结果</span></div><div class="line"><span class="comment">// 三次使用test方法，每一次开始搜索的位置都是上一次匹配的后一个位置</span></div><div class="line"><span class="keyword">var</span> r = <span class="regexp">/x/g</span>;</div><div class="line"><span class="keyword">var</span> s = <span class="string">'_x_x'</span>;</div><div class="line"></div><div class="line">r.lastIndex <span class="comment">// 0</span></div><div class="line">r.test(s) <span class="comment">// true</span></div><div class="line"></div><div class="line">r.lastIndex <span class="comment">// 2</span></div><div class="line">r.test(s) <span class="comment">// true</span></div><div class="line"></div><div class="line">r.lastIndex <span class="comment">// 4</span></div><div class="line">r.test(s) <span class="comment">// false</span></div><div class="line"></div><div class="line"><span class="comment">// 带有g修饰符时，可以通过正则对象的lastIndex属性指定开始搜索的位置</span></div><div class="line"><span class="comment">// 从字符串的第五个位置开始搜索，这个位置是没有字符的，所以返回false</span></div><div class="line"><span class="keyword">var</span> r = <span class="regexp">/x/g</span>;</div><div class="line"><span class="keyword">var</span> s = <span class="string">'_x_x'</span>;</div><div class="line"></div><div class="line">r.lastIndex = <span class="number">4</span>;</div><div class="line">r.test(s) <span class="comment">// false</span></div><div class="line"></div><div class="line"><span class="comment">// 如果正则模式是一个空字符串，则匹配所有字符串</span></div><div class="line"><span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">''</span>).test(<span class="string">'abc'</span>) <span class="comment">// true</span></div></pre></td></tr></table></figure>
<h2 id="RegExp-prototype-exec"><a href="#RegExp-prototype-exec" class="headerlink" title="RegExp.prototype.exec()"></a>RegExp.prototype.exec()</h2><p>正则实例对象的exec方法，用来返回匹配结果。如果发现匹配，就返回一个数组，成员是匹配成功的子字符串，否则返回null</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 正则对象r1匹配成功，返回一个数组，成员是匹配结果；正则对象r2匹配失败，返回null</span></div><div class="line"><span class="keyword">var</span> s = <span class="string">'_x_x'</span>;</div><div class="line"><span class="keyword">var</span> r1 = <span class="regexp">/x/</span>;</div><div class="line"><span class="keyword">var</span> r2 = <span class="regexp">/y/</span>;</div><div class="line"></div><div class="line">r1.exec(s) <span class="comment">// ["x"]</span></div><div class="line">r2.exec(s) <span class="comment">// null</span></div></pre></td></tr></table></figure>
<p>如果正则表示式包含圆括号，则返回的数组会包括多个成员</p>
<p>第一个成员是整个匹配成功的结果，后面的成员就是圆括号对应的匹配成功的组</p>
<p>第二个成员对应第一个括号,整个数组的length属性等于组匹配的数量再加1</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 第一个成员是整个匹配的结果，第二个成员是圆括号匹配的结果</div><div class="line">var s = <span class="string">'_x_x'</span>;</div><div class="line">var r = <span class="regexp">/_(x)/</span>;</div><div class="line"></div><div class="line">r.exec(s) <span class="regexp">//</span> [<span class="string">"_x"</span>, <span class="string">"x"</span>]</div></pre></td></tr></table></figure>
<p>exec方法的返回数组包含以下两个属性</p>
<ul>
<li>input：整个原字符串。</li>
<li>index：整个模式匹配成功的开始位置（从0开始计数）</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> index属性等于<span class="number">1</span>，是因为从原字符串的第二个位置开始匹配成功</div><div class="line">var r = <span class="regexp">/a(b+)a/</span>;</div><div class="line">var arr = r.exec(<span class="string">'_abbba_aba_'</span>);</div><div class="line"></div><div class="line">arr <span class="regexp">//</span> [<span class="string">"abbba"</span>, <span class="string">"bbb"</span>]</div><div class="line"></div><div class="line">arr.index <span class="regexp">//</span> <span class="number">1</span></div><div class="line">arr.input <span class="regexp">//</span> <span class="string">"_abbba_aba_"</span></div></pre></td></tr></table></figure>
<h1 id="字符串的实例方法"><a href="#字符串的实例方法" class="headerlink" title="字符串的实例方法"></a>字符串的实例方法</h1><p>字符串的实例方法之中，有4种与正则表达式有关</p>
<ul>
<li>String.prototype.match()：返回一个数组，成员是所有匹配的子字符串</li>
<li>String.prototype.search()：按照给定的正则表达式进行搜索，返回一个整数，表示匹配开始的位置</li>
<li>String.prototype.replace()：按照给定的正则表达式进行替换，返回替换后的字符串</li>
<li>String.prototype.split()：按照给定规则进行字符串分割，返回一个数组，包含分割后的各个成员</li>
</ul>
<h2 id="String-prototype-match"><a href="#String-prototype-match" class="headerlink" title="String.prototype.match()"></a>String.prototype.match()</h2><p>字符串实例对象的match方法对字符串进行正则匹配，返回匹配结果</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 字符串的match方法与正则对象的exec方法非常类似：匹配成功返回一个数组，匹配失败返回null</span></div><div class="line"><span class="keyword">var</span> s = <span class="string">'_x_x'</span>;</div><div class="line"><span class="keyword">var</span> r1 = <span class="regexp">/x/</span>;</div><div class="line"><span class="keyword">var</span> r2 = <span class="regexp">/y/</span>;</div><div class="line"></div><div class="line">s.match(r1) <span class="comment">// ["x"]</span></div><div class="line">s.match(r2) <span class="comment">// null</span></div><div class="line"></div><div class="line"><span class="comment">// 如果正则表达式带有g修饰符，则该方法与正则对象的exec方法行为不同，会一次性返回所有匹配成功的结果</span></div><div class="line"><span class="keyword">var</span> s = <span class="string">'abba'</span>;</div><div class="line"><span class="keyword">var</span> r = <span class="regexp">/a/g</span>;</div><div class="line"></div><div class="line">s.match(r) <span class="comment">// ["a", "a"]</span></div><div class="line">r.exec(s) <span class="comment">// ["a"]</span></div><div class="line"></div><div class="line"><span class="comment">// 设置正则表达式的lastIndex属性，对match方法无效，匹配总是从字符串的第一个字符开始</span></div><div class="line"><span class="keyword">var</span> r = <span class="regexp">/a|b/g</span>;</div><div class="line">r.lastIndex = <span class="number">7</span>;</div><div class="line"><span class="string">'xaxb'</span>.match(r) <span class="comment">// ['a', 'b']</span></div><div class="line">r.lastIndex <span class="comment">// 0</span></div></pre></td></tr></table></figure>
<h2 id="String-prototype-search"><a href="#String-prototype-search" class="headerlink" title="String.prototype.search()"></a>String.prototype.search()</h2><p>字符串对象的search方法，返回第一个满足条件的匹配结果在整个字符串中的位置。如果没有任何匹配，则返回-1</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 第一个匹配结果出现在字符串的<span class="number">1</span>号位置</div><div class="line"><span class="string">'_x_x'</span>.search(<span class="regexp">/x/</span>) <span class="regexp">//</span> <span class="number">1</span></div></pre></td></tr></table></figure>
<h2 id="String-prototype-replace"><a href="#String-prototype-replace" class="headerlink" title="String.prototype.replace()"></a>String.prototype.replace()</h2><p>字符串对象的replace方法可以替换匹配的值。它接受两个参数，第一个是正则表达式，表示搜索模式，第二个是替换的内容</p>
<p>正则表达式如果不加g修饰符，就替换第一个匹配成功的值，否则替换所有匹配成功的值</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 最后一个正则表达式使用了g修饰符，导致所有的b都被替换掉了</div><div class="line"><span class="string">'aaa'</span>.replace(<span class="string">'a'</span>, <span class="string">'b'</span>) <span class="regexp">//</span> <span class="string">"baa"</span></div><div class="line"><span class="string">'aaa'</span>.replace(<span class="regexp">/a/</span>, <span class="string">'b'</span>) <span class="regexp">//</span> <span class="string">"baa"</span></div><div class="line"><span class="string">'aaa'</span>.replace(<span class="regexp">/a/g</span>, <span class="string">'b'</span>) <span class="regexp">//</span> <span class="string">"bbb"</span></div><div class="line"></div><div class="line"><span class="regexp">//</span> replace方法的一个应用，就是消除字符串首尾两端的空格</div><div class="line">str.replace(<span class="regexp">/^\s+|\s+$/g</span>, <span class="string">''</span>) <span class="regexp">//</span> <span class="string">"#id div.class"</span></div></pre></td></tr></table></figure>
<p>replace方法的第二个参数可以使用美元符号$，用来指代所替换的内容</p>
<ul>
<li>$&amp;：匹配的子字符串</li>
<li>$`：匹配结果前面的文本</li>
<li>$’：匹配结果后面的文本</li>
<li>$n：匹配成功的第n组内容，n是从1开始的自然数</li>
<li>$$：指代美元符号$</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 第一个例子是将匹配的组互换位置，第二个例子是改写匹配的值</div><div class="line"><span class="string">'hello world'</span>.replace(<span class="regexp">/(\w+)\s(\w+)/</span>, <span class="string">'$2 $1'</span>)</div><div class="line"><span class="regexp">//</span> <span class="string">"world hello"</span></div><div class="line"></div><div class="line"><span class="string">'abc'</span>.replace(<span class="string">'b'</span>, <span class="string">'[$`-$&amp;-$\']'</span>)</div><div class="line"><span class="regexp">//</span> <span class="string">"a[a-b-c]c"</span></div></pre></td></tr></table></figure>
<h2 id="String-prototype-split"><a href="#String-prototype-split" class="headerlink" title="String.prototype.split()"></a>String.prototype.split()</h2><p>字符串对象的split方法按照正则规则分割字符串，返回一个由分割后的各个部分组成的数组</p>
<p>该方法接受两个参数，第一个参数是正则表达式，表示分隔规则，第二个参数是返回数组的最大成员数</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 上面代码使用正则表达式，去除了子字符串的逗号后面的空格</div><div class="line"><span class="regexp">//</span> 非正则分隔</div><div class="line"><span class="string">'a,  b,c, d'</span>.split(<span class="string">','</span>)</div><div class="line"><span class="regexp">//</span> [ <span class="string">'a'</span>, <span class="string">'  b'</span>, <span class="string">'c'</span>, <span class="string">' d'</span> ]</div><div class="line"></div><div class="line"><span class="regexp">//</span> 正则分隔，去除多余的空格</div><div class="line"><span class="string">'a,  b,c, d'</span>.split(<span class="regexp">/, */</span>)</div><div class="line"><span class="regexp">//</span> [ <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span> ]</div><div class="line"></div><div class="line"><span class="regexp">//</span> 指定返回数组的最大成员</div><div class="line"><span class="string">'a,  b,c, d'</span>.split(<span class="regexp">/, */</span>, <span class="number">2</span>)</div><div class="line">[ <span class="string">'a'</span>, <span class="string">'b'</span> ]</div></pre></td></tr></table></figure>
<h1 id="匹配规则"><a href="#匹配规则" class="headerlink" title="匹配规则"></a>匹配规则</h1><h2 id="字面量字符和元字符"><a href="#字面量字符和元字符" class="headerlink" title="字面量字符和元字符"></a>字面量字符和元字符</h2><p>大部分字符在正则表达式中，就是字面的含义，比如/a/匹配a，/b/匹配b</p>
<p>某个字符只表示它字面的含义（就像前面的a和b），那么它们就叫做“字面量字符”</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 正则表达式的dog，就是字面量字符，所以<span class="regexp">/dog/</span>匹配old dog，因为它就表示d、o、g三个字母连在一起</div><div class="line"><span class="regexp">/dog/</span>.test(<span class="string">'old dog'</span>) <span class="regexp">//</span> true</div></pre></td></tr></table></figure>
<p>一部分字符有特殊含义，不代表字面的意思。它们叫做“元字符”</p>
<h3 id="点字符（"><a href="#点字符（" class="headerlink" title="点字符（.)"></a>点字符（.)</h3><p>点字符（.）匹配除回车（\r）、换行(\n) 、行分隔符（\u2028）和段分隔符（\u2029）以外的所有字符</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// <span class="keyword">c</span>.t匹配<span class="keyword">c</span>和t之间包含任意一个字符的情况，只要这三个字符在同一行，比如cat、<span class="keyword">c</span><span class="number">2</span>t、<span class="keyword">c</span>-t等等，但是不匹配coot</div><div class="line">/<span class="keyword">c</span>.t/</div></pre></td></tr></table></figure>
<h3 id="位置字符"><a href="#位置字符" class="headerlink" title="位置字符"></a>位置字符</h3><p>位置字符用来提示字符所处的位置，主要有两个字符</p>
<ul>
<li>^表示字符串的开始位置</li>
<li>$表示字符串的结束位置</li>
</ul>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// test必须出现在开始位置</span></div><div class="line">/^<span class="keyword">test</span>/.<span class="keyword">test</span>('test123') <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="comment">// test必须出现在结束位置</span></div><div class="line">/<span class="keyword">test</span>$/.<span class="keyword">test</span>('new <span class="keyword">test</span>') <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="comment">// 从开始位置到结束位置只有test</span></div><div class="line">/^<span class="keyword">test</span>$/.<span class="keyword">test</span>('<span class="keyword">test</span>') <span class="comment">// true</span></div><div class="line">/^<span class="keyword">test</span>$/.<span class="keyword">test</span>('<span class="keyword">test</span> <span class="keyword">test</span>') <span class="comment">// false</span></div></pre></td></tr></table></figure>
<h3 id="选择符（-）"><a href="#选择符（-）" class="headerlink" title="选择符（|）"></a>选择符（|）</h3><p>竖线符号（|）在正则表达式中表示“或关系”（OR），即cat|dog表示匹配cat或dog</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 正则表达式指定必须匹配11或22</span></div><div class="line">/<span class="number">11</span>|<span class="number">22</span>/.test('<span class="number">911</span>') <span class="comment">// true</span></div></pre></td></tr></table></figure>
<h2 id="转义符"><a href="#转义符" class="headerlink" title="转义符"></a>转义符</h2><p>正则表达式中那些有特殊含义的元字符，如果要匹配它们本身，就需要在它们前面要加上反斜杠。比如要匹配+，就要写成+</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 第一个正则表达式之所以不匹配，因为加号是元字符，不代表自身</span></div><div class="line"><span class="comment">// 第二个正则表达式使用反斜杠对加号转义，就能匹配成功</span></div><div class="line">/<span class="number">1</span>+<span class="number">1</span>/.test('<span class="number">1</span>+<span class="number">1</span>')</div><div class="line"><span class="comment">// false</span></div><div class="line"></div><div class="line">/<span class="number">1</span>\+<span class="number">1</span>/.test('<span class="number">1</span>+<span class="number">1</span>')</div><div class="line"><span class="comment">// true</span></div></pre></td></tr></table></figure>
<h2 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h2><ul>
<li>\cX 表示Ctrl-[X]，其中的X是A-Z之中任一个英文字母，用来匹配控制字符</li>
<li>[\b] 匹配退格键(U+0008)，不要与\b混淆</li>
<li>\n 匹配换行键</li>
<li>\r 匹配回车键</li>
<li>\t 匹配制表符 tab（U+0009）</li>
<li>\v 匹配垂直制表符（U+000B）</li>
<li>\f 匹配换页符（U+000C）</li>
<li>\0 匹配null字符（U+0000）</li>
<li>\xhh 匹配一个以两位十六进制数（\x00-\xFF）表示的字符</li>
<li>\uhhhh 匹配一个以四位十六进制数（\u0000-\uFFFF）表示的 Unicode 字符</li>
</ul>
<h2 id="字符类"><a href="#字符类" class="headerlink" title="字符类"></a>字符类</h2><p>字符类（class）表示有一系列字符可供选择，只要匹配其中一个就可以了</p>
<p>所有可供选择的字符都放在方括号内，比如[xyz] 表示x、y、z之中任选一个匹配</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 字符串hello world不包含a、b、c这三个字母中的任一个，所以返回false；字符串apple包含字母a，所以返回true</span></div><div class="line"><span class="regexp">/[abc]/</span>.test(<span class="string">'hello world'</span>) <span class="comment">// false</span></div><div class="line"><span class="regexp">/[abc]/</span>.test(<span class="string">'apple'</span>) <span class="comment">// true</span></div></pre></td></tr></table></figure>
<h3 id="脱字符（-）"><a href="#脱字符（-）" class="headerlink" title="脱字符（^）"></a>脱字符（^）</h3><p>如果方括号内的第一个字符是[^]，则表示除了字符类之中的字符，其他字符都可以匹配</p>
<p>比如，[^xyz]表示除了x、y、z之外都可以匹配</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 字符串hello world不包含字母a、b、c中的任一个，所以返回true；字符串bbc不包含a、b、c以外的字母，所以返回false</span></div><div class="line"><span class="regexp">/[^abc]/</span>.test(<span class="string">'hello world'</span>) <span class="comment">// true</span></div><div class="line"><span class="regexp">/[^abc]/</span>.test(<span class="string">'bbc'</span>) <span class="comment">// false</span></div></pre></td></tr></table></figure>
<p>如果方括号内没有其他字符，即只有[^]，就表示匹配一切字符，其中包括换行符</p>
<p>相比之下，点号作为元字符（.）是不包括换行符的</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 字符串s含有一个换行符，点号不包括换行符，所以第一个正则表达式匹配失败</span></div><div class="line"><span class="comment">// 第二个正则表达式[^]包含一切字符，所以匹配成功</span></div><div class="line">var s = <span class="string">'Please yes\nmake my day!'</span>;</div><div class="line"></div><div class="line">s.<span class="built_in">match</span>(/yes.*<span class="built_in">day</span>/) <span class="comment">// null</span></div><div class="line">s.<span class="built_in">match</span>(/yes[^]*<span class="built_in">day</span>/) <span class="comment">// [ 'yes\nmake my day']</span></div></pre></td></tr></table></figure>
<h3 id="连字符（-）"><a href="#连字符（-）" class="headerlink" title="连字符（-）"></a>连字符（-）</h3><p>某些情况下，对于连续序列的字符，连字符（-）用来提供简写形式，表示字符的连续范围</p>
<p>比如，[abc]可以写成[a-c]，[0123456789]可以写成[0-9]，同理[A-Z]表示26个大写字母</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 当连字号（dash）不出现在方括号之中，就不具备简写的作用，只代表字面的含义，所以不匹配字符b</div><div class="line"><span class="regexp">//</span> 只有当连字号用在方括号之中，才表示连续的字符序列</div><div class="line"><span class="regexp">/a-z/</span>.test(<span class="string">'b'</span>) <span class="regexp">//</span> false</div><div class="line"><span class="regexp">/[a-z]/</span>.test(<span class="string">'b'</span>) <span class="regexp">//</span> true</div></pre></td></tr></table></figure>
<p>合法的字符类简写形式</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[<span class="number">0</span><span class="number">-9.</span>,]</div><div class="line">[<span class="number">0</span><span class="number">-9</span>a-fA-F]</div><div class="line">[a-zA-Z0<span class="number">-9</span>-]</div></pre></td></tr></table></figure>
<h2 id="预定义模式"><a href="#预定义模式" class="headerlink" title="预定义模式"></a>预定义模式</h2><p>预定义模式指的是某些常见模式的简写方式</p>
<ul>
<li>\d 匹配0-9之间的任一数字，相当于[0-9]</li>
<li>\D 匹配所有0-9以外的字符，相当于[^0-9]</li>
<li>\w 匹配任意的字母、数字和下划线，相当于[A-Za-z0-9_]</li>
<li>\W 除所有字母、数字和下划线以外的字符，相当于[^A-Za-z0-9_]</li>
<li>\s 匹配空格（包括换行符、制表符、空格符等），相等于[ \t\r\n\v\f]</li>
<li>\S 匹配非空格的字符，相当于[^ \t\r\n\v\f]</li>
<li>\b 匹配词的边界</li>
<li>\B 匹配非词边界，即在词的内部</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> \s表示空格，所以匹配结果会包括空格</div><div class="line"><span class="regexp">//</span> \b表示词的边界，所以world的词首必须独立（词尾是否独立未指定），才会匹配</div><div class="line"><span class="regexp">//</span> 同理，\B表示非词的边界，只有world的词首不独立，才会匹配</div><div class="line"><span class="regexp">//</span> \s 的例子</div><div class="line"><span class="regexp">/\s\w*/</span>.exec(<span class="string">'hello world'</span>) <span class="regexp">//</span> [<span class="string">" world"</span>]</div><div class="line"></div><div class="line"><span class="regexp">//</span> \b 的例子</div><div class="line"><span class="regexp">/\bworld/</span>.test(<span class="string">'hello world'</span>) <span class="regexp">//</span> true</div><div class="line"><span class="regexp">/\bworld/</span>.test(<span class="string">'hello-world'</span>) <span class="regexp">//</span> true</div><div class="line"><span class="regexp">/\bworld/</span>.test(<span class="string">'helloworld'</span>) <span class="regexp">//</span> false</div><div class="line"></div><div class="line"><span class="regexp">//</span> \B 的例子</div><div class="line"><span class="regexp">/\Bworld/</span>.test(<span class="string">'hello-world'</span>) <span class="regexp">//</span> false</div><div class="line"><span class="regexp">/\Bworld/</span>.test(<span class="string">'helloworld'</span>) <span class="regexp">//</span> true</div></pre></td></tr></table></figure>
<h2 id="重复类"><a href="#重复类" class="headerlink" title="重复类"></a>重复类</h2><p>模式的精确匹配次数，使用大括号（{}）表示</p>
<p>{n}表示恰好重复n次，{n,}表示至少重复n次，{n,m}表示重复不少于n次，不多于m次</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 第一个模式指定o连续出现<span class="number">2</span>次，第二个模式指定o连续出现<span class="number">2</span>次到<span class="number">5</span>次之间</div><div class="line"><span class="regexp">/lo&#123;2&#125;k/</span>.test(<span class="string">'look'</span>) <span class="regexp">//</span> true</div><div class="line"><span class="regexp">/lo&#123;2,5&#125;k/</span>.test(<span class="string">'looook'</span>) <span class="regexp">//</span> true</div></pre></td></tr></table></figure>
<h2 id="量词符"><a href="#量词符" class="headerlink" title="量词符"></a>量词符</h2><p>量词符用来设定某个模式出现的次数</p>
<ul>
<li>?问号表示某个模式出现0次或1次，等同于{0, 1}</li>
<li>*星号表示某个模式出现0次或多次，等同于{0,}</li>
<li>+加号表示某个模式出现1次或多次，等同于{1,}</li>
</ul>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// t 出现0次或1次</span></div><div class="line">/t?<span class="keyword">est</span>/.<span class="keyword">test</span>('<span class="keyword">test</span>') <span class="comment">// true</span></div><div class="line">/t?<span class="keyword">est</span>/.<span class="keyword">test</span>('<span class="keyword">est</span>') <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="comment">// t 出现1次或多次</span></div><div class="line">/t+<span class="keyword">est</span>/.<span class="keyword">test</span>('<span class="keyword">test</span>') <span class="comment">// true</span></div><div class="line">/t+<span class="keyword">est</span>/.<span class="keyword">test</span>('<span class="keyword">ttest</span>') <span class="comment">// true</span></div><div class="line">/t+<span class="keyword">est</span>/.<span class="keyword">test</span>('<span class="keyword">est</span>') <span class="comment">// false</span></div><div class="line"></div><div class="line"><span class="comment">// t 出现0次或多次</span></div><div class="line">/t*<span class="keyword">est</span>/.<span class="keyword">test</span>('<span class="keyword">test</span>') <span class="comment">// true</span></div><div class="line">/t*<span class="keyword">est</span>/.<span class="keyword">test</span>('<span class="keyword">ttest</span>') <span class="comment">// true</span></div><div class="line">/t*<span class="keyword">est</span>/.<span class="keyword">test</span>('tttest') <span class="comment">// true</span></div><div class="line">/t*<span class="keyword">est</span>/.<span class="keyword">test</span>('<span class="keyword">est</span>') <span class="comment">// true</span></div></pre></td></tr></table></figure>
<h2 id="贪婪模式"><a href="#贪婪模式" class="headerlink" title="贪婪模式"></a>贪婪模式</h2><p>量词符，默认情况下都是最大可能匹配，即匹配直到下一个字符不满足匹配规则为止。这被称为贪婪模式</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 默认是贪婪模式，会一直匹配到字符a不出现为止，所以匹配结果是3个a</span></div><div class="line">var s = <span class="string">'aaa'</span>;</div><div class="line">s.match<span class="comment">(/a+/)</span> <span class="comment">// ["aaa"]</span></div><div class="line"></div><div class="line"><span class="comment">// 贪婪模式改为非贪婪模式，可以在量词符后面加一个问号</span></div><div class="line">var s = <span class="string">'aaa'</span>;</div><div class="line">s.match<span class="comment">(/a+?/)</span> <span class="comment">// ["a"]</span></div></pre></td></tr></table></figure>
<ul>
<li>*?：表示某个模式出现0次或多次，匹配时采用非贪婪模式</li>
<li>+?：表示某个模式出现1次或多次，匹配时采用非贪婪模式</li>
</ul>
<h2 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h2><p>修饰符（modifier）表示模式的附加规则，放在正则模式的最尾部</p>
<p>修饰符可以单个使用，也可以多个一起使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 单个修饰符</span></div><div class="line"><span class="keyword">var</span> regex = <span class="regexp">/test/i</span>;</div><div class="line"></div><div class="line"><span class="comment">// 多个修饰符</span></div><div class="line"><span class="keyword">var</span> regex = <span class="regexp">/test/ig</span>;</div></pre></td></tr></table></figure>
<h3 id="g-修饰符"><a href="#g-修饰符" class="headerlink" title="g 修饰符"></a>g 修饰符</h3><p>默认情况下，第一次匹配成功后，正则对象就停止向下匹配了</p>
<p>g修饰符表示全局匹配（global），加上它以后，正则对象将匹配全部符合条件的结果，主要用于搜索和替换</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 正则模式不含g修饰符，每次都是从字符串头部开始匹配</span></div><div class="line"><span class="comment">// 连续做了三次匹配，都返回true</span></div><div class="line">var regex = /b/;</div><div class="line">var <span class="keyword">str</span> = <span class="string">'abba'</span>;</div><div class="line"></div><div class="line">regex.test(<span class="keyword">str</span>); <span class="comment">// true</span></div><div class="line">regex.test(<span class="keyword">str</span>); <span class="comment">// true</span></div><div class="line">regex.test(<span class="keyword">str</span>); <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="comment">// 正则模式含有g修饰符，每次都是从上一次匹配成功处，开始向后匹配</span></div><div class="line"><span class="comment">// 因为字符串abba只有两个b，所以前两次匹配结果为true，第三次匹配结果为false</span></div><div class="line">var regex = /b/g;</div><div class="line">var <span class="keyword">str</span> = <span class="string">'abba'</span>;</div><div class="line"></div><div class="line">regex.test(<span class="keyword">str</span>); <span class="comment">// true</span></div><div class="line">regex.test(<span class="keyword">str</span>); <span class="comment">// true</span></div><div class="line">regex.test(<span class="keyword">str</span>); <span class="comment">// false</span></div></pre></td></tr></table></figure>
<h3 id="i-修饰符"><a href="#i-修饰符" class="headerlink" title="i 修饰符"></a>i 修饰符</h3><p>默认情况下，正则对象区分字母的大小写，加上i修饰符以后表示忽略大小写</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 加了i修饰符以后，不考虑大小写，所以模式abc匹配字符串ABC</div><div class="line"><span class="regexp">/abc/</span>.test(<span class="string">'ABC'</span>) <span class="regexp">//</span> false</div><div class="line"><span class="regexp">/abc/i</span>.test(<span class="string">'ABC'</span>) <span class="regexp">//</span> true</div></pre></td></tr></table></figure>
<h3 id="m-修饰符"><a href="#m-修饰符" class="headerlink" title="m 修饰符"></a>m 修饰符</h3><p>m修饰符表示多行模式（multiline），会修改^和$的行为</p>
<p>默认情况下（即不加m修饰符时），^和$匹配字符串的开始处和结尾处</p>
<p>加上m修饰符以后，^和$还会匹配行首和行尾，即^和$会识别换行符（\n）</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 字符串结尾处有一个换行符。如果不加m修饰符，匹配不成功，因为字符串的结尾不是world</div><div class="line"><span class="regexp">//</span> 加上以后，$可以匹配行尾</div><div class="line"><span class="regexp">/world$/</span>.test(<span class="string">'hello world\n'</span>) <span class="regexp">//</span> false</div><div class="line"><span class="regexp">/world$/m</span>.test(<span class="string">'hello world\n'</span>) <span class="regexp">//</span> true</div><div class="line"></div><div class="line"><span class="regexp">//</span> 匹配行首的b，如果不加m修饰符，就相当于b只能处在字符串的开始处</div><div class="line"><span class="regexp">//</span> 加上b修饰符以后，换行符\n也会被认为是一行的开始</div><div class="line"><span class="regexp">/^b/m</span>.test(<span class="string">'a\nb'</span>) <span class="regexp">//</span> true</div></pre></td></tr></table></figure>
<h2 id="组匹配"><a href="#组匹配" class="headerlink" title="组匹配"></a>组匹配</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>正则表达式的括号表示分组匹配，括号中的模式可以用来匹配分组的内容</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 第一个模式没有括号，结果+只表示重复字母d，第二个模式有括号，结果+就表示匹配fred这个词</div><div class="line"><span class="regexp">/fred+/</span>.test(<span class="string">'fredd'</span>) <span class="regexp">//</span> true</div><div class="line"><span class="regexp">/(fred)+/</span>.test(<span class="string">'fredfred'</span>) <span class="regexp">//</span> true</div></pre></td></tr></table></figure>
<p>分组捕获</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 正则表达式<span class="regexp">/(.)b(.)/</span>一共使用两个括号，第一个括号捕获a，第二个括号捕获c</div><div class="line"><span class="regexp">//</span> 使用组匹配时，不宜同时使用g修饰符，否则match方法不会捕获分组的内容</div><div class="line">var m = <span class="string">'abcabc'</span>.match(<span class="regexp">/(.)b(.)/</span>);</div><div class="line">m <span class="regexp">//</span> [<span class="string">'abc'</span>, <span class="string">'a'</span>, <span class="string">'c'</span>]</div><div class="line"></div><div class="line"><span class="regexp">//</span> 使用带g修饰符的正则表达式，结果match方法只捕获了匹配整个表达式的部分</div><div class="line"><span class="regexp">//</span> 这时必须使用正则表达式的exec方法，配合循环，才能读到每一轮匹配的组捕获</div><div class="line">var m = <span class="string">'abcabc'</span>.match(<span class="regexp">/(.)b(.)/g</span>);</div><div class="line">m <span class="regexp">//</span> [<span class="string">'abc'</span>, <span class="string">'abc'</span>]</div></pre></td></tr></table></figure>
<h3 id="非捕获组"><a href="#非捕获组" class="headerlink" title="非捕获组"></a>非捕获组</h3><p>(?:x)称为非捕获组（Non-capturing group），表示不返回该组匹配的内容，即匹配的结果中不计入这个括号</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 一共使用了两个括号。其中第一个括号是非捕获组，所以最后返回的结果中没有第一个括号，只有第二个括号匹配的内容</div><div class="line">var m = <span class="string">'abc'</span>.match(<span class="regexp">/(?:.)b(.)/</span>);</div><div class="line">m <span class="regexp">//</span> [<span class="string">"abc"</span>, <span class="string">"c"</span>]</div></pre></td></tr></table></figure>
<h3 id="先行断言"><a href="#先行断言" class="headerlink" title="先行断言"></a>先行断言</h3><p>x(?=y)称为先行断言（Positive look-ahead），x只有在y前面才匹配，y不会被计入返回结果</p>
<p>要匹配后面跟着百分号的数字，可以写成/\d+(?=%)/</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> b在c前面所以被匹配，但是括号对应的c不会被返回</div><div class="line">var m = <span class="string">'abc'</span>.match(<span class="regexp">/b(?=c)/</span>);</div><div class="line">m <span class="regexp">//</span> [<span class="string">"b"</span>]</div></pre></td></tr></table></figure>
<h3 id="先行否定断言"><a href="#先行否定断言" class="headerlink" title="先行否定断言"></a>先行否定断言</h3><p>x(?!y)称为先行否定断言（Negative look-ahead），x只有不在y前面才匹配，y不会被计入返回结果</p>
<p>比如，要匹配后面跟的不是百分号的数字，就要写成/\d+(?!%)/</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 只有不在小数点前面的数字才会被匹配，因此返回的结果就是<span class="number">14</span></div><div class="line"><span class="regexp">//</span> “先行否定断言”中，括号里的部分是不会返回的</div><div class="line"><span class="regexp">/\d+(?!\.)/</span>.exec(<span class="string">'3.14'</span>)</div><div class="line"><span class="regexp">//</span> [<span class="string">"14"</span>]</div><div class="line"></div><div class="line"><span class="regexp">//</span> b不在c前面所以被匹配，而且括号对应的d不会被返回</div><div class="line">var m = <span class="string">'abd'</span>.match(<span class="regexp">/b(?!c)/</span>);</div><div class="line">m <span class="regexp">//</span> [<span class="string">'b'</span>]</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;正则表达式简介&quot;&gt;&lt;a href=&quot;#正则表达式简介&quot; class=&quot;headerlink&quot; title=&quot;正则表达式简介&quot;&gt;&lt;/a&gt;正则表达式简介&lt;/h1&gt;&lt;p&gt;正则表达式使用单个字符串来描述、匹配一系列符合某个句法规则的字符串&lt;br&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://yoursite.com/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>【实战】React调色板</title>
    <link href="http://yoursite.com/2018/08/03/2018.8.3/"/>
    <id>http://yoursite.com/2018/08/03/2018.8.3/</id>
    <published>2018-08-03T15:16:41.000Z</published>
    <updated>2018-09-24T10:30:15.109Z</updated>
    
    <content type="html"><![CDATA[<h1 id="我在生"><a href="#我在生" class="headerlink" title="我在生"></a>我在生</h1>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;我在生&quot;&gt;&lt;a href=&quot;#我在生&quot; class=&quot;headerlink&quot; title=&quot;我在生&quot;&gt;&lt;/a&gt;我在生&lt;/h1&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://yoursite.com/categories/JavaScript/"/>
    
    
      <category term="React" scheme="http://yoursite.com/tags/React/"/>
    
  </entry>
  
  <entry>
    <title>【总结】2018年7月份个人总结</title>
    <link href="http://yoursite.com/2018/07/31/2018.7summary/"/>
    <id>http://yoursite.com/2018/07/31/2018.7summary/</id>
    <published>2018-07-31T15:40:15.000Z</published>
    <updated>2018-07-30T13:54:35.234Z</updated>
    
    <content type="html"><![CDATA[<p>人生何必如初见,但求两看相不厌</p>
<p>7月份的工作量总体还好。总算熬过了醉人的6月。开始有了大块头的个人时间,恰好可以好好地重构以前做的项目<br><a id="more"></a><br>接触了node.js及php,遇到了几个坑爹的bug,然后一一解决对后端有了进一步的了解及学习</p>
<p>希望以后有机会可以接触实际新项目,因为，我真切地感受到了，有实际项目练手确实比自己瞎折腾快上十倍都不算夸张</p>
<p>益达的同学来广州找我玩,非常好的大学同学,毕业以后，我再也没有如此地敞开心扉想啥说啥，也再也没有如此的和弦而谈</p>
<p>学编程就和炒菜一样,着急是大忌,总之,心态放好,精前端,后端node、php(我一直把它俩)也能燥起来,用心做好任务,技术总会成长起来</p>
<p>学了MVC设计模式,现在写组件都是用MVC模块化,写代码分模块分得有点666,有点膨胀,感觉只要有时间都可以自己写个小框架出来</p>
<p>最好的教育是每天通过学习，保持自己“陶醉于卓越”的激情</p>
<p>学习一门技术、手艺、语言是非常好的自我教育，它有难度，但进步又可测，它需要你有规律重复，容易形成学习的条件反射</p>
<p>卓越，即有领先他人的欲望，即有今天的我比昨天我更好的欲望，这样的我是停不下来</p>
<h1 id="学习"><a href="#学习" class="headerlink" title="学习"></a>学习</h1><p>JavaScript: 重新复习了原生的基础,看《JavaScript设计模式》,尝试用MVC思想写组件</p>
<p>模块化: 使用闭包、立即执行函数、CMD、Common.js、ES6模块化思想重写常用的组件,并对模块化的封装思想对一步心得体会</p>
<p>ES6: 总结了常用语法,将语法用到实际项目上,进一步领悟ES6的语法糖,新增Class、模块化、Promise、箭头函数真是赞到爆</p>
<p>React.js: 深入React开发实际项目,学习React Router及Redux,方便的组件化及JSX语法,webapck打包走起项目</p>
<p>PHP: 学习了PHP的面向对象语法及MySQL数据库的基本操作</p>
<p>Node.js: 将Node.js的文档啃了一遍,语法基本上手没啥难度,再学习其它模块,再下个月争取用到实际项目</p>
<p>专利: 专利法、相关法、实务看书背知识点,下个月开始看视频总结考试点</p>
<p>易语言: 看完基础语法及常用插件,so easy,基本上和js对bom操作即鼠标和键盘的控制思维差不多,争取下个月开发出大冒险的游戏脚本</p>
<p>英语: 48个音标、1500个常用生活词</p>
<p>运维: 重新看完linux、git、vim文档</p>
<p>产品: 学习精益产品探索、互联网产品思维</p>
<p>网络: 趁着现在还不算特别特别忙，好好抓紧时间学习薄弱的网络知识,看完《计算机网络》、《HTTP图解》</p>
<h1 id="工作"><a href="#工作" class="headerlink" title="工作"></a>工作</h1><p>1.海尔小家电运营平台订单管理发布上线并修bug</p>
<p>2.海尔设计易项目增加图片懒加载组件并修bug</p>
<p>3.运维四台服务器的每月报账及合同申请、企业邮箱续费</p>
<h1 id="生活"><a href="#生活" class="headerlink" title="生活"></a>生活</h1><p>1.学会素描人物</p>
<p>2.写字帖、夜跑半个钟</p>
<p>3.与之前后端同事在东晓南小区游泳,叙叙旧,这小子进步挺大,已经拿到好offer</p>
<p>4.第一次做西红柿焖牛腩,全凭手感,所以尝试失败,贼难吃</p>
<p>5.这个月每天都11点半之前睡,早上6点30起来复习,脸状态还没调回来,毕竟之前1年的生物钟绕的乱乱得,不过再没便秘倒是真</p>
<p>6.清远的小伙伴月初来找我讨要java学习路线,现回自学java</p>
<p>7.到清远找小伙伴看他进度,每天都在高效学,已做了个管家婆的后台系统,正在争取10月份到广州找java工作</p>
<p>8.惊叹下,同学他亲妹95年的,一个有梦想努力的女孩,自己在清远开了美容店并买了房和车,真的是年轻要多想并去实现</p>
<p>9.今年我也要开始落实之前转行时满满的计划,希望明年我的计划能落实并有成就,先不立flag,很容易打脸</p>
<p>10.学会蛙泳,还不会换气,这个月游了4次</p>
<p>11.认识海尔更多的同事,与几位聊得很好并经常吃饭,新来的运维已经加入~</p>
<p>12.与买家部同事一起去厦滘打了次篮球,好久没碰这玩意</p>
<p>13.家里房子第三层已经建起来,┭┮﹏┭┮赶紧</p>
<p>14.去表哥家烧烤,烤炉果然是个好东西</p>
<p>15.图书馆跑了几次,感觉书有点少,日后把学习时间多留在家</p>
<h1 id="阅读"><a href="#阅读" class="headerlink" title="阅读"></a>阅读</h1><h2 id="书籍"><a href="#书籍" class="headerlink" title="书籍"></a>书籍</h2><p>《JavaScript设计模式》100%,《Node.js实战 中文版》100%、《unix编程艺术》100%、《深入浅出Node.js》100%、《黑客与画家(中文版)》100%、《计算机网络》100%、《HTTP图解》100%、《ES6标准入门（第二版）》100%、《高性能网站建设指南》10%</p>
<h2 id="电影"><a href="#电影" class="headerlink" title="电影"></a>电影</h2><p>《我不是药神》、《超时空同居》、《三个大傻》、《零秒出手》</p>
<h2 id="音频"><a href="#音频" class="headerlink" title="音频"></a>音频</h2><p>这个月手机摔了,心塞</p>
<h1 id="绩效评估"><a href="#绩效评估" class="headerlink" title="绩效评估"></a>绩效评估</h1><table>
<thead>
<tr>
<th>学习</th>
<th>工作</th>
<th>生活</th>
<th>阅读</th>
<th>总分</th>
</tr>
</thead>
<tbody>
<tr>
<td>8</td>
<td>5</td>
<td>9</td>
<td>8</td>
<td>30</td>
</tr>
</tbody>
</table>
<h1 id="计划"><a href="#计划" class="headerlink" title="计划"></a>计划</h1><p>PHP、React完成至少一个实际项目</p>
<p>重构新将前端组件MVC思想</p>
<p>工作也许会很忙，但学习时间是自己挤出来的，但求不要再虚度年华</p>
<p>看操作系统、计算机网络、数据结构与算法相关的书籍,准备走精前端偏后端的路线，所以非常有必要回归到编程软实力的沉淀</p>
<p>好好发展第三兴趣爱好，让生活充实多彩起来，不让自己老那么无聊到老怀旧叹息徒增负面情绪</p>
<p>这个月有个知识变现的计划,希望能不让我失望,加油吧,少年</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;人生何必如初见,但求两看相不厌&lt;/p&gt;
&lt;p&gt;7月份的工作量总体还好。总算熬过了醉人的6月。开始有了大块头的个人时间,恰好可以好好地重构以前做的项目&lt;br&gt;
    
    </summary>
    
      <category term="lifes" scheme="http://yoursite.com/categories/lifes/"/>
    
    
      <category term="个人总结" scheme="http://yoursite.com/tags/%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>PHP数据库</title>
    <link href="http://yoursite.com/2018/07/28/2018.7.28/"/>
    <id>http://yoursite.com/2018/07/28/2018.7.28/</id>
    <published>2018-07-28T15:16:41.000Z</published>
    <updated>2018-08-08T15:28:17.812Z</updated>
    
    <content type="html"><![CDATA[<h1 id="PHP-MySQL-简介"><a href="#PHP-MySQL-简介" class="headerlink" title="PHP MySQL 简介"></a>PHP MySQL 简介</h1><a id="more"></a>
<p>PHP 与 MySQL 结合是跨平台的</p>
<h2 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h2><p>通过 MySQL，我们可以向数据库查询具体的信息，并得到返回的记录集</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 语句 set names utf8;用于设定数据库编码，让中文可以正常显示</span></div><div class="line"><span class="comment">// 选取了 "websites" 表中 "name" 列的所有数据</span></div><div class="line"></div><div class="line">mysql&gt; set names utf8;</div><div class="line"><span class="section">mysql&gt; SELECT name FROM websites;</span></div><div class="line">+---------------+</div><div class="line"><span class="section">| name          |</span></div><div class="line">+---------------+</div><div class="line">| Google        |</div><div class="line">| 淘宝        |</div><div class="line">| 菜鸟教程  |</div><div class="line">| 微博        |</div><div class="line">| Facebook      |</div><div class="line"><span class="section">| stackoverflow |</span></div><div class="line">+---------------+</div><div class="line">6 rows in set (0.00 sec)</div></pre></td></tr></table></figure>
<h1 id="PHP-连接-MySQL"><a href="#PHP-连接-MySQL" class="headerlink" title="PHP 连接 MySQL"></a>PHP 连接 MySQL</h1><p>PHP 5 及以上版本建议使用以下方式连接 MySQL</p>
<ul>
<li>MySQLi extension (“i” 意为 improved)</li>
<li>PDO (PHP Data Objects)</li>
</ul>
<h2 id="MySQLi-和-PDO"><a href="#MySQLi-和-PDO" class="headerlink" title="MySQLi 和 PDO"></a>MySQLi 和 PDO</h2><p>项目需要在多种数据库中切换，建议使用 PDO ，只需要修改连接字符串和部分查询语句即可</p>
<p>使用 MySQLi, 如果不同数据库，需要重新编写所有代码，包括查询</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">// 连接MySQLi((面向对象)</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$servername = <span class="string">"localhost"</span>;</div><div class="line">$username = <span class="string">"root"</span>;</div><div class="line">$password = <span class="string">""</span>;</div><div class="line"> </div><div class="line"><span class="comment">// 创建连接</span></div><div class="line">$conn = <span class="keyword">new</span> mysqli($servername, $username, $password);</div><div class="line"> </div><div class="line"><span class="comment">// 检测连接</span></div><div class="line"><span class="keyword">if</span> ($conn-&gt;connect_error) &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . $conn-&gt;connect_error);</div><div class="line">&#125; </div><div class="line"><span class="keyword">echo</span> <span class="string">"连接成功"</span>;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">// 连接MySQLi((面向过程)</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$servername = <span class="string">"localhost"</span>;</div><div class="line">$username = <span class="string">"username"</span>;</div><div class="line">$password = <span class="string">"password"</span>;</div><div class="line"> </div><div class="line"><span class="comment">// 创建连接</span></div><div class="line">$conn = mysqli_connect($servername, $username, $password);</div><div class="line"> </div><div class="line"><span class="comment">// 检测连接</span></div><div class="line"><span class="keyword">if</span> (!$conn) &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">"Connection failed: "</span> . mysqli_connect_error());</div><div class="line">&#125;</div><div class="line"><span class="keyword">echo</span> <span class="string">"连接成功"</span>;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">// POD连接数据库</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$servername = <span class="string">"localhost"</span>;</div><div class="line">$username = <span class="string">"username"</span>;</div><div class="line">$password = <span class="string">"password"</span>;</div><div class="line"> </div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername;"</span>, $username, $password);</div><div class="line">    <span class="keyword">echo</span> <span class="string">"连接成功"</span>; </div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span>(PDOException $e)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">echo</span> $e-&gt;getMessage();</div><div class="line">&#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h2 id="关闭连接"><a href="#关闭连接" class="headerlink" title="关闭连接"></a>关闭连接</h2><figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// MySQLi - 面向对象</span></div><div class="line"><span class="meta"><span class="meta-keyword">$conn</span>-&gt;close();</span></div><div class="line"></div><div class="line"><span class="comment">// MySQLi - 面向过程</span></div><div class="line">mysqli_close(<span class="symbol">$</span>conn);</div><div class="line"></div><div class="line"><span class="comment">// PDO</span></div><div class="line"><span class="meta"><span class="meta-keyword">$conn</span> = null;</span></div></pre></td></tr></table></figure>
<h1 id="PHP-MySQL-创建数据库"><a href="#PHP-MySQL-创建数据库" class="headerlink" title="PHP MySQL 创建数据库"></a>PHP MySQL 创建数据库</h1><h2 id="使用-MySQLi-和-PDO-创建-MySQL-数据库"><a href="#使用-MySQLi-和-PDO-创建-MySQL-数据库" class="headerlink" title="使用 MySQLi 和 PDO 创建 MySQL 数据库"></a>使用 MySQLi 和 PDO 创建 MySQL 数据库</h2><p>CREATE DATABASE 语句用于在 MySQL 中创建数据库</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line">// MySQLi - 面向对象</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$servername = <span class="string">"localhost"</span>;</div><div class="line">$username = <span class="string">"username"</span>;</div><div class="line">$password = <span class="string">"password"</span>;</div><div class="line"> </div><div class="line"><span class="comment">// 创建连接</span></div><div class="line">$conn = <span class="keyword">new</span> mysqli($servername, $username, $password);</div><div class="line"><span class="comment">// 检测连接</span></div><div class="line"><span class="keyword">if</span> ($conn-&gt;connect_error) &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . $conn-&gt;connect_error);</div><div class="line">&#125; </div><div class="line"> </div><div class="line"><span class="comment">// 创建数据库</span></div><div class="line">$sql = <span class="string">"CREATE DATABASE myDB"</span>;</div><div class="line"><span class="keyword">if</span> ($conn-&gt;query($sql) === <span class="keyword">TRUE</span>) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"数据库创建成功"</span>;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"Error creating database: "</span> . $conn-&gt;error;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">$conn-&gt;close();</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">// MySQLi - 面向过程</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$servername = <span class="string">"localhost"</span>;</div><div class="line">$username = <span class="string">"username"</span>;</div><div class="line">$password = <span class="string">"password"</span>;</div><div class="line"> </div><div class="line"><span class="comment">// 创建连接</span></div><div class="line">$conn = mysqli_connect($servername, $username, $password);</div><div class="line"><span class="comment">// 检测连接</span></div><div class="line"><span class="keyword">if</span> (!$conn) &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . mysqli_connect_error());</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="comment">// 创建数据库</span></div><div class="line">$sql = <span class="string">"CREATE DATABASE myDB"</span>;</div><div class="line"><span class="keyword">if</span> (mysqli_query($conn, $sql)) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"数据库创建成功"</span>;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"Error creating database: "</span> . mysqli_error($conn);</div><div class="line">&#125;</div><div class="line"> </div><div class="line">mysqli_close($conn);</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">// 使用 PDO</div><div class="line"><span class="php"><span class="meta">&lt;?php</span> </span></div><div class="line">$servername = <span class="string">"localhost"</span>; </div><div class="line">$username = <span class="string">"username"</span>; </div><div class="line">$password = <span class="string">"password"</span>; </div><div class="line"></div><div class="line"><span class="keyword">try</span> &#123; </div><div class="line">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername"</span>, $username, $password); </div><div class="line"></div><div class="line">    <span class="comment">// 设置 PDO 错误模式为异常 </span></div><div class="line">    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); </div><div class="line">    $sql = <span class="string">"CREATE DATABASE myDBPDO"</span>; </div><div class="line"></div><div class="line">    <span class="comment">// 使用 exec() ，因为没有结果返回 </span></div><div class="line">    $conn-&gt;exec($sql); </div><div class="line"></div><div class="line">    <span class="keyword">echo</span> <span class="string">"数据库创建成功&lt;br&gt;"</span>; </div><div class="line">&#125; </div><div class="line"><span class="keyword">catch</span>(PDOException $e) </div><div class="line">&#123; </div><div class="line">    <span class="keyword">echo</span> $sql . <span class="string">"&lt;br&gt;"</span> . $e-&gt;getMessage(); </div><div class="line">&#125; </div><div class="line"></div><div class="line">$conn = <span class="keyword">null</span>; </div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h1 id="PHP-创建-MySQL-表"><a href="#PHP-创建-MySQL-表" class="headerlink" title="PHP 创建 MySQL 表"></a>PHP 创建 MySQL 表</h1><p>一个数据表有一个唯一名称，并有行和列组成</p>
<h2 id="使用-MySQLi-和-PDO-创建-MySQL-表"><a href="#使用-MySQLi-和-PDO-创建-MySQL-表" class="headerlink" title="使用 MySQLi 和 PDO 创建 MySQL 表"></a>使用 MySQLi 和 PDO 创建 MySQL 表</h2><p>CREATE TABLE 语句用于创建 MySQL 表</p>
<p>创建表前，我们需要使用 use myDB 来选择要操作的数据库</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div></pre></td><td class="code"><pre><div class="line">// MySQLi - 面向对象</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$servername = <span class="string">"localhost"</span>;</div><div class="line">$username = <span class="string">"username"</span>;</div><div class="line">$password = <span class="string">"password"</span>;</div><div class="line">$dbname = <span class="string">"myDB"</span>;</div><div class="line"></div><div class="line"><span class="comment">// 创建连接</span></div><div class="line">$conn = <span class="keyword">new</span> mysqli($servername, $username, $password, $dbname);</div><div class="line"><span class="comment">// 检测连接</span></div><div class="line"><span class="keyword">if</span> ($conn-&gt;connect_error) &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . $conn-&gt;connect_error);</div><div class="line">&#125; </div><div class="line"></div><div class="line"><span class="comment">// 使用 sql 创建数据表</span></div><div class="line">$sql = <span class="string">"CREATE TABLE MyGuests (</span></div><div class="line">id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY, </div><div class="line">firstname VARCHAR(30) NOT NULL,</div><div class="line">lastname VARCHAR(30) NOT NULL,</div><div class="line">email VARCHAR(50),</div><div class="line">reg_date TIMESTAMP</div><div class="line">)";</div><div class="line"></div><div class="line"><span class="keyword">if</span> ($conn-&gt;query($sql) === <span class="keyword">TRUE</span>) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"Table MyGuests created successfully"</span>;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"创建数据表错误: "</span> . $conn-&gt;error;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$conn-&gt;close();</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">// MySQLi - 面向过程</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$servername = <span class="string">"localhost"</span>;</div><div class="line">$username = <span class="string">"username"</span>;</div><div class="line">$password = <span class="string">"password"</span>;</div><div class="line">$dbname = <span class="string">"myDB"</span>;</div><div class="line"></div><div class="line"><span class="comment">// 创建连接</span></div><div class="line">$conn = mysqli_connect($servername, $username, $password, $dbname);</div><div class="line"><span class="comment">// 检测连接</span></div><div class="line"><span class="keyword">if</span> (!$conn) &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . mysqli_connect_error());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 使用 sql 创建数据表</span></div><div class="line">$sql = <span class="string">"CREATE TABLE MyGuests (</span></div><div class="line">id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY, </div><div class="line">firstname VARCHAR(30) NOT NULL,</div><div class="line">lastname VARCHAR(30) NOT NULL,</div><div class="line">email VARCHAR(50),</div><div class="line">reg_date TIMESTAMP</div><div class="line">)";</div><div class="line"></div><div class="line"><span class="keyword">if</span> (mysqli_query($conn, $sql)) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"数据表 MyGuests 创建成功"</span>;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"创建数据表错误: "</span> . mysqli_error($conn);</div><div class="line">&#125;</div><div class="line"></div><div class="line">mysqli_close($conn);</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">// PDO</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$servername = <span class="string">"localhost"</span>;</div><div class="line">$username = <span class="string">"username"</span>;</div><div class="line">$password = <span class="string">"password"</span>;</div><div class="line">$dbname = <span class="string">"myDBPDO"</span>;</div><div class="line"></div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername;dbname=$dbname"</span>, $username, $password);</div><div class="line">    <span class="comment">// 设置 PDO 错误模式，用于抛出异常</span></div><div class="line">    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</div><div class="line"></div><div class="line">    <span class="comment">// 使用 sql 创建数据表</span></div><div class="line">    $sql = <span class="string">"CREATE TABLE MyGuests (</span></div><div class="line">    id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY, </div><div class="line">    firstname VARCHAR(30) NOT NULL,</div><div class="line">    lastname VARCHAR(30) NOT NULL,</div><div class="line">    email VARCHAR(50),</div><div class="line">    reg_date TIMESTAMP</div><div class="line">    )";</div><div class="line"></div><div class="line">    <span class="comment">// 使用 exec() ，没有结果返回 </span></div><div class="line">    $conn-&gt;exec($sql);</div><div class="line">    <span class="keyword">echo</span> <span class="string">"数据表 MyGuests 创建成功"</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span>(PDOException $e)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">echo</span> $sql . <span class="string">"&lt;br&gt;"</span> . $e-&gt;getMessage();</div><div class="line">&#125;</div><div class="line"></div><div class="line">$conn = <span class="keyword">null</span>;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h1 id="PHP-MySQL-插入数据"><a href="#PHP-MySQL-插入数据" class="headerlink" title="PHP MySQL 插入数据"></a>PHP MySQL 插入数据</h1><p>在创建完数据库和表后，我们可以向表中添加数据</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line">// MySQLi - 面向对象</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$servername = <span class="string">"localhost"</span>;</div><div class="line">$username = <span class="string">"username"</span>;</div><div class="line">$password = <span class="string">"password"</span>;</div><div class="line">$dbname = <span class="string">"myDB"</span>;</div><div class="line"></div><div class="line"><span class="comment">// 创建连接</span></div><div class="line">$conn = <span class="keyword">new</span> mysqli($servername, $username, $password, $dbname);</div><div class="line"><span class="comment">// 检测连接</span></div><div class="line"><span class="keyword">if</span> ($conn-&gt;connect_error) &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . $conn-&gt;connect_error);</div><div class="line">&#125; </div><div class="line"></div><div class="line">$sql = <span class="string">"INSERT INTO MyGuests (firstname, lastname, email)</span></div><div class="line">VALUES ('John', 'Doe', 'john@example.com')";</div><div class="line"></div><div class="line"><span class="keyword">if</span> ($conn-&gt;query($sql) === <span class="keyword">TRUE</span>) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"Error: "</span> . $sql . <span class="string">"&lt;br&gt;"</span> . $conn-&gt;error;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$conn-&gt;close();</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">// MySQLi - 面向过程</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$servername = <span class="string">"localhost"</span>;</div><div class="line">$username = <span class="string">"username"</span>;</div><div class="line">$password = <span class="string">"password"</span>;</div><div class="line">$dbname = <span class="string">"myDB"</span>;</div><div class="line"></div><div class="line"><span class="comment">// 创建连接</span></div><div class="line">$conn = mysqli_connect($servername, $username, $password, $dbname);</div><div class="line"><span class="comment">// 检测连接</span></div><div class="line"><span class="keyword">if</span> (!$conn) &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">"Connection failed: "</span> . mysqli_connect_error());</div><div class="line">&#125;</div><div class="line"></div><div class="line">$sql = <span class="string">"INSERT INTO MyGuests (firstname, lastname, email)</span></div><div class="line">VALUES ('John', 'Doe', 'john@example.com')";</div><div class="line"></div><div class="line"><span class="keyword">if</span> (mysqli_query($conn, $sql)) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"Error: "</span> . $sql . <span class="string">"&lt;br&gt;"</span> . mysqli_error($conn);</div><div class="line">&#125;</div><div class="line"></div><div class="line">mysqli_close($conn);</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">// PDO</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$servername = <span class="string">"localhost"</span>;</div><div class="line">$username = <span class="string">"username"</span>;</div><div class="line">$password = <span class="string">"password"</span>;</div><div class="line">$dbname = <span class="string">"myDBPDO"</span>;</div><div class="line"></div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername;dbname=$dbname"</span>, $username, $password);</div><div class="line">    <span class="comment">// 设置 PDO 错误模式，用于抛出异常</span></div><div class="line">    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</div><div class="line">    $sql = <span class="string">"INSERT INTO MyGuests (firstname, lastname, email)</span></div><div class="line">    VALUES ('John', 'Doe', 'john@example.com')";</div><div class="line">    <span class="comment">// 使用 exec() ，没有结果返回 </span></div><div class="line">    $conn-&gt;exec($sql);</div><div class="line">    <span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span>(PDOException $e)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">echo</span> $sql . <span class="string">"&lt;br&gt;"</span> . $e-&gt;getMessage();</div><div class="line">&#125;</div><div class="line"></div><div class="line">$conn = <span class="keyword">null</span>;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h1 id="PHP-MySQL插入多条数据"><a href="#PHP-MySQL插入多条数据" class="headerlink" title="PHP MySQL插入多条数据"></a>PHP MySQL插入多条数据</h1><h2 id="使用-MySQLi-和-PDO-向-MySQL-插入多条数据"><a href="#使用-MySQLi-和-PDO-向-MySQL-插入多条数据" class="headerlink" title="使用 MySQLi 和 PDO 向 MySQL 插入多条数据"></a>使用 MySQLi 和 PDO 向 MySQL 插入多条数据</h2><p>mysqli_multi_query() 函数可用来执行多条SQL语句</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line">// MySQLi - 面向对象</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$servername = <span class="string">"localhost"</span>;</div><div class="line">$username = <span class="string">"username"</span>;</div><div class="line">$password = <span class="string">"password"</span>;</div><div class="line">$dbname = <span class="string">"myDB"</span>;</div><div class="line"> </div><div class="line"><span class="comment">// 创建链接</span></div><div class="line">$conn = <span class="keyword">new</span> mysqli($servername, $username, $password, $dbname);</div><div class="line"><span class="comment">// 检查链接</span></div><div class="line"><span class="keyword">if</span> ($conn-&gt;connect_error) &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . $conn-&gt;connect_error);</div><div class="line">&#125; </div><div class="line"> </div><div class="line">$sql = <span class="string">"INSERT INTO MyGuests (firstname, lastname, email)</span></div><div class="line">VALUES ('John', 'Doe', 'john@example.com');";</div><div class="line">$sql .= <span class="string">"INSERT INTO MyGuests (firstname, lastname, email)</span></div><div class="line">VALUES ('Mary', 'Moe', 'mary@example.com');";</div><div class="line">$sql .= <span class="string">"INSERT INTO MyGuests (firstname, lastname, email)</span></div><div class="line">VALUES ('Julie', 'Dooley', 'julie@example.com')";</div><div class="line"> </div><div class="line"><span class="keyword">if</span> ($conn-&gt;multi_query($sql) === <span class="keyword">TRUE</span>) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"Error: "</span> . $sql . <span class="string">"&lt;br&gt;"</span> . $conn-&gt;error;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">$conn-&gt;close();</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">// MySQLi - 面向过程</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$servername = <span class="string">"localhost"</span>;</div><div class="line">$username = <span class="string">"username"</span>;</div><div class="line">$password = <span class="string">"password"</span>;</div><div class="line">$dbname = <span class="string">"myDB"</span>;</div><div class="line"> </div><div class="line"><span class="comment">// 创建链接</span></div><div class="line">$conn = mysqli_connect($servername, $username, $password, $dbname);</div><div class="line"><span class="comment">// 检查链接</span></div><div class="line"><span class="keyword">if</span> (!$conn) &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . mysqli_connect_error());</div><div class="line">&#125;</div><div class="line"> </div><div class="line">$sql = <span class="string">"INSERT INTO MyGuests (firstname, lastname, email)</span></div><div class="line">VALUES ('John', 'Doe', 'john@example.com');";</div><div class="line">$sql .= <span class="string">"INSERT INTO MyGuests (firstname, lastname, email)</span></div><div class="line">VALUES ('Mary', 'Moe', 'mary@example.com');";</div><div class="line">$sql .= <span class="string">"INSERT INTO MyGuests (firstname, lastname, email)</span></div><div class="line">VALUES ('Julie', 'Dooley', 'julie@example.com')";</div><div class="line"> </div><div class="line"><span class="keyword">if</span> (mysqli_multi_query($conn, $sql)) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"Error: "</span> . $sql . <span class="string">"&lt;br&gt;"</span> . mysqli_error($conn);</div><div class="line">&#125;</div><div class="line"> </div><div class="line">mysqli_close($conn);</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">// PDO</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$servername = <span class="string">"localhost"</span>;</div><div class="line">$username = <span class="string">"username"</span>;</div><div class="line">$password = <span class="string">"password"</span>;</div><div class="line">$dbname = <span class="string">"myDBPDO"</span>;</div><div class="line"> </div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername;dbname=$dbname"</span>, $username, $password);</div><div class="line">    <span class="comment">// set the PDO error mode to exception</span></div><div class="line">    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</div><div class="line"> </div><div class="line">    <span class="comment">// 开始事务</span></div><div class="line">    $conn-&gt;beginTransaction();</div><div class="line">    <span class="comment">// SQL 语句</span></div><div class="line">    $conn-&gt;exec(<span class="string">"INSERT INTO MyGuests (firstname, lastname, email) </span></div><div class="line">    VALUES ('John', 'Doe', 'john@example.com')");</div><div class="line">    $conn-&gt;exec(<span class="string">"INSERT INTO MyGuests (firstname, lastname, email) </span></div><div class="line">    VALUES ('Mary', 'Moe', 'mary@example.com')");</div><div class="line">    $conn-&gt;exec(<span class="string">"INSERT INTO MyGuests (firstname, lastname, email) </span></div><div class="line">    VALUES ('Julie', 'Dooley', 'julie@example.com')");</div><div class="line"> </div><div class="line">    <span class="comment">// 提交事务</span></div><div class="line">    $conn-&gt;commit();</div><div class="line">    <span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span>(PDOException $e)</div><div class="line">&#123;</div><div class="line">    <span class="comment">// 如果执行失败回滚</span></div><div class="line">    $conn-&gt;rollback();</div><div class="line">    <span class="keyword">echo</span> $sql . <span class="string">"&lt;br&gt;"</span> . $e-&gt;getMessage();</div><div class="line">&#125;</div><div class="line"> </div><div class="line">$conn = <span class="keyword">null</span>;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h1 id="PHP-MySQL-预处理语句"><a href="#PHP-MySQL-预处理语句" class="headerlink" title="PHP MySQL 预处理语句"></a>PHP MySQL 预处理语句</h1><p>预处理语句对于防止 MySQL 注入是非常有用</p>
<ul>
<li>预处理：创建 SQL 语句模板并发送到数据库。预留的值使用参数 “?” 标记 </li>
<li>数据库解析，编译，对SQL语句模板执行查询优化，并存储结果不输出</li>
<li>执行：最后，将应用绑定的值传递给参数（”?” 标记），数据库执行语句。应用可以多次执行语句，如果参数的值不一样</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line">//  MySQLi 中使用了预处理语句，并绑定了相应的参数</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$servername = <span class="string">"localhost"</span>;</div><div class="line">$username = <span class="string">"username"</span>;</div><div class="line">$password = <span class="string">"password"</span>;</div><div class="line">$dbname = <span class="string">"myDB"</span>;</div><div class="line"> </div><div class="line"><span class="comment">// 创建连接</span></div><div class="line">$conn = <span class="keyword">new</span> mysqli($servername, $username, $password, $dbname);</div><div class="line"> </div><div class="line"><span class="comment">// 检测连接</span></div><div class="line"><span class="keyword">if</span> ($conn-&gt;connect_error) &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . $conn-&gt;connect_error);</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="comment">// 预处理及绑定</span></div><div class="line">$stmt = $conn-&gt;prepare(<span class="string">"INSERT INTO MyGuests (firstname, lastname, email) VALUES (?, ?, ?)"</span>);</div><div class="line">$stmt-&gt;bind_param(<span class="string">"sss"</span>, $firstname, $lastname, $email);</div><div class="line"> </div><div class="line"><span class="comment">// 设置参数并执行</span></div><div class="line">$firstname = <span class="string">"John"</span>;</div><div class="line">$lastname = <span class="string">"Doe"</span>;</div><div class="line">$email = <span class="string">"john@example.com"</span>;</div><div class="line">$stmt-&gt;execute();</div><div class="line"> </div><div class="line">$firstname = <span class="string">"Mary"</span>;</div><div class="line">$lastname = <span class="string">"Moe"</span>;</div><div class="line">$email = <span class="string">"mary@example.com"</span>;</div><div class="line">$stmt-&gt;execute();</div><div class="line"> </div><div class="line">$firstname = <span class="string">"Julie"</span>;</div><div class="line">$lastname = <span class="string">"Dooley"</span>;</div><div class="line">$email = <span class="string">"julie@example.com"</span>;</div><div class="line">$stmt-&gt;execute();</div><div class="line"> </div><div class="line"><span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</div><div class="line"> </div><div class="line">$stmt-&gt;close();</div><div class="line">$conn-&gt;close();</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">// PDO 中的预处理语句</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$servername = <span class="string">"localhost"</span>;</div><div class="line">$username = <span class="string">"username"</span>;</div><div class="line">$password = <span class="string">"password"</span>;</div><div class="line">$dbname = <span class="string">"myDBPDO"</span>;</div><div class="line"> </div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername;dbname=$dbname"</span>, $username, $password);</div><div class="line">    <span class="comment">// 设置 PDO 错误模式为异常</span></div><div class="line">    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</div><div class="line"> </div><div class="line">    <span class="comment">// 预处理 SQL 并绑定参数</span></div><div class="line">    $stmt = $conn-&gt;prepare(<span class="string">"INSERT INTO MyGuests (firstname, lastname, email) </span></div><div class="line">    VALUES (:firstname, :lastname, :email)");</div><div class="line">    $stmt-&gt;bindParam(<span class="string">':firstname'</span>, $firstname);</div><div class="line">    $stmt-&gt;bindParam(<span class="string">':lastname'</span>, $lastname);</div><div class="line">    $stmt-&gt;bindParam(<span class="string">':email'</span>, $email);</div><div class="line"> </div><div class="line">    <span class="comment">// 插入行</span></div><div class="line">    $firstname = <span class="string">"John"</span>;</div><div class="line">    $lastname = <span class="string">"Doe"</span>;</div><div class="line">    $email = <span class="string">"john@example.com"</span>;</div><div class="line">    $stmt-&gt;execute();</div><div class="line"> </div><div class="line">    <span class="comment">// 插入其他行</span></div><div class="line">    $firstname = <span class="string">"Mary"</span>;</div><div class="line">    $lastname = <span class="string">"Moe"</span>;</div><div class="line">    $email = <span class="string">"mary@example.com"</span>;</div><div class="line">    $stmt-&gt;execute();</div><div class="line"> </div><div class="line">    <span class="comment">// 插入其他行</span></div><div class="line">    $firstname = <span class="string">"Julie"</span>;</div><div class="line">    $lastname = <span class="string">"Dooley"</span>;</div><div class="line">    $email = <span class="string">"julie@example.com"</span>;</div><div class="line">    $stmt-&gt;execute();</div><div class="line"> </div><div class="line">    <span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span>(PDOException $e)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"Error: "</span> . $e-&gt;getMessage();</div><div class="line">&#125;</div><div class="line">$conn = <span class="keyword">null</span>;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h1 id="PHP-MySQL-读取数据"><a href="#PHP-MySQL-读取数据" class="headerlink" title="PHP MySQL 读取数据"></a>PHP MySQL 读取数据</h1><p>SQL 语句从 MyGuests数据表中读取 id, firstname 和 lastname 三个字段</p>
<p>使用SQL 语句从数据库中取出结果集并赋给复制给变量 $result</p>
<p>函数 num_rows() 判断返回的数据</p>
<p>返回的是多条数据，函数 fetch_assoc() 将结合集放入到关联数组并循环输出。 while() 循环出结果集，并输出 id, firstname 和 lastname 三个字段值</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line">// MySQLi - 面向过程</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$servername = <span class="string">"localhost"</span>;</div><div class="line">$username = <span class="string">"username"</span>;</div><div class="line">$password = <span class="string">"password"</span>;</div><div class="line">$dbname = <span class="string">"myDB"</span>;</div><div class="line"> </div><div class="line"><span class="comment">// 创建连接</span></div><div class="line">$conn = mysqli_connect($servername, $username, $password, $dbname);</div><div class="line"><span class="comment">// Check connection</span></div><div class="line"><span class="keyword">if</span> (!$conn) &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . mysqli_connect_error());</div><div class="line">&#125;</div><div class="line"> </div><div class="line">$sql = <span class="string">"SELECT id, firstname, lastname FROM MyGuests"</span>;</div><div class="line">$result = mysqli_query($conn, $sql);</div><div class="line"> </div><div class="line"><span class="keyword">if</span> (mysqli_num_rows($result) &gt; <span class="number">0</span>) &#123;</div><div class="line">    <span class="comment">// 输出数据</span></div><div class="line">    <span class="keyword">while</span>($row = mysqli_fetch_assoc($result)) &#123;</div><div class="line">        <span class="keyword">echo</span> <span class="string">"id: "</span> . $row[<span class="string">"id"</span>]. <span class="string">" - Name: "</span> . $row[<span class="string">"firstname"</span>]. <span class="string">" "</span> . $row[<span class="string">"lastname"</span>]. <span class="string">"&lt;br&gt;"</span>;</div><div class="line">    &#125;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"0 结果"</span>;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">mysqli_close($conn);</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">// 使用 PDO (+ 预处理)</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;table style='border: solid 1px black;'&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;tr&gt;&lt;th&gt;Id&lt;/th&gt;&lt;th&gt;Firstname&lt;/th&gt;&lt;th&gt;Lastname&lt;/th&gt;&lt;/tr&gt;"</span>;</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TableRows</span> <span class="keyword">extends</span> <span class="title">RecursiveIteratorIterator</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($it)</span> </span>&#123; </div><div class="line">        <span class="keyword">parent</span>::__construct($it, <span class="keyword">self</span>::LEAVES_ONLY); </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">current</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"&lt;td style='width:150px;border:1px solid black;'&gt;"</span> . <span class="keyword">parent</span>::current(). <span class="string">"&lt;/td&gt;"</span>;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">beginChildren</span><span class="params">()</span> </span>&#123; </div><div class="line">        <span class="keyword">echo</span> <span class="string">"&lt;tr&gt;"</span>; </div><div class="line">    &#125; </div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">endChildren</span><span class="params">()</span> </span>&#123; </div><div class="line">        <span class="keyword">echo</span> <span class="string">"&lt;/tr&gt;"</span> . <span class="string">"\n"</span>;</div><div class="line">    &#125; </div><div class="line">&#125; </div><div class="line"> </div><div class="line">$servername = <span class="string">"localhost"</span>;</div><div class="line">$username = <span class="string">"username"</span>;</div><div class="line">$password = <span class="string">"password"</span>;</div><div class="line">$dbname = <span class="string">"myDBPDO"</span>;</div><div class="line"> </div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername;dbname=$dbname"</span>, $username, $password);</div><div class="line">    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</div><div class="line">    $stmt = $conn-&gt;prepare(<span class="string">"SELECT id, firstname, lastname FROM MyGuests"</span>); </div><div class="line">    $stmt-&gt;execute();</div><div class="line"> </div><div class="line">    <span class="comment">// 设置结果集为关联数组</span></div><div class="line">    $result = $stmt-&gt;setFetchMode(PDO::FETCH_ASSOC); </div><div class="line">    <span class="keyword">foreach</span>(<span class="keyword">new</span> TableRows(<span class="keyword">new</span> RecursiveArrayIterator($stmt-&gt;fetchAll())) <span class="keyword">as</span> $k=&gt;$v) &#123; </div><div class="line">        <span class="keyword">echo</span> $v;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span>(PDOException $e) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"Error: "</span> . $e-&gt;getMessage();</div><div class="line">&#125;</div><div class="line">$conn = <span class="keyword">null</span>;</div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;/table&gt;"</span>;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h1 id="PHP-MySQL-Where-子句"><a href="#PHP-MySQL-Where-子句" class="headerlink" title="PHP MySQL Where 子句"></a>PHP MySQL Where 子句</h1><p>WHERE 子句用于过滤记录</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 从 "Persons" 表中选取所有 FirstName='Peter' 的行</span></div><div class="line"><span class="meta">&lt;?php</span></div><div class="line">$con=mysqli_connect(<span class="string">"localhost"</span>,<span class="string">"username"</span>,<span class="string">"password"</span>,<span class="string">"database"</span>);</div><div class="line"><span class="comment">// 检测连接</span></div><div class="line"><span class="keyword">if</span> (mysqli_connect_errno())</div><div class="line">&#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"连接失败: "</span> . mysqli_connect_error();</div><div class="line">&#125;</div><div class="line"></div><div class="line">$result = mysqli_query($con,<span class="string">"SELECT * FROM Persons</span></div><div class="line">WHERE FirstName='Peter'");</div><div class="line"></div><div class="line"><span class="keyword">while</span>($row = mysqli_fetch_array($result))</div><div class="line">&#123;</div><div class="line">    <span class="keyword">echo</span> $row[<span class="string">'FirstName'</span>] . <span class="string">" "</span> . $row[<span class="string">'LastName'</span>];</div><div class="line">    <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line">&#125;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line"><span class="comment">// 输出</span></div><div class="line">Peter Griffin</div></pre></td></tr></table></figure>
<h1 id="PHP-MySQL-Order-By-关键词"><a href="#PHP-MySQL-Order-By-关键词" class="headerlink" title="PHP MySQL Order By 关键词"></a>PHP MySQL Order By 关键词</h1><p>ORDER BY 关键词用于对记录集中的数据进行排序</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 选取 "Persons" 表中存储的所有数据，并根据 "Age" 列对结果进行排序</span></div><div class="line"><span class="meta">&lt;?php</span></div><div class="line">$con=mysqli_connect(<span class="string">"localhost"</span>,<span class="string">"username"</span>,<span class="string">"password"</span>,<span class="string">"database"</span>);</div><div class="line"><span class="comment">// 检测连接</span></div><div class="line"><span class="keyword">if</span> (mysqli_connect_errno())</div><div class="line">&#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"连接失败: "</span> . mysqli_connect_error();</div><div class="line">&#125;</div><div class="line"></div><div class="line">$result = mysqli_query($con,<span class="string">"SELECT * FROM Persons ORDER BY age"</span>);</div><div class="line"></div><div class="line"><span class="keyword">while</span>($row = mysqli_fetch_array($result))</div><div class="line">&#123;</div><div class="line">    <span class="keyword">echo</span> $row[<span class="string">'FirstName'</span>];</div><div class="line">    <span class="keyword">echo</span> <span class="string">" "</span> . $row[<span class="string">'LastName'</span>];</div><div class="line">    <span class="keyword">echo</span> <span class="string">" "</span> . $row[<span class="string">'Age'</span>];</div><div class="line">    <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">mysqli_close($con);</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line"><span class="comment">// 输出</span></div><div class="line">Glenn Quagmire <span class="number">33</span></div><div class="line">Peter Griffin <span class="number">35</span></div></pre></td></tr></table></figure>
<h1 id="PHP-MySQL-Update"><a href="#PHP-MySQL-Update" class="headerlink" title="PHP MySQL Update"></a>PHP MySQL Update</h1><p>UPDATE 语句用于中修改数据库表中的数据</p>
<p>创建了一个名为 “Persons” 的表</p>
<table>
<thead>
<tr>
<th>FirstName</th>
<th>LastName</th>
<th>Age</th>
</tr>
</thead>
<tbody>
<tr>
<td>Peter</td>
<td>Griffin</td>
<td>35</td>
</tr>
<tr>
<td>Glenn</td>
<td>Quagmire</td>
<td>33</td>
</tr>
</tbody>
</table>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">// 更新 "Persons" 表的一些数据</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$con=mysqli_connect(<span class="string">"localhost"</span>,<span class="string">"username"</span>,<span class="string">"password"</span>,<span class="string">"database"</span>);</div><div class="line"><span class="comment">// 检测连接</span></div><div class="line"><span class="keyword">if</span> (mysqli_connect_errno())</div><div class="line">&#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"连接失败: "</span> . mysqli_connect_error();</div><div class="line">&#125;</div><div class="line"></div><div class="line">mysqli_query($con,<span class="string">"UPDATE Persons SET Age=36</span></div><div class="line">WHERE FirstName='Peter' AND LastName='Griffin'");</div><div class="line"></div><div class="line">mysqli_close($con);</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>更新后，”Persons” 表</p>
<table>
<thead>
<tr>
<th>FirstName</th>
<th>LastName</th>
<th>Age</th>
</tr>
</thead>
<tbody>
<tr>
<td>Peter</td>
<td>Griffin</td>
<td>36</td>
</tr>
<tr>
<td>Glenn</td>
<td>Quagmire</td>
<td>33</td>
</tr>
</tbody>
</table>
<h1 id="PHP-MySQL-Delete"><a href="#PHP-MySQL-Delete" class="headerlink" title="PHP MySQL Delete"></a>PHP MySQL Delete</h1><p>DELETE 语句用于从数据库表中删除行</p>
<p>创建了一个名为 “Persons” 的表</p>
<table>
<thead>
<tr>
<th>FirstName</th>
<th>LastName</th>
<th>Age</th>
</tr>
</thead>
<tbody>
<tr>
<td>Peter</td>
<td>Griffin</td>
<td>35</td>
</tr>
<tr>
<td>Glenn</td>
<td>Quagmire</td>
<td>33</td>
</tr>
</tbody>
</table>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">// 删除 <span class="string">"Persons"</span> 表中所有 LastName='Griffin' 的记录</div><div class="line">&lt;?php</div><div class="line">$con=mysqli_connect(<span class="string">"localhost"</span>,<span class="string">"username"</span>,<span class="string">"password"</span>,<span class="string">"database"</span>);</div><div class="line">// 检测连接</div><div class="line">if (mysqli_connect_errno())</div><div class="line">&#123;</div><div class="line">    echo <span class="string">"连接失败: "</span> . mysqli_connect_error();</div><div class="line">&#125;</div><div class="line"></div><div class="line">mysqli_query($con,<span class="string">"<span class="keyword">DELETE</span> FROM Persons WHERE LastName='Griffin'"</span>);</div><div class="line"></div><div class="line">mysqli_close($con);</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>在这次删除后，”Persons” 表如下</p>
<table>
<thead>
<tr>
<th>FirstName</th>
<th>LastName</th>
<th>Age</th>
</tr>
</thead>
<tbody>
<tr>
<td>Glenn</td>
<td>Quagmire</td>
<td>33</td>
</tr>
</tbody>
</table>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;PHP-MySQL-简介&quot;&gt;&lt;a href=&quot;#PHP-MySQL-简介&quot; class=&quot;headerlink&quot; title=&quot;PHP MySQL 简介&quot;&gt;&lt;/a&gt;PHP MySQL 简介&lt;/h1&gt;
    
    </summary>
    
      <category term="BackEnd" scheme="http://yoursite.com/categories/BackEnd/"/>
    
    
      <category term="PHP" scheme="http://yoursite.com/tags/PHP/"/>
    
      <category term="MySQL" scheme="http://yoursite.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQL数据库</title>
    <link href="http://yoursite.com/2018/07/25/2018.7.25/"/>
    <id>http://yoursite.com/2018/07/25/2018.7.25/</id>
    <published>2018-07-25T15:16:41.000Z</published>
    <updated>2018-08-04T03:26:21.356Z</updated>
    
    <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><h2 id="数据库简介"><a href="#数据库简介" class="headerlink" title="数据库简介"></a>数据库简介</h2><p>数据库是按照数据结构来组织、存储和管理数据的<br><a id="more"></a></p>
<h2 id="RDBMS术语"><a href="#RDBMS术语" class="headerlink" title="RDBMS术语"></a>RDBMS术语</h2><p>关系型数据库管理系统（RDBMS）来存储和管理的大数据量</p>
<ul>
<li>数据库: 数据库是一些关联表的集合</li>
<li>数据表: 表是数据的矩阵。在一个数据库中的表看起来像一个简单的电子表格</li>
<li>列: 一列(数据元素) 包含了相同的数据, 例如邮政编码的数据</li>
<li>行：一行（=元组，或记录）是一组相关的数据，例如一条用户订阅的数据</li>
<li>冗余：存储两倍数据，冗余降低了性能，但提高了数据的安全性</li>
<li>主键：主键是唯一的。一个数据表中只能包含一个主键。你可以使用主键来查询数据</li>
<li>外键：外键用于关联两个表</li>
<li>复合键：复合键（组合键）将多个列作为一个索引键，一般用于复合索引</li>
<li>索引：使用索引可快速访问数据库表中的特定信息。索引是对数据库表中一列或多列的值进行排序的一种结构。类似于书籍的目录</li>
<li>参照完整性: 参照的完整性要求关系中不允许引用不存在的实体。与实体完整性是关系模型必须满足的完整性约束条件，目的是保证数据的一致性</li>
</ul>
<h1 id="管理"><a href="#管理" class="headerlink" title="管理"></a>管理</h1><h2 id="安装MySQL"><a href="#安装MySQL" class="headerlink" title="安装MySQL"></a>安装MySQL</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql <span class="keyword">install</span></div></pre></td></tr></table></figure>
<h2 id="启动及关闭MySQL服务"><a href="#启动及关闭MySQL服务" class="headerlink" title="启动及关闭MySQL服务"></a>启动及关闭MySQL服务</h2><figure class="highlight dos"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">net</span> <span class="built_in">start</span> mysql</div><div class="line"><span class="built_in">net</span> stop mysql</div></pre></td></tr></table></figure>
<h2 id="初始化data目录"><a href="#初始化data目录" class="headerlink" title="初始化data目录"></a>初始化data目录</h2><figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqld <span class="comment">--initialize-insecure</span></div></pre></td></tr></table></figure>
<h1 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h1><h2 id="cmd命令行连接"><a href="#cmd命令行连接" class="headerlink" title="cmd命令行连接"></a>cmd命令行连接</h2><p>在登录成功后会出现 mysql&gt; 命令提示窗口，你可以在上面执行任何 SQL 语句</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">mysql -u root -p</span></div></pre></td></tr></table></figure>
<p>退出 mysql&gt; 命令提示窗口可以使用 exit 命令</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">exit</span></div></pre></td></tr></table></figure>
<h1 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h1><p>登陆 MySQL 服务后，使用 create 命令创建数据库</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mysql -u root -p</div><div class="line">mysql&gt; create DATABASE RUNOOB<span class="comment">;</span></div></pre></td></tr></table></figure>
<h2 id="普通用户创建数据库"><a href="#普通用户创建数据库" class="headerlink" title="普通用户创建数据库"></a>普通用户创建数据库</h2><p>普通用户，需要特定的权限来创建或者删除 MySQL 数据库</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 使用root用户登录，root用户拥有最高权限，使用 mysql mysqladmin 命令来创建数据库</span></div><div class="line">mysqladmin -u root -<span class="selector-tag">p</span> create RUNOOB</div></pre></td></tr></table></figure>
<h1 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h1><h2 id="drop-命令删除数据库"><a href="#drop-命令删除数据库" class="headerlink" title="drop 命令删除数据库"></a>drop 命令删除数据库</h2><p>删除名为 RUNOOB 的数据库</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; drop database RUNOOB<span class="comment">;</span></div></pre></td></tr></table></figure>
<h2 id="普通用户删除数据库"><a href="#普通用户删除数据库" class="headerlink" title="普通用户删除数据库"></a>普通用户删除数据库</h2><p>使用 mysql mysqladmin 命令在终端来执行删除命令</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqladmin -u root -<span class="selector-tag">p</span> drop RUNOOB</div></pre></td></tr></table></figure>
<h1 id="选择数据库"><a href="#选择数据库" class="headerlink" title="选择数据库"></a>选择数据库</h1><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 选取了数据库 RUNOOB</span></div><div class="line">mysql -u root -p</div><div class="line">mysql&gt; <span class="keyword">use</span> <span class="title">RUNOOB</span>;</div><div class="line">Database changed</div></pre></td></tr></table></figure>
<h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><p>MySQL中定义数据字段的类型对你数据库的优化是非常重要的</p>
<p>MySQL支持多种类型，大致可以分为三类：数值、日期/时间和字符串(字符)类型</p>
<h2 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h2><p>整型</p>
<ul>
<li>tinyint       0-255        1个字节长</li>
<li>smallint      0-65535      2个字节长</li>
<li>int          0-21亿       4个字节长</li>
<li>bigint        0-42亿      8个字节长</li>
</ul>
<p>浮点型</p>
<ul>
<li>float(M,D) 单精度浮点数。 可以精确到小数点后7位。M代表总宽度，D代表小数位</li>
<li>double(M,D) 双精度浮点数。可以精确到小数点后15位。M代表总宽度，D代表小数位</li>
</ul>
<h2 id="日期和时间类型"><a href="#日期和时间类型" class="headerlink" title="日期和时间类型"></a>日期和时间类型</h2><ul>
<li>date    形如： “YYYY-MM-DD”</li>
<li>time    形如： “HH:MM:SS”</li>
<li>datetime  形如： “YYYY-MM-DD HH:MM:SS”</li>
</ul>
<h2 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h2><ul>
<li>tinytext   0-255   最小文本型</li>
<li>text      0-1677万   中型文本</li>
<li>longtext  0-42亿      大型文本</li>
</ul>
<h2 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h2><p>创建MySQL数据表需要以下信息:</p>
<ul>
<li>表名</li>
<li>表字段名</li>
<li>定义每个表字段</li>
</ul>
<p>语法:CREATE TABLE table_name (column_name column_type);</p>
<ul>
<li>不想字段为 NULL 可以设置字段的属性为 NOT NULL， 在操作数据库时如果输入该字段的数据为NULL ，就会报错</li>
<li>AUTO_INCREMENT定义列为自增的属性，一般用于主键，数值会自动加1</li>
<li>PRIMARY KEY关键字用于定义列为主键。 您可以使用多列来定义主键，列间以逗号分隔</li>
<li>ENGINE 设置存储引擎，CHARSET 设置编码</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="string">`runoob_tbl`</span>(</div><div class="line">   <span class="string">`runoob_id`</span> <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> AUTO_INCREMENT,</div><div class="line">   <span class="string">`runoob_title`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</div><div class="line">   <span class="string">`runoob_author`</span> <span class="built_in">VARCHAR</span>(<span class="number">40</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</div><div class="line">   <span class="string">`submission_date`</span> <span class="built_in">DATE</span>,</div><div class="line">   PRIMARY <span class="keyword">KEY</span> ( <span class="string">`runoob_id`</span> )</div><div class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</div></pre></td></tr></table></figure>
<h2 id="通过命令提示符创建表"><a href="#通过命令提示符创建表" class="headerlink" title="通过命令提示符创建表"></a>通过命令提示符创建表</h2><p>通过 mysql&gt; 命令窗口可以很简单的创建MySQL数据表</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">mysql -u root -p</div><div class="line">mysql&gt; use RUNOOB;</div><div class="line">Database changed</div><div class="line">mysql&gt; CREATE TABLE runoob_tbl(</div><div class="line">   -<span class="ruby">&gt; runoob_id INT NOT NULL AUTO_INCREMENT,</span></div><div class="line">   -<span class="ruby">&gt; runoob_title VARCHAR(<span class="number">100</span>) NOT NULL,</span></div><div class="line">   -<span class="ruby">&gt; runoob_author VARCHAR(<span class="number">40</span>) NOT NULL,</span></div><div class="line">   -<span class="ruby">&gt; submission_date DATE,</span></div><div class="line">   -<span class="ruby">&gt; PRIMARY KEY ( runoob_id )</span></div><div class="line">   -<span class="ruby">&gt; )ENGINE=InnoDB DEFAULT CHARSET=utf8;</span></div><div class="line">Query OK, 0 rows affected (0.16 sec)</div><div class="line">mysql&gt;</div></pre></td></tr></table></figure>
<h1 id="删除数据表"><a href="#删除数据表" class="headerlink" title="删除数据表"></a>删除数据表</h1><p>语法:DROP TABLE table_name ;</p>
<h2 id="在命令提示窗口中删除数据表"><a href="#在命令提示窗口中删除数据表" class="headerlink" title="在命令提示窗口中删除数据表"></a>在命令提示窗口中删除数据表</h2><p>在mysql&gt;命令提示窗口中删除数据表SQL语句为 DROP TABLE</p>
<p>删除了数据表runoob_tbl</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">root@host# mysql -<span class="keyword">u</span> root -p</div><div class="line">Enter password:*******</div><div class="line">mysql&gt; <span class="keyword">use</span> RUNOOB;</div><div class="line">Database changed</div><div class="line">mysql&gt; <span class="keyword">DROP</span> <span class="keyword">TABLE</span> runoob_tbl</div><div class="line"><span class="keyword">Query</span> OK, 0 rows affected (0.8 sec)</div><div class="line">mysql&gt;</div></pre></td></tr></table></figure>
<h1 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h1><p>MySQL 表中使用 INSERT INTO SQL语句来插入数据</p>
<p>语法:INSERT INTO table_name ( field1, field2,…fieldN ) VALUES ( value1, value2,…valueN );</p>
<h2 id="通过命令提示窗口插入数据"><a href="#通过命令提示窗口插入数据" class="headerlink" title="通过命令提示窗口插入数据"></a>通过命令提示窗口插入数据</h2><p>使用 SQL INSERT INTO 语句向 MySQL 数据表 runoob_tbl 插入数据</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">mysql -u root -p password;</div><div class="line">mysql&gt; use RUNOOB;</div><div class="line">Database changed</div><div class="line">mysql&gt; INSERT INTO runoob_tbl </div><div class="line">    -<span class="ruby">&gt; (runoob_title, runoob_author, submission_date)</span></div><div class="line">    -<span class="ruby">&gt; VALUES</span></div><div class="line">    -<span class="ruby">&gt; (<span class="string">"学习 PHP"</span>, <span class="string">"菜鸟教程"</span>, NOW());</span></div><div class="line">Query OK, 1 rows affected, 1 warnings (0.01 sec)</div><div class="line">mysql&gt; INSERT INTO runoob_tbl</div><div class="line">    -<span class="ruby">&gt; (runoob_title, runoob_author, submission_date)</span></div><div class="line">    -<span class="ruby">&gt; VALUES</span></div><div class="line">    -<span class="ruby">&gt; (<span class="string">"学习 MySQL"</span>, <span class="string">"菜鸟教程"</span>, NOW());</span></div><div class="line">Query OK, 1 rows affected, 1 warnings (0.01 sec)</div><div class="line">mysql&gt; INSERT INTO runoob_tbl</div><div class="line">    -<span class="ruby">&gt; (runoob_title, runoob_author, submission_date)</span></div><div class="line">    -<span class="ruby">&gt; VALUES</span></div><div class="line">    -<span class="ruby">&gt; (<span class="string">"JAVA 教程"</span>, <span class="string">"RUNOOB.COM"</span>, <span class="string">'2016-05-06'</span>);</span></div><div class="line">Query OK, 1 rows affected (0.00 sec)</div><div class="line">mysql&gt;</div><div class="line"><span class="comment"></span></div><div class="line">// 读取数据表</div><div class="line">select * from runoob_tbl;</div></pre></td></tr></table></figure>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/03/71971E68-78B3-4964-AC4C-E75114D3B5B5.jpg" alt="image"></p>
<h1 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h1><p>语法:SELECT column_name,column_nameFROM table_name[WHERE Clause][LIMIT N][ OFFSET M];</p>
<ul>
<li>查询语句中你可以使用一个或者多个表，表之间使用逗号(,)分割，并使用WHERE语句来设定查询条件</li>
<li>SELECT 命令可以读取一条或者多条记录</li>
<li>使用星号（*）来代替其他字段，SELECT语句会返回表的所有字段数据</li>
<li>使用 WHERE 语句来包含任何条件</li>
<li>使用 LIMIT 属性来设定返回的记录数</li>
<li>通过OFFSET指定SELECT语句开始查询的数据偏移量。默认情况下偏移量为0</li>
</ul>
<h2 id="通过命令提示符获取数据"><a href="#通过命令提示符获取数据" class="headerlink" title="通过命令提示符获取数据"></a>通过命令提示符获取数据</h2><p>通过 SQL SELECT 命令来获取 MySQL 数据表 runoob_tbl 的所有数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> runoob_tbl;</div></pre></td></tr></table></figure>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/03/DB742246-84F3-4447-BD43-6BAEADD7CA91.jpg" alt="image"></p>
<h1 id="WHERE-子句"><a href="#WHERE-子句" class="headerlink" title="WHERE 子句"></a>WHERE 子句</h1><p>如需有条件地从表中选取数据，可将 WHERE 子句添加到 SELECT 语句中</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> field1, field2,<span class="params">...</span>fieldN FROM table_name1, table_name2<span class="params">...</span></div><div class="line"><span class="meta">[</span><span class="keyword">WHERE</span> condition1 <span class="meta">[</span><span class="literal">AND</span> <span class="meta">[</span><span class="literal">OR</span><span class="meta">]</span>] condition2.....</div></pre></td></tr></table></figure>
<h2 id="从命令提示符中读取数据"><a href="#从命令提示符中读取数据" class="headerlink" title="从命令提示符中读取数据"></a>从命令提示符中读取数据</h2><p>读取 runoob_tbl 表中 runoob_author 字段值为 Sanjay 的所有记录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">from</span> runoob_tbl <span class="keyword">WHERE</span> runoob_author=<span class="string">'菜鸟教程'</span>;</div></pre></td></tr></table></figure>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/03/CED9CA9C-E4C7-4809-875C-A7E48F430059.jpg" alt="image"></p>
<p>MySQL 的 WHERE 子句的字符串比较是不区分大小写的</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 因为使用了 BINARY 关键字，是区分大小写的，所以 runoob_author='runoob.com' 的查询条件是没有数据的</span></div><div class="line">mysql&gt; SELECT * from runoob<span class="emphasis">_tbl WHERE BINARY runoob_</span>author=<span class="emphasis">'runoob.com'</span>;</div><div class="line">Empty set (0.01 sec)</div><div class="line"><span class="code"> </span></div><div class="line"><span class="section">mysql&gt; SELECT * from runoob_tbl WHERE BINARY runoob_author='RUNOOB.COM';</span></div><div class="line">+-----------+---------------+---------------+-----------------+</div><div class="line"><span class="section">| runoob_id | runoob_title  | runoob_author | submission_date |</span></div><div class="line">+-----------+---------------+---------------+-----------------+</div><div class="line">| 3         | JAVA 教程   | RUNOOB.COM    | 2016-05-06      |</div><div class="line"><span class="section">| 4         | 学习 Python | RUNOOB.COM    | 2016-03-06      |</span></div><div class="line">+-----------+---------------+---------------+-----------------+</div><div class="line">2 rows in set (0.01 sec)</div></pre></td></tr></table></figure>
<h1 id="UPDATE-查询"><a href="#UPDATE-查询" class="headerlink" title="UPDATE 查询"></a>UPDATE 查询</h1><p>修改或更新 MySQL 中的数据，可以使用 SQL UPDATE 命令来操作</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">UPDATE</span> table_name <span class="keyword">SET</span> field1=<span class="keyword">new</span>-value1, field2=<span class="keyword">new</span>-value2</div><div class="line">[<span class="keyword">WHERE</span> Clause]</div></pre></td></tr></table></figure>
<h2 id="通过命令提示符更新数据"><a href="#通过命令提示符更新数据" class="headerlink" title="通过命令提示符更新数据"></a>通过命令提示符更新数据</h2><p>将更新数据表中 runoob_id 为 3 的 runoob_title 字段值</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">mysql&gt; UPDATE runoob_tbl SET runoob_title='学习 C++' WHERE runoob_id=<span class="number">3</span>;</div><div class="line">Query OK, <span class="number">1</span> rows affected (<span class="number">0.01</span> sec)</div><div class="line"> </div><div class="line">mysql&gt; SELECT * from runoob_tbl WHERE runoob_id=<span class="number">3</span>;</div><div class="line">+-----------+--------------+---------------+-----------------+</div><div class="line">| <span class="type">runoob_id</span> | <span class="type">runoob_title</span> | <span class="type">runoob_author</span> | <span class="type">submission_date</span> |</div><div class="line"><span class="type">+-----------+--------------+---------------+-----------------+</span></div><div class="line">| 3         | <span class="type">学习 C</span>++   | <span class="type">RUNOOB</span>.COM    | <span class="type">2016</span><span class="number">-05</span><span class="number">-06</span>      |</div><div class="line"><span class="type">+-----------+--------------+---------------+-----------------+</span></div><div class="line">1 rows <span class="built_in">in</span> <span class="built_in">set</span> (<span class="number">0.01</span> sec)</div></pre></td></tr></table></figure>
<h1 id="DELETE-语句"><a href="#DELETE-语句" class="headerlink" title="DELETE 语句"></a>DELETE 语句</h1><p>使用 SQL 的 DELETE FROM 命令来删除 MySQL 数据表中的记录</p>
<p>语法:DELETE FROM table_name [WHERE Clause]</p>
<h2 id="从命令行中删除数据"><a href="#从命令行中删除数据" class="headerlink" title="从命令行中删除数据"></a>从命令行中删除数据</h2><p>在 SQL DELETE 命令中使用 WHERE 子句来删除 MySQL 数据表 runoob_tbl 所选的数据</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 将删除 runoob_tbl 表中 runoob_id 为3</span></div><div class="line">mysql&gt; use RUNOOB;</div><div class="line">Database <span class="section">changed</span></div><div class="line">mysql&gt; DELETE FROM runoob_tbl WHERE runoob_id=<span class="number">3</span>;</div><div class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.23</span> sec)</div></pre></td></tr></table></figure>
<h1 id="LIKE-子句"><a href="#LIKE-子句" class="headerlink" title="LIKE 子句"></a>LIKE 子句</h1><p>“runoob_author = ‘RUNOOB.COM’”,获取 runoob_author 字段含有 “COM” 字符的所有记录，需要在 WHERE 子句中使用 SQL LIKE 子句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> field1, field2,...fieldN </div><div class="line"><span class="keyword">FROM</span> table_name</div><div class="line"><span class="keyword">WHERE</span> field1 <span class="keyword">LIKE</span> condition1 [<span class="keyword">AND</span> [<span class="keyword">OR</span>]] filed2 = <span class="string">'somevalue'</span></div></pre></td></tr></table></figure>
<h2 id="在命令提示符中使用LIKE子句"><a href="#在命令提示符中使用LIKE子句" class="headerlink" title="在命令提示符中使用LIKE子句"></a>在命令提示符中使用LIKE子句</h2><p>runoob_tbl 表中获取 runoob_author 字段中以 COM 为结尾的的所有记录</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">mysql&gt; use RUNOOB;</div><div class="line">Database changed</div><div class="line"><span class="section">mysql&gt; SELECT * from runoob_tbl  WHERE runoob_author LIKE '%COM';</span></div><div class="line">+-----------+---------------+---------------+-----------------+</div><div class="line"><span class="section">| runoob_id | runoob_title  | runoob_author | submission_date |</span></div><div class="line">+-----------+---------------+---------------+-----------------+</div><div class="line">| 3         | 学习 Java   | RUNOOB.COM    | 2015-05-01      |</div><div class="line"><span class="section">| 4         | 学习 Python | RUNOOB.COM    | 2016-03-06      |</span></div><div class="line">+-----------+---------------+---------------+-----------------+</div><div class="line">2 rows in set (0.01 sec)</div></pre></td></tr></table></figure>
<h1 id="UNION-操作符"><a href="#UNION-操作符" class="headerlink" title="UNION 操作符"></a>UNION 操作符</h1><p>MySQL UNION 操作符用于连接两个以上的 SELECT 语句的结果组合到一个结果集合</p>
<p>参数</p>
<ul>
<li>expression1, expression2, … expression_n: 要检索的列</li>
<li>tables: 要检索的数据表</li>
<li>WHERE conditions: 可选， 检索条件</li>
<li>DISTINCT: 可选，删除结果集中重复的数据。默认情况下 UNION 操作符已经删除了重复数据，所以 DISTINCT 修饰符对结果没啥影响</li>
<li>ALL: 可选，返回所有结果集，包含重复数据</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> expression1, expression2, ... expression_n</div><div class="line"><span class="keyword">FROM</span> <span class="keyword">tables</span></div><div class="line">[<span class="keyword">WHERE</span> conditions]</div><div class="line"><span class="keyword">UNION</span> [ALL | <span class="keyword">DISTINCT</span>]</div><div class="line"><span class="keyword">SELECT</span> expression1, expression2, ... expression_n</div><div class="line"><span class="keyword">FROM</span> <span class="keyword">tables</span></div><div class="line">[<span class="keyword">WHERE</span> conditions];</div></pre></td></tr></table></figure>
<h2 id="演示数据库"><a href="#演示数据库" class="headerlink" title="演示数据库"></a>演示数据库</h2><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">// websites数据库</div><div class="line">mysql&gt; SELECT <span class="symbol">*</span> FROM Websites;</div><div class="line">+----+--------------+---------------------------+-------+---------+</div><div class="line">|<span class="string"> id </span>|<span class="string"> name         </span>|<span class="string"> url                       </span>|<span class="string"> alexa </span>|<span class="string"> country </span>|</div><div class="line">+----+--------------+---------------------------+-------+---------+</div><div class="line">|<span class="string"> 1  </span>|<span class="string"> Google       </span>|<span class="string"> https://www.google.cm/    </span>|<span class="string"> 1     </span>|<span class="string"> USA     </span>|</div><div class="line">|<span class="string"> 2  </span>|<span class="string"> 淘宝          </span>|<span class="string"> https://www.taobao.com/   </span>|<span class="string"> 13    </span>|<span class="string"> CN      </span>|</div><div class="line">|<span class="string"> 3  </span>|<span class="string"> 菜鸟教程      </span>|<span class="string"> http://www.runoob.com/    </span>|<span class="string"> 4689  </span>|<span class="string"> CN      </span>|</div><div class="line">|<span class="string"> 4  </span>|<span class="string"> 微博          </span>|<span class="string"> http://weibo.com/         </span>|<span class="string"> 20    </span>|<span class="string"> CN      </span>|</div><div class="line">|<span class="string"> 5  </span>|<span class="string"> Facebook     </span>|<span class="string"> https://www.facebook.com/ </span>|<span class="string"> 3     </span>|<span class="string"> USA     </span>|</div><div class="line">|<span class="string"> 7  </span>|<span class="string"> stackoverflow </span>|<span class="string"> http://stackoverflow.com/ </span>|<span class="string">   0 </span>|<span class="string"> IND     </span>|</div><div class="line">+----+---------------+---------------------------+-------+---------+</div><div class="line"></div><div class="line">// app数据库</div><div class="line">mysql&gt; SELECT <span class="symbol">*</span> FROM apps;</div><div class="line">+----+------------+-------------------------+---------+</div><div class="line">|<span class="string"> id </span>|<span class="string"> app_name   </span>|<span class="string"> url                     </span>|<span class="string"> country </span>|</div><div class="line">+----+------------+-------------------------+---------+</div><div class="line">|<span class="string">  1 </span>|<span class="string"> QQ APP     </span>|<span class="string"> http://im.qq.com/       </span>|<span class="string"> CN      </span>|</div><div class="line">|<span class="string">  2 </span>|<span class="string"> 微博 APP </span>|<span class="string"> http://weibo.com/       </span>|<span class="string"> CN      </span>|</div><div class="line">|<span class="string">  3 </span>|<span class="string"> 淘宝 APP </span>|<span class="string"> https://www.taobao.com/ </span>|<span class="string"> CN      </span>|</div><div class="line">+----+------------+-------------------------+---------+</div><div class="line">3 rows in set (0.00 sec)</div></pre></td></tr></table></figure>
<h2 id="SQL-UNION-实例"><a href="#SQL-UNION-实例" class="headerlink" title="SQL UNION 实例"></a>SQL UNION 实例</h2><p>SQL 语句从 “Websites” 和 “apps” 表中选取所有不同的country（只有不同的值）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> country <span class="keyword">FROM</span> Websites</div><div class="line"><span class="keyword">UNION</span></div><div class="line"><span class="keyword">SELECT</span> country <span class="keyword">FROM</span> apps</div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> country;</div></pre></td></tr></table></figure>
<p><img src="http://www.runoob.com/wp-content/uploads/2013/09/union1.jpg" alt="image"></p>
<h2 id="SQL-UNION-ALL-实例"><a href="#SQL-UNION-ALL-实例" class="headerlink" title="SQL UNION ALL 实例"></a>SQL UNION ALL 实例</h2><p>SQL 语句使用 UNION ALL 从 “Websites” 和 “apps” 表中选取所有的country（也有重复的值）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> country <span class="keyword">FROM</span> Websites</div><div class="line"><span class="keyword">UNION</span> ALL</div><div class="line"><span class="keyword">SELECT</span> country <span class="keyword">FROM</span> apps</div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> country;</div></pre></td></tr></table></figure>
<p><img src="http://www.runoob.com/wp-content/uploads/2013/09/union2.jpg" alt="image"></p>
<h2 id="带有-WHERE-的-SQL-UNION-ALL"><a href="#带有-WHERE-的-SQL-UNION-ALL" class="headerlink" title="带有 WHERE 的 SQL UNION ALL"></a>带有 WHERE 的 SQL UNION ALL</h2><p>SQL 语句使用 UNION ALL 从 “Websites” 和 “apps” 表中选取所有的中国(CN)的数据（也有重复的值）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> country, <span class="keyword">name</span> <span class="keyword">FROM</span> Websites</div><div class="line"><span class="keyword">WHERE</span> country=<span class="string">'CN'</span></div><div class="line"><span class="keyword">UNION</span> ALL</div><div class="line"><span class="keyword">SELECT</span> country, app_name <span class="keyword">FROM</span> apps</div><div class="line"><span class="keyword">WHERE</span> country=<span class="string">'CN'</span></div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> country;</div></pre></td></tr></table></figure>
<p><img src="http://www.runoob.com/wp-content/uploads/2013/09/AAA99C7B-36A5-43FB-B489-F8CE63B62C71.jpg" alt="image"></p>
<h1 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h1><p>对读取的数据进行排序，我们就可以使用 MySQL 的 ORDER BY 子句来设定你想按哪个字段哪种方式来进行排序，再返回搜索结果</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> field1, field2,<span class="params">...</span>fieldN table_name1, table_name2<span class="params">...</span></div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> field1, <span class="meta">[</span>field2<span class="params">...</span><span class="meta">]</span> <span class="meta">[</span>ASC <span class="meta">[</span>DESC<span class="meta">]</span>]</div></pre></td></tr></table></figure>
<h2 id="在命令提示符中使用-ORDER-BY-子句"><a href="#在命令提示符中使用-ORDER-BY-子句" class="headerlink" title="在命令提示符中使用 ORDER BY 子句"></a>在命令提示符中使用 ORDER BY 子句</h2><p>ASC 或 DESC 关键字来设置查询结果是按升序或降序排列</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">mysql&gt; use RUNOOB;</div><div class="line">Database changed</div><div class="line"><span class="section">mysql&gt; SELECT * from runoob_tbl ORDER BY submission_date ASC;</span></div><div class="line">+-----------+---------------+---------------+-----------------+</div><div class="line"><span class="section">| runoob_id | runoob_title  | runoob_author | submission_date |</span></div><div class="line">+-----------+---------------+---------------+-----------------+</div><div class="line">| 3         | 学习 Java   | RUNOOB.COM    | 2015-05-01      |</div><div class="line">| 4         | 学习 Python | RUNOOB.COM    | 2016-03-06      |</div><div class="line">| 1         | 学习 PHP    | 菜鸟教程  | 2017-04-12      |</div><div class="line"><span class="section">| 2         | 学习 MySQL  | 菜鸟教程  | 2017-04-12      |</span></div><div class="line">+-----------+---------------+---------------+-----------------+</div><div class="line">4 rows in set (0.01 sec)</div><div class="line"><span class="code"> </span></div><div class="line"><span class="section">mysql&gt; SELECT * from runoob_tbl ORDER BY submission_date DESC;</span></div><div class="line">+-----------+---------------+---------------+-----------------+</div><div class="line"><span class="section">| runoob_id | runoob_title  | runoob_author | submission_date |</span></div><div class="line">+-----------+---------------+---------------+-----------------+</div><div class="line">| 1         | 学习 PHP    | 菜鸟教程  | 2017-04-12      |</div><div class="line">| 2         | 学习 MySQL  | 菜鸟教程  | 2017-04-12      |</div><div class="line">| 4         | 学习 Python | RUNOOB.COM    | 2016-03-06      |</div><div class="line"><span class="section">| 3         | 学习 Java   | RUNOOB.COM    | 2015-05-01      |</span></div><div class="line">+-----------+---------------+---------------+-----------------+</div><div class="line">4 rows in set (0.01 sec)</div></pre></td></tr></table></figure>
<h1 id="GROUP-BY-语句"><a href="#GROUP-BY-语句" class="headerlink" title="GROUP BY 语句"></a>GROUP BY 语句</h1><p>GROUP BY 语句根据一个或多个列对结果集进行分组</p>
<p>在分组的列上我们可以使用 COUNT, SUM, AVG,等函数</p>
<p>语法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> column_name, <span class="keyword">function</span>(column_name)</div><div class="line"><span class="keyword">FROM</span> table_name</div><div class="line"><span class="keyword">WHERE</span> column_name <span class="keyword">operator</span> <span class="keyword">value</span></div><div class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> column_name;</div></pre></td></tr></table></figure>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p>使用前我们可以先将以下数据导入数据库中</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SET</span> <span class="keyword">NAMES</span> utf8;</div><div class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">--  Table structure for `employee_tbl`</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`employee_tbl`</span>;</div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`employee_tbl`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`name`</span> <span class="built_in">char</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</div><div class="line">  <span class="string">`date`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`singin`</span> tinyint(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'登录次数'</span>,</div><div class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">--  Records of `employee_tbl`</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">BEGIN</span>;</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`employee_tbl`</span> <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'小明'</span>, <span class="string">'2016-04-22 15:25:33'</span>, <span class="string">'1'</span>), (<span class="string">'2'</span>, <span class="string">'小王'</span>, <span class="string">'2016-04-20 15:25:47'</span>, <span class="string">'3'</span>), (<span class="string">'3'</span>, <span class="string">'小丽'</span>, <span class="string">'2016-04-19 15:26:02'</span>, <span class="string">'2'</span>), (<span class="string">'4'</span>, <span class="string">'小王'</span>, <span class="string">'2016-04-07 15:26:14'</span>, <span class="string">'4'</span>), (<span class="string">'5'</span>, <span class="string">'小明'</span>, <span class="string">'2016-04-11 15:26:40'</span>, <span class="string">'4'</span>), (<span class="string">'6'</span>, <span class="string">'小明'</span>, <span class="string">'2016-04-04 15:26:54'</span>, <span class="string">'2'</span>);</div><div class="line"><span class="keyword">COMMIT</span>;</div><div class="line"></div><div class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS = <span class="number">1</span>;</div></pre></td></tr></table></figure>
<p>导入成功,执行以下 SQL 语句</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">mysql&gt; set names utf8;</div><div class="line">mysql&gt; SELECT <span class="symbol">*</span> FROM employee_tbl;</div><div class="line">+----+--------+---------------------+--------+</div><div class="line">|<span class="string"> id </span>|<span class="string"> name   </span>|<span class="string"> date                </span>|<span class="string"> singin </span>|</div><div class="line">+----+--------+---------------------+--------+</div><div class="line">|<span class="string">  1 </span>|<span class="string"> 小明 </span>|<span class="string"> 2016-04-22 15:25:33 </span>|<span class="string">      1 </span>|</div><div class="line">|<span class="string">  2 </span>|<span class="string"> 小王 </span>|<span class="string"> 2016-04-20 15:25:47 </span>|<span class="string">      3 </span>|</div><div class="line">|<span class="string">  3 </span>|<span class="string"> 小丽 </span>|<span class="string"> 2016-04-19 15:26:02 </span>|<span class="string">      2 </span>|</div><div class="line">|<span class="string">  4 </span>|<span class="string"> 小王 </span>|<span class="string"> 2016-04-07 15:26:14 </span>|<span class="string">      4 </span>|</div><div class="line">|<span class="string">  5 </span>|<span class="string"> 小明 </span>|<span class="string"> 2016-04-11 15:26:40 </span>|<span class="string">      4 </span>|</div><div class="line">|<span class="string">  6 </span>|<span class="string"> 小明 </span>|<span class="string"> 2016-04-04 15:26:54 </span>|<span class="string">      2 </span>|</div><div class="line">+----+--------+---------------------+--------+</div><div class="line">6 rows in set (0.00 sec)</div></pre></td></tr></table></figure>
<h2 id="使用-GROUP-BY-语句"><a href="#使用-GROUP-BY-语句" class="headerlink" title="使用 GROUP BY 语句"></a>使用 GROUP BY 语句</h2><p>将数据表按名字进行分组，并统计每个人有多少条记录</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="section">mysql&gt; SELECT name, COUNT(*) FROM   employee_tbl GROUP BY name;</span></div><div class="line">+--------+----------+</div><div class="line"><span class="section">| name   | COUNT(*) |</span></div><div class="line">+--------+----------+</div><div class="line">| 小丽 |        1 |</div><div class="line">| 小明 |        3 |</div><div class="line"><span class="section">| 小王 |        2 |</span></div><div class="line">+--------+----------+</div><div class="line">3 rows in set (0.01 sec)</div></pre></td></tr></table></figure>
<h2 id="使用-WITH-ROLLUP"><a href="#使用-WITH-ROLLUP" class="headerlink" title="使用 WITH ROLLUP"></a>使用 WITH ROLLUP</h2><p>WITH ROLLUP 可以实现在分组统计数据基础上再进行相同的统计（SUM,AVG,COUNT…）</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 将以上的数据表按名字进行分组，再统计每个人登录的次数</span></div><div class="line"><span class="comment">// 记录 NULL 表示所有人的登录次数</span></div><div class="line"><span class="section">mysql&gt; SELECT name, SUM(singin) as singin_count FROM  employee_tbl GROUP BY name WITH ROLLUP;</span></div><div class="line">+--------+--------------+</div><div class="line"><span class="section">| name   | singin_count |</span></div><div class="line">+--------+--------------+</div><div class="line">| 小丽 |            2 |</div><div class="line">| 小明 |            7 |</div><div class="line">| 小王 |            7 |</div><div class="line"><span class="section">| NULL   |           16 |</span></div><div class="line">+--------+--------------+</div><div class="line">4 rows in set (0.00 sec)</div></pre></td></tr></table></figure>
<p>可以使用 coalesce 来设置一个可以取代 NUll 的名称，coalesce 语法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> <span class="keyword">coalesce</span>(a,b,c);</div></pre></td></tr></table></figure>
<p>参数说明：如果a==null,则选择b；如果b==null,则选择c；如果a!=null,则选择a；如果a b c 都为null ，则返回为null（没意义）</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="section">mysql&gt; SELECT coalesce(name, '总数'), SUM(singin) as singin_count FROM  employee_tbl GROUP BY name WITH ROLLUP;</span></div><div class="line">+--------------------------+--------------+</div><div class="line"><span class="section">| coalesce(name, '总数') | singin_count |</span></div><div class="line">+--------------------------+--------------+</div><div class="line">| 小丽                   |            2 |</div><div class="line">| 小明                   |            7 |</div><div class="line">| 小王                   |            7 |</div><div class="line"><span class="section">| 总数                   |           16 |</span></div><div class="line">+--------------------------+--------------+</div><div class="line">4 rows in set (0.01 sec)</div></pre></td></tr></table></figure>
<h1 id="连接的使用"><a href="#连接的使用" class="headerlink" title="连接的使用"></a>连接的使用</h1><p>在 SELECT, UPDATE 和 DELETE 语句中使用 Mysql 的 JOIN 来联合多表查询</p>
<p>JOIN按照功能大致分为如下三类</p>
<ul>
<li>INNER JOIN（内连接,或等值连接）：获取两个表中字段匹配关系的记录</li>
<li>LEFT JOIN（左连接）：获取左表所有记录，即使右表没有对应匹配的记录</li>
<li>RIGHT JOIN（右连接）： 与 LEFT JOIN 相反，用于获取右表所有记录，即使左表没有对应匹配的记录</li>
</ul>
<h2 id="在命令提示符中使用-INNER-JOIN"><a href="#在命令提示符中使用-INNER-JOIN" class="headerlink" title="在命令提示符中使用 INNER JOIN"></a>在命令提示符中使用 INNER JOIN</h2><p>RUNOOB数据库中有两张表 tcount_tbl 和 runoob_tbl</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">mysql&gt; use RUNOOB;</div><div class="line">Database changed</div><div class="line"><span class="section">mysql&gt; SELECT * FROM tcount_tbl;</span></div><div class="line">+---------------+--------------+</div><div class="line"><span class="section">| runoob_author | runoob_count |</span></div><div class="line">+---------------+--------------+</div><div class="line">| 菜鸟教程  | 10           |</div><div class="line">| RUNOOB.COM    | 20           |</div><div class="line"><span class="section">| Google        | 22           |</span></div><div class="line">+---------------+--------------+</div><div class="line">3 rows in set (0.01 sec)</div><div class="line"><span class="code"> </span></div><div class="line"><span class="section">mysql&gt; SELECT * from runoob_tbl;</span></div><div class="line">+-----------+---------------+---------------+-----------------+</div><div class="line"><span class="section">| runoob_id | runoob_title  | runoob_author | submission_date |</span></div><div class="line">+-----------+---------------+---------------+-----------------+</div><div class="line">| 1         | 学习 PHP    | 菜鸟教程  | 2017-04-12      |</div><div class="line">| 2         | 学习 MySQL  | 菜鸟教程  | 2017-04-12      |</div><div class="line">| 3         | 学习 Java   | RUNOOB.COM    | 2015-05-01      |</div><div class="line">| 4         | 学习 Python | RUNOOB.COM    | 2016-03-06      |</div><div class="line"><span class="section">| 5         | 学习 C      | FK            | 2017-04-05      |</span></div><div class="line">+-----------+---------------+---------------+-----------------+</div><div class="line">5 rows in set (0.01 sec)</div></pre></td></tr></table></figure>
<p>MySQL的INNER JOIN来连接以上两张表来读取runoob_tbl表中所有runoob_author字段在tcount_tbl表对应的runoob_count字段值</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="section">mysql&gt; SELECT a.runoob_id, a.runoob_author, b.runoob_count FROM runoob_tbl a INNER JOIN tcount_tbl b ON a.runoob_author = b.runoob_author;</span></div><div class="line">+-------------+-----------------+----------------+</div><div class="line"><span class="section">| a.runoob_id | a.runoob_author | b.runoob_count |</span></div><div class="line">+-------------+-----------------+----------------+</div><div class="line">| 1           | 菜鸟教程    | 10             |</div><div class="line">| 2           | 菜鸟教程    | 10             |</div><div class="line">| 3           | RUNOOB.COM      | 20             |</div><div class="line"><span class="section">| 4           | RUNOOB.COM      | 20             |</span></div><div class="line">+-------------+-----------------+----------------+</div><div class="line">4 rows in set (0.00 sec)</div><div class="line"></div><div class="line"><span class="comment">// 以上 SQL 语句等价于</span></div><div class="line"><span class="section">mysql&gt; SELECT a.runoob_id, a.runoob_author, b.runoob_count FROM runoob_tbl a, tcount_tbl b WHERE a.runoob_author = b.runoob_author;</span></div><div class="line">+-------------+-----------------+----------------+</div><div class="line"><span class="section">| a.runoob_id | a.runoob_author | b.runoob_count |</span></div><div class="line">+-------------+-----------------+----------------+</div><div class="line">| 1           | 菜鸟教程    | 10             |</div><div class="line">| 2           | 菜鸟教程    | 10             |</div><div class="line">| 3           | RUNOOB.COM      | 20             |</div><div class="line"><span class="section">| 4           | RUNOOB.COM      | 20             |</span></div><div class="line">+-------------+-----------------+----------------+</div><div class="line">4 rows in set (0.01 sec)</div></pre></td></tr></table></figure>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/03/img_innerjoin.gif" alt="image"></p>
<h2 id="MySQL-LEFT-JOIN"><a href="#MySQL-LEFT-JOIN" class="headerlink" title="MySQL LEFT JOIN"></a>MySQL LEFT JOIN</h2><p>MySQL LEFT JOIN 会读取左边数据表的全部数据，即便右边表无对应数据</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 以 runoob_tbl 为左表，tcount_tbl 为右表</span></div><div class="line"><span class="comment">// 读取左边的数据表 runoob_tbl 的所有选取的字段数据，即便在右侧表 tcount_tbl中 没有对应的 runoob_author 字段值</span></div><div class="line"><span class="section">mysql&gt; SELECT a.runoob_id, a.runoob_author, b.runoob_count FROM runoob_tbl a LEFT JOIN tcount_tbl b ON a.runoob_author = b.runoob_author;</span></div><div class="line">+-------------+-----------------+----------------+</div><div class="line"><span class="section">| a.runoob_id | a.runoob_author | b.runoob_count |</span></div><div class="line">+-------------+-----------------+----------------+</div><div class="line">| 1           | 菜鸟教程    | 10             |</div><div class="line">| 2           | 菜鸟教程    | 10             |</div><div class="line">| 3           | RUNOOB.COM      | 20             |</div><div class="line">| 4           | RUNOOB.COM      | 20             |</div><div class="line"><span class="section">| 5           | FK              | NULL           |</span></div><div class="line">+-------------+-----------------+----------------+</div><div class="line">5 rows in set (0.01 sec)</div></pre></td></tr></table></figure>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/03/img_leftjoin.gif" alt="image"></p>
<h2 id="MySQL-RIGHT-JOIN"><a href="#MySQL-RIGHT-JOIN" class="headerlink" title="MySQL RIGHT JOIN"></a>MySQL RIGHT JOIN</h2><p>MySQL RIGHT JOIN 会读取右边数据表的全部数据，即便左边边表无对应数据</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 以 runoob_tbl 为左表，tcount_tbl 为右表，理解MySQL RIGHT JOIN的应用</span></div><div class="line"><span class="section">mysql&gt; SELECT a.runoob_id, a.runoob_author, b.runoob_count FROM runoob_tbl a RIGHT JOIN tcount_tbl b ON a.runoob_author = b.runoob_author;</span></div><div class="line">+-------------+-----------------+----------------+</div><div class="line"><span class="section">| a.runoob_id | a.runoob_author | b.runoob_count |</span></div><div class="line">+-------------+-----------------+----------------+</div><div class="line">| 1           | 菜鸟教程    | 10             |</div><div class="line">| 2           | 菜鸟教程    | 10             |</div><div class="line">| 3           | RUNOOB.COM      | 20             |</div><div class="line">| 4           | RUNOOB.COM      | 20             |</div><div class="line"><span class="section">| NULL        | NULL            | 22             |</span></div><div class="line">+-------------+-----------------+----------------+</div><div class="line">5 rows in set (0.01 sec)</div></pre></td></tr></table></figure>
<p><img src="http://www.runoob.com/wp-content/uploads/2014/03/img_rightjoin.gif" alt="image"></p>
<h1 id="NULL-值处理"><a href="#NULL-值处理" class="headerlink" title="NULL 值处理"></a>NULL 值处理</h1><p>SQL SELECT 命令及 WHERE 子句来读取数据表中的数据,当提供的查询条件字段为 NULL 时，该命令可能就无法正常工作</p>
<p>为了处理这种情况，MySQL提供了三大运算符</p>
<ul>
<li>IS NULL: 当列的值是 NULL,此运算符返回 true</li>
<li>IS NOT NULL: 当列的值不为 NULL, 运算符返回 true</li>
<li>&lt;=&gt;: 比较操作符（不同于=运算符），当比较的的两个值为 NULL 时返回 true</li>
</ul>
<h2 id="在命令提示符中使用-NULL-值"><a href="#在命令提示符中使用-NULL-值" class="headerlink" title="在命令提示符中使用 NULL 值"></a>在命令提示符中使用 NULL 值</h2><p>数据库 RUNOOB 中的表 runoob_test_tbl 含有两列 runoob_author 和 runoob_count, runoob_count 中设置插入NULL值</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">root@host# mysql -u root -p password;</div><div class="line">Enter password:*******</div><div class="line">mysql&gt; use RUNOOB;</div><div class="line">Database changed</div><div class="line">mysql&gt; create table runoob<span class="emphasis">_test_</span>tbl</div><div class="line"><span class="code">    -&gt; (</span></div><div class="line"><span class="code">    -&gt; runoob_author varchar(40) NOT NULL,</span></div><div class="line"><span class="code">    -&gt; runoob_count  INT</span></div><div class="line"><span class="code">    -&gt; );</span></div><div class="line">Query OK, 0 rows affected (0.05 sec)</div><div class="line">mysql&gt; INSERT INTO runoob<span class="emphasis">_test_</span>tbl (runoob<span class="emphasis">_author, runoob_</span>count) values (<span class="emphasis">'RUNOOB'</span>, 20);</div><div class="line">mysql&gt; INSERT INTO runoob<span class="emphasis">_test_</span>tbl (runoob<span class="emphasis">_author, runoob_</span>count) values (<span class="emphasis">'菜鸟教程'</span>, NULL);</div><div class="line">mysql&gt; INSERT INTO runoob<span class="emphasis">_test_</span>tbl (runoob<span class="emphasis">_author, runoob_</span>count) values (<span class="emphasis">'Google'</span>, NULL);</div><div class="line">mysql&gt; INSERT INTO runoob<span class="emphasis">_test_</span>tbl (runoob<span class="emphasis">_author, runoob_</span>count) values (<span class="emphasis">'FK'</span>, 20);</div><div class="line"><span class="code"> </span></div><div class="line"><span class="section">mysql&gt; SELECT * from runoob_test_tbl;</span></div><div class="line">+---------------+--------------+</div><div class="line"><span class="section">| runoob_author | runoob_count |</span></div><div class="line">+---------------+--------------+</div><div class="line">| RUNOOB        | 20           |</div><div class="line">| 菜鸟教程  | NULL         |</div><div class="line">| Google        | NULL         |</div><div class="line"><span class="section">| FK            | 20           |</span></div><div class="line">+---------------+--------------+</div><div class="line">4 rows in set (0.01 sec)</div></pre></td></tr></table></figure>
<p>可以看到 = 和 != 运算符是不起作用的</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mysql&gt; <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> runoob_test_tbl <span class="keyword">WHERE</span> runoob_count = NULL;</div><div class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</div><div class="line">mysql&gt; <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> runoob_test_tbl <span class="keyword">WHERE</span> runoob_count != NULL;</div><div class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</div></pre></td></tr></table></figure>
<p>查找数据表中 runoob_test_tbl 列是否为 NULL，必须使用 IS NULL 和 IS NOT NULL</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="section">mysql&gt; SELECT * FROM runoob_test_tbl WHERE runoob_count IS NULL;</span></div><div class="line">+---------------+--------------+</div><div class="line"><span class="section">| runoob_author | runoob_count |</span></div><div class="line">+---------------+--------------+</div><div class="line">| 菜鸟教程  | NULL         |</div><div class="line"><span class="section">| Google        | NULL         |</span></div><div class="line">+---------------+--------------+</div><div class="line">2 rows in set (0.01 sec)</div><div class="line"><span class="code"> </span></div><div class="line"><span class="section">mysql&gt; SELECT * from runoob_test_tbl WHERE runoob_count IS NOT NULL;</span></div><div class="line">+---------------+--------------+</div><div class="line"><span class="section">| runoob_author | runoob_count |</span></div><div class="line">+---------------+--------------+</div><div class="line">| RUNOOB        | 20           |</div><div class="line"><span class="section">| FK            | 20           |</span></div><div class="line">+---------------+--------------+</div><div class="line">2 rows in set (0.01 sec)</div></pre></td></tr></table></figure>
<h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><p>MySQL中使用 REGEXP 操作符来进行正则表达式匹配</p>
<ul>
<li>^    匹配输入字符串的开始位置。如果设置了 RegExp 对象的 Multiline 属性，^ 也匹配 ‘\n’ 或 ‘\r’ 之后的位置</li>
<li>$    匹配输入字符串的结束位置。如果设置了RegExp 对象的 Multiline 属性，$ 也匹配 ‘\n’ 或 ‘\r’ 之前的位置</li>
<li>.    匹配除 “\n” 之外的任何单个字符。要匹配包括 ‘\n’ 在内的任何字符，请使用象 ‘[.\n]’ 的模式</li>
<li>[…]    字符集合。匹配所包含的任意一个字符。例如， ‘[abc]’ 可以匹配 “plain” 中的 ‘a’</li>
<li>[^…]    负值字符集合。匹配未包含的任意字符。例如， ‘[^abc]’ 可以匹配 “plain” 中的’p’</li>
<li>p1|p2|p3    匹配 p1 或 p2 或 p3。例如，’z|food’ 能匹配 “z” 或 “food”。’(z|f)ood’ 则匹配 “zood” 或 “food”</li>
<li><ul>
<li>匹配前面的子表达式零次或多次。例如，zo<em> 能匹配 “z” 以及 “zoo”。</em> 等价于{0,}</li>
</ul>
</li>
<li><ul>
<li>匹配前面的子表达式一次或多次。例如，’zo+’ 能匹配 “zo” 以及 “zoo”，但不能匹配 “z”。+ 等价于 {1,}</li>
</ul>
</li>
<li>{n}    n 是一个非负整数。匹配确定的 n 次。例如，’o{2}’ 不能匹配 “Bob” 中的 ‘o’，但是能匹配 “food” 中的两个 o</li>
<li>{n,m}    m 和 n 均为非负整数，其中n &lt;= m。最少匹配 n 次且最多匹配 m 次</li>
</ul>
<figure class="highlight sqf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 查找name字段中以'st'为开头的所有数据</span></div><div class="line">mysql&gt; <span class="built_in">SELECT</span> <span class="built_in">name</span> <span class="keyword">FROM</span> person_tbl WHERE <span class="built_in">name</span> REGEXP <span class="string">'^st'</span>;</div><div class="line"></div><div class="line"><span class="comment">// 查找name字段中以'ok'为结尾的所有数据</span></div><div class="line">mysql&gt; <span class="built_in">SELECT</span> <span class="built_in">name</span> <span class="keyword">FROM</span> person_tbl WHERE <span class="built_in">name</span> REGEXP <span class="string">'ok$'</span>;</div><div class="line"></div><div class="line"><span class="comment">// 查找name字段中包含'mar'字符串的所有数据</span></div><div class="line">mysql&gt; <span class="built_in">SELECT</span> <span class="built_in">name</span> <span class="keyword">FROM</span> person_tbl WHERE <span class="built_in">name</span> REGEXP <span class="string">'mar'</span>;</div><div class="line"></div><div class="line"><span class="comment">// 查找name字段中以元音字符开头或以'ok'字符串结尾的所有数据</span></div><div class="line">mysql&gt; <span class="built_in">SELECT</span> <span class="built_in">name</span> <span class="keyword">FROM</span> person_tbl WHERE <span class="built_in">name</span> REGEXP <span class="string">'^[aeiou]|ok$'</span>;</div></pre></td></tr></table></figure>
<h1 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h1><p>MySQL 事务主要用于处理操作量大，复杂度高的数据</p>
<ul>
<li>在 MySQL 中只有使用了 Innodb 数据库引擎的数据库或表才支持事务。</li>
<li>事务处理可以用来维护数据库的完整性，保证成批的 SQL 语句要么全部执行，要么全部不执行。</li>
<li>事务用来管理 insert,update,delete 语句</li>
</ul>
<p>事务是必须满足4个条件:原子性、一致性、隔离性、持久性</p>
<ul>
<li>原子性：一个事务中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节</li>
<li>一致性：在事务开始之前和事务结束以后，数据库的完整性没有被破坏</li>
<li>隔离性：数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致</li>
<li>持久性：事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失</li>
</ul>
<h2 id="事务控制语句"><a href="#事务控制语句" class="headerlink" title="事务控制语句"></a>事务控制语句</h2><ul>
<li>BEGIN或START TRANSACTION；显式地开启一个事务</li>
<li>COMMIT；也可以使用COMMIT WORK，不过二者是等价的。COMMIT会提交事务，并使已对数据库进行的所有修改成为永久性的</li>
<li>ROLLBACK；有可以使用ROLLBACK WORK，不过二者是等价的。回滚会结束用户的事务，并撤销正在进行的所有未提交的修改</li>
<li>SAVEPOINT identifier；SAVEPOINT允许在事务中创建一个保存点，一个事务中可以有多个SAVEPOINT</li>
<li>RELEASE SAVEPOINT identifier；删除一个事务的保存点，当没有指定的保存点时，执行该语句会抛出一个异常</li>
<li>ROLLBACK TO identifier；把事务回滚到标记点</li>
<li>SET TRANSACTION；用来设置事务的隔离级别</li>
</ul>
<h2 id="MYSQL-事务处理主要有两种方法"><a href="#MYSQL-事务处理主要有两种方法" class="headerlink" title="MYSQL 事务处理主要有两种方法"></a>MYSQL 事务处理主要有两种方法</h2><p>用 BEGIN, ROLLBACK, COMMIT来实现</p>
<ul>
<li>BEGIN 开始一个事务</li>
<li>ROLLBACK 事务回滚</li>
<li>COMMIT 事务确认</li>
</ul>
<p>直接用 SET 来改变 MySQL 的自动提交模式</p>
<ul>
<li>SET AUTOCOMMIT=0 禁止自动提交</li>
<li>SET AUTOCOMMIT=1 开启自动提交</li>
</ul>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">mysql&gt; use RUNOOB;</div><div class="line">Database changed</div><div class="line">mysql&gt; CREATE TABLE runoob<span class="emphasis">_transaction_</span>test( id int(5)) engine=innodb;  # 创建数据表</div><div class="line">Query OK, 0 rows affected (0.04 sec)</div><div class="line"><span class="code"> </span></div><div class="line">mysql&gt; select * from runoob<span class="emphasis">_transaction_</span>test;</div><div class="line">Empty set (0.01 sec)</div><div class="line"><span class="code"> </span></div><div class="line">mysql&gt; begin;  # 开始事务</div><div class="line">Query OK, 0 rows affected (0.00 sec)</div><div class="line"><span class="code"> </span></div><div class="line">mysql&gt; insert into runoob<span class="emphasis">_transaction_</span>test value(5);</div><div class="line">Query OK, 1 rows affected (0.01 sec)</div><div class="line"><span class="code"> </span></div><div class="line">mysql&gt; insert into runoob<span class="emphasis">_transaction_</span>test value(6);</div><div class="line">Query OK, 1 rows affected (0.00 sec)</div><div class="line"><span class="code"> </span></div><div class="line">mysql&gt; commit; # 提交事务</div><div class="line">Query OK, 0 rows affected (0.01 sec)</div><div class="line"><span class="code"> </span></div><div class="line"><span class="section">mysql&gt;  select * from runoob_transaction_test;</span></div><div class="line">+------+</div><div class="line"><span class="section">| id   |</span></div><div class="line">+------+</div><div class="line">| 5    |</div><div class="line"><span class="section">| 6    |</span></div><div class="line">+------+</div><div class="line">2 rows in set (0.01 sec)</div><div class="line"><span class="code"> </span></div><div class="line">mysql&gt; begin;    # 开始事务</div><div class="line">Query OK, 0 rows affected (0.00 sec)</div><div class="line"><span class="code"> </span></div><div class="line">mysql&gt;  insert into runoob<span class="emphasis">_transaction_</span>test values(7);</div><div class="line">Query OK, 1 rows affected (0.00 sec)</div><div class="line"><span class="code"> </span></div><div class="line">mysql&gt; rollback;   # 回滚</div><div class="line">Query OK, 0 rows affected (0.00 sec)</div><div class="line"><span class="code"> </span></div><div class="line"><span class="section">mysql&gt;   select * from runoob_transaction_test;   # 因为回滚所以数据没有插入</span></div><div class="line">+------+</div><div class="line"><span class="section">| id   |</span></div><div class="line">+------+</div><div class="line">| 5    |</div><div class="line"><span class="section">| 6    |</span></div><div class="line">+------+</div><div class="line">2 rows in set (0.01 sec)</div><div class="line"><span class="code"> </span></div><div class="line">mysql&gt;</div></pre></td></tr></table></figure>
<h1 id="ALTER命令"><a href="#ALTER命令" class="headerlink" title="ALTER命令"></a>ALTER命令</h1><p>修改数据表名或者修改数据表字段时，就需要使用到MySQL ALTER命令</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">// 创建一张表，表名为：testalter_tbl</div><div class="line">mysql -u root -p password;</div><div class="line">mysql&gt; use RUNOOB;</div><div class="line">Database changed</div><div class="line">mysql&gt; create table testalter_tbl</div><div class="line">    -&gt; (</div><div class="line">    -&gt; i INT,</div><div class="line">    -&gt; c CHAR(<span class="number">1</span>)</div><div class="line">    -&gt; );</div><div class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.05</span> sec)</div><div class="line">mysql&gt; SHOW COLUMNS FROM testalter_tbl;</div><div class="line">+-------+---------+------+-----+---------+-------+</div><div class="line">| <span class="type">Field</span> | <span class="type">Type</span>    | <span class="type">Null</span> | <span class="type">Key</span> | <span class="type">Default</span> | <span class="type">Extra</span> |</div><div class="line"><span class="type">+-------+---------+------+-----+---------+-------+</span></div><div class="line">| i     | <span class="type">int</span>(<span class="number">11</span>) | <span class="type">YES</span>  |     <span class="type">| NULL</span>    |       <span class="type">|</span></div><div class="line">| c     | <span class="type">char</span>(<span class="number">1</span>) | <span class="type">YES</span>  |     <span class="type">| NULL</span>    |       <span class="type">|</span></div><div class="line">+-------+---------+------+-----+---------+-------+</div><div class="line">2 rows <span class="built_in">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</div></pre></td></tr></table></figure>
<h2 id="删除，添加或修改表字段"><a href="#删除，添加或修改表字段" class="headerlink" title="删除，添加或修改表字段"></a>删除，添加或修改表字段</h2><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ALTER 命令及 DROP 子句来删除以上创建表的 i 字段</span></div><div class="line">mysql&gt; ALTER TABLE testalter<span class="emphasis">_tbl  DROP i;</span></div><div class="line"></div><div class="line"><span class="comment">// MySQL 中使用 ADD 子句来向数据表中添加列，如下实例在表 testalter_tbl 中添加 i 字段，并定义数据类型</span></div><div class="line">mysql&gt; ALTER TABLE testalter<span class="emphasis">_tbl ADD i INT;</span></div><div class="line"></div><div class="line"><span class="comment">// 执行以上命令后，i 字段会自动添加到数据表字段的末尾</span></div><div class="line"><span class="section">mysql&gt; SHOW COLUMNS FROM testalter_tbl;</span></div><div class="line">+-------+---------+------+-----+---------+-------+</div><div class="line"><span class="section">| Field | Type    | Null | Key | Default | Extra |</span></div><div class="line">+-------+---------+------+-----+---------+-------+</div><div class="line">| c     | char(1) | YES  |     | NULL    |       |</div><div class="line"><span class="section">| i     | int(11) | YES  |     | NULL    |       |</span></div><div class="line">+-------+---------+------+-----+---------+-------+</div><div class="line">2 rows in set (0.00 sec)</div><div class="line"></div><div class="line"><span class="comment">// 指定新增字段的位置，可以使用MySQL提供的关键字 FIRST (设定位第一列)， AFTER 字段名（设定位于某个字段之后）</span></div><div class="line">ALTER TABLE testalter<span class="emphasis">_tbl DROP i;</span></div><div class="line">ALTER TABLE testalter_tbl ADD i INT FIRST;</div><div class="line">ALTER TABLE testalter<span class="emphasis">_tbl DROP i;</span></div><div class="line">ALTER TABLE testalter_tbl ADD i INT AFTER c;</div></pre></td></tr></table></figure>
<h2 id="修改字段类型及名称"><a href="#修改字段类型及名称" class="headerlink" title="修改字段类型及名称"></a>修改字段类型及名称</h2><p>需要修改字段类型及名称, 你可以在ALTER命令中使用 MODIFY 或 CHANGE 子句</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 把字段 c 的类型从 CHAR(1) 改为 CHAR(10)，执行以下命令</span></div><div class="line">mysql&gt; ALTER <span class="keyword">TABLE</span> testalter_tbl <span class="comment">MODIFY c CHAR(10)</span>;</div><div class="line"></div><div class="line"><span class="comment">// 使用 CHANGE 子句,在 CHANGE 关键字之后，紧跟着的是你要修改的字段名，然后指定新字段名及类型</span></div><div class="line">mysql&gt; ALTER <span class="keyword">TABLE</span> testalter_tbl <span class="comment">CHANGE i j BIGINT</span>;</div><div class="line">mysql&gt; ALTER <span class="keyword">TABLE</span> testalter_tbl <span class="comment">CHANGE j j INT</span>;</div></pre></td></tr></table></figure>
<h2 id="ALTER-TABLE-对-Null-值和默认值的影响"><a href="#ALTER-TABLE-对-Null-值和默认值的影响" class="headerlink" title="ALTER TABLE 对 Null 值和默认值的影响"></a>ALTER TABLE 对 Null 值和默认值的影响</h2><p>当你修改字段时，你可以指定是否包含值或者是否设置默认值</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">// 指定字段 j 为 <span class="literal">NOT</span> <span class="literal">NULL</span> 且默认值为<span class="number">100</span> </div><div class="line">mysql&gt; ALTER TABLE testalter_tbl </div><div class="line">    -&gt; MODIFY j BIGINT <span class="literal">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">100</span><span class="comment">;</span></div></pre></td></tr></table></figure>
<h2 id="修改字段默认值"><a href="#修改字段默认值" class="headerlink" title="修改字段默认值"></a>修改字段默认值</h2><p>可以使用 ALTER 来修改字段的默认值</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">mysql&gt; ALTER TABLE testalter_tbl ALTER i SET DEFAULT 1000;</div><div class="line">mysql&gt; SHOW COLUMNS FROM testalter_tbl;</div><div class="line">+-------+---------+------+-----+---------+-------+</div><div class="line">|<span class="string"> Field </span>|<span class="string"> Type    </span>|<span class="string"> Null </span>|<span class="string"> Key </span>|<span class="string"> Default </span>|<span class="string"> Extra </span>|</div><div class="line">+-------+---------+------+-----+---------+-------+</div><div class="line">|<span class="string"> c     </span>|<span class="string"> char(1) </span>|<span class="string"> YES  </span>|<span class="string">     </span>|<span class="string"> NULL    </span>|<span class="string">       </span>|</div><div class="line">|<span class="string"> i     </span>|<span class="string"> int(11) </span>|<span class="string"> YES  </span>|<span class="string">     </span>|<span class="string"> 1000    </span>|<span class="string">       </span>|</div><div class="line">+-------+---------+------+-----+---------+-------+</div><div class="line">2 rows in set (0.00 sec)</div></pre></td></tr></table></figure>
<p>使用 ALTER 命令及 DROP子句来删除字段的默认值</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">mysql&gt; ALTER TABLE testalter_tbl ALTER i DROP DEFAULT;</div><div class="line">mysql&gt; SHOW COLUMNS FROM testalter_tbl;</div><div class="line">+-------+---------+------+-----+---------+-------+</div><div class="line">|<span class="string"> Field </span>|<span class="string"> Type    </span>|<span class="string"> Null </span>|<span class="string"> Key </span>|<span class="string"> Default </span>|<span class="string"> Extra </span>|</div><div class="line">+-------+---------+------+-----+---------+-------+</div><div class="line">|<span class="string"> c     </span>|<span class="string"> char(1) </span>|<span class="string"> YES  </span>|<span class="string">     </span>|<span class="string"> NULL    </span>|<span class="string">       </span>|</div><div class="line">|<span class="string"> i     </span>|<span class="string"> int(11) </span>|<span class="string"> YES  </span>|<span class="string">     </span>|<span class="string"> NULL    </span>|<span class="string">       </span>|</div><div class="line">+-------+---------+------+-----+---------+-------+</div><div class="line">2 rows in set (0.00 sec)</div><div class="line">Changing a Table Type:</div></pre></td></tr></table></figure>
<p>修改数据表类型，可以使用 ALTER 命令及 TYPE 子句来完成。表 testalter_tbl 的类型修改为 MYISAM </p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">mysql&gt; ALTER TABLE testalter_tbl ENGINE = MYISAM;</div><div class="line">mysql&gt;  SHOW TABLE STATUS LIKE <span class="string">'testalter_tbl'</span>\G</div><div class="line">*************************** <span class="number">1.</span> row ****************</div><div class="line"><span class="attr">           Name:</span> testalter_tbl</div><div class="line"><span class="attr">           Type:</span> MyISAM</div><div class="line"><span class="attr">     Row_format:</span> Fixed</div><div class="line"><span class="attr">           Rows:</span> <span class="number">0</span></div><div class="line"><span class="attr"> Avg_row_length:</span> <span class="number">0</span></div><div class="line"><span class="attr">    Data_length:</span> <span class="number">0</span></div><div class="line"><span class="attr">Max_data_length:</span> <span class="number">25769803775</span></div><div class="line"><span class="attr">   Index_length:</span> <span class="number">1024</span></div><div class="line"><span class="attr">      Data_free:</span> <span class="number">0</span></div><div class="line"><span class="attr"> Auto_increment:</span> <span class="literal">NULL</span></div><div class="line"><span class="attr">    Create_time:</span> <span class="number">2007</span><span class="bullet">-06</span><span class="bullet">-03</span> <span class="number">08</span>:<span class="number">04</span>:<span class="number">36</span></div><div class="line"><span class="attr">    Update_time:</span> <span class="number">2007</span><span class="bullet">-06</span><span class="bullet">-03</span> <span class="number">08</span>:<span class="number">04</span>:<span class="number">36</span></div><div class="line"><span class="attr">     Check_time:</span> <span class="literal">NULL</span></div><div class="line"><span class="attr"> Create_options:</span></div><div class="line"><span class="attr">        Comment:</span></div><div class="line"><span class="number">1</span> row in set (<span class="number">0.00</span> sec)</div></pre></td></tr></table></figure>
<h2 id="修改表名"><a href="#修改表名" class="headerlink" title="修改表名"></a>修改表名</h2><p>修改数据表的名称，可以在 ALTER TABLE 语句中使用 RENAME 子句来实现</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 将数据表 testalter_tbl 重命名为 alter_tbl</span></div><div class="line">mysql&gt; ALTER <span class="keyword">TABLE</span> testalter_tbl <span class="comment">RENAME TO alter_tbl</span>;</div></pre></td></tr></table></figure>
<h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><p>索引分单列索引和组合索引</p>
<p>单列索引，即一个索引只包含单个列，一个表可以有多个单列索引，但这不是组合索引</p>
<p>组合索引，即一个索引包含多个列</p>
<h2 id="普通索引"><a href="#普通索引" class="headerlink" title="普通索引"></a>普通索引</h2><p>这是最基本的索引，它没有任何限制。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// 创建索引</div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> indexName <span class="keyword">ON</span> mytable(username(<span class="keyword">length</span>)); </div><div class="line"></div><div class="line">// 修改表结构(添加索引)</div><div class="line"><span class="keyword">ALTER</span> <span class="keyword">table</span> tableName <span class="keyword">ADD</span> <span class="keyword">INDEX</span> indexName(columnName)</div><div class="line"></div><div class="line">// 创建表的时候直接指定</div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(  </div><div class="line"><span class="keyword">ID</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,   </div><div class="line">username <span class="built_in">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,  </div><div class="line"><span class="keyword">INDEX</span> [indexName] (username(<span class="keyword">length</span>))  </div><div class="line">);</div><div class="line"></div><div class="line">// 删除索引的语法</div><div class="line"><span class="keyword">DROP</span> <span class="keyword">INDEX</span> [indexName] <span class="keyword">ON</span> mytable;</div></pre></td></tr></table></figure>
<h2 id="唯一索引"><a href="#唯一索引" class="headerlink" title="唯一索引"></a>唯一索引</h2><p>索引列的值必须唯一，但允许有空值。如果是组合索引，则列值的组合必须唯一</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">// 创建索引</div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> <span class="keyword">INDEX</span> indexName <span class="keyword">ON</span> mytable(username(<span class="keyword">length</span>)) </div><div class="line"></div><div class="line">// 修改表结构</div><div class="line"><span class="keyword">ALTER</span> <span class="keyword">table</span> mytable <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> [indexName] (username(<span class="keyword">length</span>))</div><div class="line"></div><div class="line">// 创建表的时候直接指定</div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(  </div><div class="line"><span class="keyword">ID</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,   </div><div class="line">username <span class="built_in">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,  </div><div class="line"><span class="keyword">UNIQUE</span> [indexName] (username(<span class="keyword">length</span>))  </div><div class="line">);</div></pre></td></tr></table></figure>
<h2 id="使用ALTER-命令添加和删除索引"><a href="#使用ALTER-命令添加和删除索引" class="headerlink" title="使用ALTER 命令添加和删除索引"></a>使用ALTER 命令添加和删除索引</h2><ul>
<li>ALTER TABLE tbl_name ADD PRIMARY KEY (column_list): 该语句添加一个主键，这意味着索引值必须是唯一的，且不能为NULL</li>
<li>ALTER TABLE tbl_name ADD UNIQUE index_name (column_list): 这条语句创建索引的值必须是唯一的</li>
<li>ALTER TABLE tbl_name ADD INDEX index_name (column_list): 添加普通索引，索引值可出现多次</li>
<li>ALTER TABLE tbl_name ADD FULLTEXT index_name (column_list):该语句指定了索引为 FULLTEXT ，用于全文索引</li>
</ul>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 在表中添加索引</span></div><div class="line">mysql&gt; ALTER <span class="keyword">TABLE</span> testalter_tbl <span class="comment">ADD INDEX (c)</span>;</div><div class="line"></div><div class="line"><span class="comment">// ALTER 命令中使用 DROP 子句来删除索引</span></div><div class="line">mysql&gt; ALTER <span class="keyword">TABLE</span> testalter_tbl <span class="comment">DROP INDEX c</span>;</div></pre></td></tr></table></figure>
<h2 id="使用-ALTER-命令添加和删除主键"><a href="#使用-ALTER-命令添加和删除主键" class="headerlink" title="使用 ALTER 命令添加和删除主键"></a>使用 ALTER 命令添加和删除主键</h2><figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 主键只能作用于一个列上，添加主键索引时，你需要确保该主键默认不为空（NOT NULL）</span></div><div class="line">mysql&gt; ALTER <span class="keyword">TABLE</span> testalter_tbl <span class="comment">MODIFY i INT NOT NULL</span>;</div><div class="line">mysql&gt; ALTER <span class="keyword">TABLE</span> testalter_tbl <span class="comment">ADD PRIMARY KEY (i)</span>;</div><div class="line"></div><div class="line"><span class="comment">// 使用 ALTER 命令删除主键</span></div><div class="line">mysql&gt; ALTER <span class="keyword">TABLE</span> testalter_tbl <span class="comment">DROP PRIMARY KEY</span>;</div></pre></td></tr></table></figure>
<h2 id="显示索引信息"><a href="#显示索引信息" class="headerlink" title="显示索引信息"></a>显示索引信息</h2><p>SHOW INDEX 命令来列出表中的相关的索引信息。可以通过添加 \G 来格式化输出信息</p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SHOW INDEX FROM table_name; \G</div><div class="line">........</div></pre></td></tr></table></figure>
<h1 id="临时表"><a href="#临时表" class="headerlink" title="临时表"></a>临时表</h1><p>MySQL临时表只在当前连接可见，如果你使用PHP脚本来创建MySQL临时表，那每当PHP脚本执行完成后，该临时表也会自动销毁</p>
<p>使用MySQL 临时表的简单实例，以下的SQL代码可以适用于PHP脚本的mysql_query()函数</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">mysql&gt; CREATE TEMPORARY TABLE SalesSummary (</div><div class="line"><span class="code">    -&gt; product_name VARCHAR(50) NOT NULL</span></div><div class="line"><span class="code">    -&gt; , total_sales DECIMAL(12,2) NOT NULL DEFAULT 0.00</span></div><div class="line"><span class="code">    -&gt; , avg_unit_price DECIMAL(7,2) NOT NULL DEFAULT 0.00</span></div><div class="line"><span class="code">    -&gt; , total_units_sold INT UNSIGNED NOT NULL DEFAULT 0</span></div><div class="line">);</div><div class="line">Query OK, 0 rows affected (0.00 sec)</div><div class="line"></div><div class="line">mysql&gt; INSERT INTO SalesSummary</div><div class="line"><span class="code">    -&gt; (product_name, total_sales, avg_unit_price, total_units_sold)</span></div><div class="line"><span class="code">    -&gt; VALUES</span></div><div class="line"><span class="code">    -&gt; ('cucumber', 100.25, 90, 2);</span></div><div class="line"></div><div class="line"><span class="section">mysql&gt; SELECT * FROM SalesSummary;</span></div><div class="line">+--------------+-------------+----------------+------------------+</div><div class="line"><span class="section">| product_name | total_sales | avg_unit_price | total_units_sold |</span></div><div class="line">+--------------+-------------+----------------+------------------+</div><div class="line"><span class="section">| cucumber     |      100.25 |          90.00 |                2 |</span></div><div class="line">+--------------+-------------+----------------+------------------+</div><div class="line">1 row in set (0.00 sec)</div></pre></td></tr></table></figure>
<h2 id="删除MySQL-临时表"><a href="#删除MySQL-临时表" class="headerlink" title="删除MySQL 临时表"></a>删除MySQL 临时表</h2><p>可以在当前MySQL会话使用 DROP TABLE 命令来手动删除临时表</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">mysql&gt; CREATE TEMPORARY TABLE SalesSummary (</div><div class="line"><span class="code">    -&gt; product_name VARCHAR(50) NOT NULL</span></div><div class="line"><span class="code">    -&gt; , total_sales DECIMAL(12,2) NOT NULL DEFAULT 0.00</span></div><div class="line"><span class="code">    -&gt; , avg_unit_price DECIMAL(7,2) NOT NULL DEFAULT 0.00</span></div><div class="line"><span class="code">    -&gt; , total_units_sold INT UNSIGNED NOT NULL DEFAULT 0</span></div><div class="line">);</div><div class="line">Query OK, 0 rows affected (0.00 sec)</div><div class="line"></div><div class="line">mysql&gt; INSERT INTO SalesSummary</div><div class="line"><span class="code">    -&gt; (product_name, total_sales, avg_unit_price, total_units_sold)</span></div><div class="line"><span class="code">    -&gt; VALUES</span></div><div class="line"><span class="code">    -&gt; ('cucumber', 100.25, 90, 2);</span></div><div class="line"></div><div class="line"><span class="section">mysql&gt; SELECT * FROM SalesSummary;</span></div><div class="line">+--------------+-------------+----------------+------------------+</div><div class="line"><span class="section">| product_name | total_sales | avg_unit_price | total_units_sold |</span></div><div class="line">+--------------+-------------+----------------+------------------+</div><div class="line"><span class="section">| cucumber     |      100.25 |          90.00 |                2 |</span></div><div class="line">+--------------+-------------+----------------+------------------+</div><div class="line">1 row in set (0.00 sec)</div><div class="line">mysql&gt; DROP TABLE SalesSummary;</div><div class="line">mysql&gt;  SELECT * FROM SalesSummary;</div><div class="line">ERROR 1146: Table <span class="emphasis">'RUNOOB.SalesSummary'</span> doesn't exist</div></pre></td></tr></table></figure>
<h1 id="复制表"><a href="#复制表" class="headerlink" title="复制表"></a>复制表</h1><ul>
<li>使用 SHOW CREATE TABLE 命令获取创建数据表(CREATE TABLE) 语句，该语句包含了原数据表的结构，索引等</li>
<li>复制以下命令显示的SQL语句，修改数据表名，并执行SQL语句，通过以上命令 将完全的复制数据表结构</li>
<li>如果你想复制表的内容，你就可以使用 INSERT INTO … SELECT 语句来实现</li>
</ul>
<p>获取数据表的完整结构</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SHOW CREATE TABLE runoob_tbl \G;</div><div class="line">*************************** <span class="number">1.</span> row ***************************</div><div class="line">       Table: runoob_tbl</div><div class="line">Create Table: CREATE TABLE <span class="string">`runoob_tbl`</span> (</div><div class="line">  <span class="string">`runoob_id`</span> int(<span class="number">11</span>) <span class="literal">NOT</span> <span class="built_in">NULL</span> auto_increment,</div><div class="line">  <span class="string">`runoob_title`</span> varchar(<span class="number">100</span>) <span class="literal">NOT</span> <span class="built_in">NULL</span> default <span class="string">''</span>,</div><div class="line">  <span class="string">`runoob_author`</span> varchar(<span class="number">40</span>) <span class="literal">NOT</span> <span class="built_in">NULL</span> default <span class="string">''</span>,</div><div class="line">  <span class="string">`submission_date`</span> <span class="built_in">date</span> default <span class="built_in">NULL</span>,</div><div class="line">  PRIMARY KEY  (<span class="string">`runoob_id`</span>),</div><div class="line">  UNIQUE KEY <span class="string">`AUTHOR_INDEX`</span> (<span class="string">`runoob_author`</span>)</div><div class="line">) ENGINE=InnoDB </div><div class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</div><div class="line"></div><div class="line">ERROR:</div><div class="line">No query specified</div></pre></td></tr></table></figure>
<p>修改SQL语句的数据表名，并执行SQL语句</p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">mysql&gt; CREATE TABLE `clone_tbl` (</div><div class="line">  -&gt; `runoob_id` int(<span class="number">11</span>) NOT NULL auto_increment,</div><div class="line">  -&gt; `runoob_title` varchar(<span class="number">100</span>) NOT NULL default <span class="string">''</span>,</div><div class="line">  -&gt; `runoob_author` varchar(<span class="number">40</span>) NOT NULL default <span class="string">''</span>,</div><div class="line">  -&gt; `submission_date` date default NULL,</div><div class="line">  -&gt; PRIMARY KEY  (`runoob_id`),</div><div class="line">  -&gt; UNIQUE KEY `AUTHOR_INDEX` (`runoob_author`)</div><div class="line">-&gt; ) ENGINE=InnoDB;</div><div class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">1.80</span> sec)</div></pre></td></tr></table></figure>
<p>执行完第二步骤后，你将在数据库中创建新的克隆表 clone_tbl。</p>
<p>拷贝数据表的数据你可以使用 INSERT INTO… SELECT 语句来实现</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">mysql&gt; INSERT INTO clone_tbl (runoob_id,</div><div class="line">    -<span class="ruby">&gt;                        runoob_title,</span></div><div class="line">    -<span class="ruby">&gt;                        runoob_author,</span></div><div class="line">    -<span class="ruby">&gt;                        submission_date)</span></div><div class="line">    -<span class="ruby">&gt; SELECT runoob_id,runoob_title,</span></div><div class="line">    -<span class="ruby">&gt;        runoob_author,submission_date</span></div><div class="line">    -<span class="ruby">&gt; FROM runoob_tbl;</span></div><div class="line">Query OK, 3 rows affected (0.07 sec)</div><div class="line">Records: 3  Duplicates: 0  Warnings: 0</div></pre></td></tr></table></figure>
<h1 id="元数据"><a href="#元数据" class="headerlink" title="元数据"></a>元数据</h1><ul>
<li>查询结果信息： SELECT, UPDATE 或 DELETE语句影响的记录数</li>
<li>数据库和数据表的信息： 包含了数据库及数据表的结构信息</li>
<li>MySQL服务器信息： 包含了数据库服务器的当前状态，版本号等</li>
</ul>
<h2 id="获取查询语句影响的记录数"><a href="#获取查询语句影响的记录数" class="headerlink" title="获取查询语句影响的记录数"></a>获取查询语句影响的记录数</h2><p>在 DBI 脚本中， 语句影响的记录数通过函数 do( ) 或 execute( )返回</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 方法 1</span></div><div class="line"><span class="comment"># 使用do( ) 执行  $query </span></div><div class="line"><span class="keyword">my</span> $count = $dbh-&gt;<span class="keyword">do</span> ($query);</div><div class="line"><span class="comment"># 如果发生错误会输出 0</span></div><div class="line"><span class="keyword">printf</span> <span class="string">"%d 条数据被影响\n"</span>, (<span class="keyword">defined</span> ($count) ? $count : <span class="number">0</span>);</div><div class="line"></div><div class="line"><span class="comment"># 方法 2</span></div><div class="line"><span class="comment"># 使用prepare( ) 及 execute( ) 执行  $query </span></div><div class="line"><span class="keyword">my</span> $sth = $dbh-&gt;prepare ($query);</div><div class="line"><span class="keyword">my</span> $count = $sth-&gt;execute ( );</div><div class="line"><span class="keyword">printf</span> <span class="string">"%d 条数据被影响\n"</span>, (<span class="keyword">defined</span> ($count) ? $count : <span class="number">0</span>);</div></pre></td></tr></table></figure>
<p>在PHP中，你可以使用 mysqli_affected_rows( ) 函数来获取查询语句影响的记录数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$result_id</span> = mysqli_query (<span class="variable">$conn_id</span>, <span class="variable">$query</span>);</div><div class="line"><span class="comment"># 如果查询失败返回 </span></div><div class="line"><span class="variable">$count</span> = (<span class="variable">$result_id</span> ? mysqli_affected_rows (<span class="variable">$conn_id</span>) : 0);</div><div class="line"><span class="built_in">print</span> (<span class="string">"<span class="variable">$count</span> 条数据被影响\n"</span>);</div></pre></td></tr></table></figure>
<h2 id="数据库和数据表列表"><a href="#数据库和数据表列表" class="headerlink" title="数据库和数据表列表"></a>数据库和数据表列表</h2><p>在MySQL服务器中获取数据库和数据表列表。 如果你没有足够的权限，结果将返回 null</p>
<p>使用 SHOW TABLES 或 SHOW DATABASES 语句来获取数据库和数据表列表</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 获取当前数据库中所有可用的表。</span></div><div class="line"><span class="keyword">my</span> @tables = $dbh-&gt;tables ( );</div><div class="line"><span class="keyword">foreach</span> $table (@tables )&#123;</div><div class="line">   <span class="keyword">print</span> <span class="string">"表名 $table\n"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>输出 MySQL 服务器上的所有数据库</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$dbhost = <span class="string">'localhost:3306'</span>;  <span class="comment">// mysql服务器主机地址</span></div><div class="line">$dbuser = <span class="string">'root'</span>;            <span class="comment">// mysql用户名</span></div><div class="line">$dbpass = <span class="string">'123456'</span>;          <span class="comment">// mysql用户名密码</span></div><div class="line">$conn = mysqli_connect($dbhost, $dbuser, $dbpass);</div><div class="line"><span class="keyword">if</span>(! $conn )</div><div class="line">&#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">'连接失败: '</span> . mysqli_error($conn));</div><div class="line">&#125;</div><div class="line"><span class="comment">// 设置编码，防止中文乱码</span></div><div class="line">$db_list = mysqli_query($conn, <span class="string">'SHOW DATABASES'</span>);</div><div class="line"><span class="keyword">while</span> ($db = mysqli_fetch_object($db_list))</div><div class="line">&#123;</div><div class="line">  <span class="keyword">echo</span> $db-&gt;Database . <span class="string">"&lt;br /&gt;"</span>;</div><div class="line">&#125;</div><div class="line">mysqli_close($conn);</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h2 id="获取服务器元数据"><a href="#获取服务器元数据" class="headerlink" title="获取服务器元数据"></a>获取服务器元数据</h2><p>在 MySQL 的命令提示符使用，也可以在脚本中 使用，如PHP脚本</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> <span class="keyword">VERSION</span>( )	服务器版本信息</div><div class="line"><span class="keyword">SELECT</span> <span class="keyword">DATABASE</span>( )	当前数据库名 (或者返回空)</div><div class="line"><span class="keyword">SELECT</span> <span class="keyword">USER</span>( )	当前用户名</div><div class="line"><span class="keyword">SHOW</span> <span class="keyword">STATUS</span>	服务器状态</div><div class="line"><span class="keyword">SHOW</span> <span class="keyword">VARIABLES</span>	服务器配置变量</div></pre></td></tr></table></figure>
<h1 id="序列使用"><a href="#序列使用" class="headerlink" title="序列使用"></a>序列使用</h1><p>MySQL序列是一组整数：1, 2, 3, …，由于一张数据表只能有一个字段自增主键</p>
<h2 id="使用AUTO-INCREMENT"><a href="#使用AUTO-INCREMENT" class="headerlink" title="使用AUTO_INCREMENT"></a>使用AUTO_INCREMENT</h2><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">mysql&gt; CREATE TABLE insect</div><div class="line"><span class="code">    -&gt; (</span></div><div class="line"><span class="code">    -&gt; id INT UNSIGNED NOT NULL AUTO_INCREMENT,</span></div><div class="line"><span class="code">    -&gt; PRIMARY KEY (id),</span></div><div class="line"><span class="code">    -&gt; name VARCHAR(30) NOT NULL, # type of insect</span></div><div class="line"><span class="code">    -&gt; date DATE NOT NULL, # date collected</span></div><div class="line"><span class="code">    -&gt; origin VARCHAR(30) NOT NULL # where collected</span></div><div class="line">);</div><div class="line">Query OK, 0 rows affected (0.02 sec)</div><div class="line">mysql&gt; INSERT INTO insect (id,name,date,origin) VALUES</div><div class="line"><span class="code">    -&gt; (NULL,'housefly','2001-09-10','kitchen'),</span></div><div class="line"><span class="code">    -&gt; (NULL,'millipede','2001-09-10','driveway'),</span></div><div class="line"><span class="code">    -&gt; (NULL,'grasshopper','2001-09-10','front yard');</span></div><div class="line">Query OK, 3 rows affected (0.02 sec)</div><div class="line">Records: 3  Duplicates: 0  Warnings: 0</div><div class="line"><span class="section">mysql&gt; SELECT * FROM insect ORDER BY id;</span></div><div class="line">+----+-------------+------------+------------+</div><div class="line"><span class="section">| id | name        | date       | origin     |</span></div><div class="line">+----+-------------+------------+------------+</div><div class="line">|  1 | housefly    | 2001-09-10 | kitchen    |</div><div class="line">|  2 | millipede   | 2001-09-10 | driveway   |</div><div class="line"><span class="section">|  3 | grasshopper | 2001-09-10 | front yard |</span></div><div class="line">+----+-------------+------------+------------+</div><div class="line">3 rows in set (0.00 sec)</div></pre></td></tr></table></figure>
<h2 id="获取AUTO-INCREMENT值"><a href="#获取AUTO-INCREMENT值" class="headerlink" title="获取AUTO_INCREMENT值"></a>获取AUTO_INCREMENT值</h2><p>使用 mysql_insertid 属性来获取 AUTO_INCREMENT 的值</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$dbh</span>-&gt;<span class="keyword">do</span> (<span class="string">"INSERT INTO insect (name,date,origin)</span></div><div class="line">VALUES('moth','2001-09-14','windowsill')");</div><div class="line">my <span class="variable">$seq</span> = <span class="variable">$dbh</span>-&gt;&#123;mysql_insertid&#125;;</div></pre></td></tr></table></figure>
<p>PHP 通过 mysql_insert_id ()函数来获取执行的插入SQL语句中 AUTO_INCREMENT列的值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mysql_query ("<span class="keyword">INSERT</span> <span class="keyword">INTO</span> insect (<span class="keyword">name</span>,<span class="built_in">date</span>,origin)</div><div class="line"><span class="keyword">VALUES</span>(<span class="string">'moth'</span>,<span class="string">'2001-09-14'</span>,<span class="string">'windowsill'</span>)<span class="string">", $conn_id);</span></div><div class="line">$seq = mysql_insert_id ($conn_id);</div></pre></td></tr></table></figure>
<h2 id="重置序列"><a href="#重置序列" class="headerlink" title="重置序列"></a>重置序列</h2><p>删除了数据表中的多条记录，对剩下数据的AUTO_INCREMENT列进行重新排列，可以通过删除自增的列，重新添加来实现</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mysql&gt; ALTER <span class="keyword">TABLE</span> insect <span class="comment">DROP id</span>;</div><div class="line">mysql&gt; ALTER <span class="keyword">TABLE</span> insect</div><div class="line">    -&gt; ADD id INT UNSIGNED NOT NULL AUTO_INCREMENT FIRST,</div><div class="line">    -&gt; ADD PRIMARY KEY (id);</div></pre></td></tr></table></figure>
<h2 id="设置序列的开始值"><a href="#设置序列的开始值" class="headerlink" title="设置序列的开始值"></a>设置序列的开始值</h2><p>序列的开始值为1，需要指定一个开始值100，通过以下语句</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">mysql&gt; <span class="keyword">CREATE</span> TABLE insect</div><div class="line">    -&gt; (</div><div class="line">    -&gt; id INT UNSIGNED <span class="keyword">NOT</span> <span class="built_in">NULL</span> AUTO_INCREMENT,</div><div class="line">    -&gt; PRIMARY <span class="built_in">KEY</span> (id),</div><div class="line">    -&gt; name VARCHAR(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="built_in">NULL</span>, </div><div class="line">    -&gt; <span class="built_in">date</span> <span class="built_in">DATE</span> <span class="keyword">NOT</span> <span class="built_in">NULL</span>,</div><div class="line">    -&gt; origin VARCHAR(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="built_in">NULL</span></div><div class="line">)engine=innodb auto_increment=<span class="number">100</span> charset=utf8;</div></pre></td></tr></table></figure>
<p>或者你也可以在表创建成功后，通过以下语句来实现</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; ALTER <span class="keyword">TABLE</span> t <span class="comment">AUTO_INCREMENT = 100</span>;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h1&gt;&lt;h2 id=&quot;数据库简介&quot;&gt;&lt;a href=&quot;#数据库简介&quot; class=&quot;headerlink&quot; title=&quot;数据库简介&quot;&gt;&lt;/a&gt;数据库简介&lt;/h2&gt;&lt;p&gt;数据库是按照数据结构来组织、存储和管理数据的&lt;br&gt;
    
    </summary>
    
      <category term="BackEnd" scheme="http://yoursite.com/categories/BackEnd/"/>
    
    
      <category term="MySQL" scheme="http://yoursite.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>PHP表单</title>
    <link href="http://yoursite.com/2018/07/23/2018.7.23/"/>
    <id>http://yoursite.com/2018/07/23/2018.7.23/</id>
    <published>2018-07-23T15:16:41.000Z</published>
    <updated>2018-07-22T13:55:21.371Z</updated>
    
    <content type="html"><![CDATA[<h1 id="PHP-表单和用户输入"><a href="#PHP-表单和用户输入" class="headerlink" title="PHP 表单和用户输入"></a>PHP 表单和用户输入</h1><p>PHP 中的 $_GET 和 $_POST 变量用于检索表单中的信息，比如用户输入<br><a id="more"></a></p>
<h2 id="PHP-表单处理"><a href="#PHP-表单处理" class="headerlink" title="PHP 表单处理"></a>PHP 表单处理</h2><p>当处理 HTML 表单时，PHP 能把来自 HTML 页面中的表单元素自动变成可供 PHP 脚本使用</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">// HTML 表单，带有两个输入框和一个提交按钮</div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"> </div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"welcome.php"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">名字: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"fname"</span>&gt;</span></div><div class="line">年龄: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"age"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"> </div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>当用户填写完上面的表单并点击提交按钮时，表单的数据会被送往名为 “welcome.php” 的 PHP 文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">// welcome.php</div><div class="line">欢迎<span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $_POST[<span class="string">"fname"</span>]; <span class="meta">?&gt;</span></span>!<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">你的年龄是 <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $_POST[<span class="string">"age"</span>]; <span class="meta">?&gt;</span></span>  岁。</div></pre></td></tr></table></figure>
<h2 id="PHP-获取下拉菜单的数据"><a href="#PHP-获取下拉菜单的数据" class="headerlink" title="PHP 获取下拉菜单的数据"></a>PHP 获取下拉菜单的数据</h2><p>PHP 下拉菜单单选</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">// 表单使用 GET 方式获取数据</div><div class="line">// action 属性值为空表示提交到当前脚本</div><div class="line">// 通过 select 的 name 属性获取下拉菜单的值</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$q = <span class="keyword">isset</span>($_GET[<span class="string">'q'</span>])? htmlspecialchars($_GET[<span class="string">'q'</span>]) : <span class="string">''</span>;</div><div class="line"><span class="keyword">if</span>($q) &#123;</div><div class="line">        <span class="keyword">if</span>($q ==<span class="string">'RUNOOB'</span>) &#123;</div><div class="line">                <span class="keyword">echo</span> <span class="string">'菜鸟教程&lt;br&gt;http://www.runoob.com'</span>;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>($q ==<span class="string">'GOOGLE'</span>) &#123;</div><div class="line">                <span class="keyword">echo</span> <span class="string">'Google 搜索&lt;br&gt;http://www.google.com'</span>;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>($q ==<span class="string">'TAOBAO'</span>) &#123;</div><div class="line">                <span class="keyword">echo</span> <span class="string">'淘宝&lt;br&gt;http://www.taobao.com'</span>;</div><div class="line">        &#125;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">"q"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>选择一个站点:<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"RUNOOB"</span>&gt;</span>Runoob<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"GOOGLE"</span>&gt;</span>Google<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"TAOBAO"</span>&gt;</span>Taobao<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">&#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>PHP 下拉菜单多选</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">// 设置 select name="q[]" 以数组的方式获取</div><div class="line">// 使用 POST 方式提交</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$q = <span class="keyword">isset</span>($_POST[<span class="string">'q'</span>])? $_POST[<span class="string">'q'</span>] : <span class="string">''</span>;</div><div class="line"><span class="keyword">if</span>(is_array($q)) &#123;</div><div class="line">    $sites = <span class="keyword">array</span>(</div><div class="line">            <span class="string">'RUNOOB'</span> =&gt; <span class="string">'菜鸟教程: http://www.runoob.com'</span>,</div><div class="line">            <span class="string">'GOOGLE'</span> =&gt; <span class="string">'Google 搜索: http://www.google.com'</span>,</div><div class="line">            <span class="string">'TAOBAO'</span> =&gt; <span class="string">'淘宝: http://www.taobao.com'</span>,</div><div class="line">    );</div><div class="line">    <span class="keyword">foreach</span>($q <span class="keyword">as</span> $val) &#123;</div><div class="line">        <span class="comment">// PHP_EOL 为常量，用于换行</span></div><div class="line">        <span class="keyword">echo</span> $sites[$val] . PHP_EOL;</div><div class="line">    &#125;</div><div class="line">      </div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">multiple</span>=<span class="string">"multiple"</span> <span class="attr">name</span>=<span class="string">"q[]"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>选择一个站点:<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"RUNOOB"</span>&gt;</span>Runoob<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"GOOGLE"</span>&gt;</span>Google<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"TAOBAO"</span>&gt;</span>Taobao<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">&#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h2 id="单选按钮表单"><a href="#单选按钮表单" class="headerlink" title="单选按钮表单"></a>单选按钮表单</h2><p>PHP 单选按钮表单中 name 属性的值是一致的，value 值是不同的</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$q = <span class="keyword">isset</span>($_GET[<span class="string">'q'</span>])? htmlspecialchars($_GET[<span class="string">'q'</span>]) : <span class="string">''</span>;</div><div class="line"><span class="keyword">if</span>($q) &#123;</div><div class="line">        <span class="keyword">if</span>($q ==<span class="string">'RUNOOB'</span>) &#123;</div><div class="line">                <span class="keyword">echo</span> <span class="string">'菜鸟教程&lt;br&gt;http://www.runoob.com'</span>;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>($q ==<span class="string">'GOOGLE'</span>) &#123;</div><div class="line">                <span class="keyword">echo</span> <span class="string">'Google 搜索&lt;br&gt;http://www.google.com'</span>;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>($q ==<span class="string">'TAOBAO'</span>) &#123;</div><div class="line">                <span class="keyword">echo</span> <span class="string">'淘宝&lt;br&gt;http://www.taobao.com'</span>;</div><div class="line">        &#125;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line"><span class="meta">?&gt;</span><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"q"</span> <span class="attr">value</span>=<span class="string">"RUNOOB"</span> /&gt;</span>Runoob</div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"q"</span> <span class="attr">value</span>=<span class="string">"GOOGLE"</span> /&gt;</span>Google</div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"q"</span> <span class="attr">value</span>=<span class="string">"TAOBAO"</span> /&gt;</span>Taobao</div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">&#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h2 id="checkbox-复选框"><a href="#checkbox-复选框" class="headerlink" title="checkbox 复选框"></a>checkbox 复选框</h2><p>PHP checkbox 复选框可以选择多个值</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">$q = <span class="keyword">isset</span>($_POST[<span class="string">'q'</span>])? $_POST[<span class="string">'q'</span>] : <span class="string">''</span>;</div><div class="line"><span class="keyword">if</span>(is_array($q)) &#123;</div><div class="line">    $sites = <span class="keyword">array</span>(</div><div class="line">            <span class="string">'RUNOOB'</span> =&gt; <span class="string">'菜鸟教程: http://www.runoob.com'</span>,</div><div class="line">            <span class="string">'GOOGLE'</span> =&gt; <span class="string">'Google 搜索: http://www.google.com'</span>,</div><div class="line">            <span class="string">'TAOBAO'</span> =&gt; <span class="string">'淘宝: http://www.taobao.com'</span>,</div><div class="line">    );</div><div class="line">    <span class="keyword">foreach</span>($q <span class="keyword">as</span> $val) &#123;</div><div class="line">        <span class="comment">// PHP_EOL 为常量，用于换行</span></div><div class="line">        <span class="keyword">echo</span> $sites[$val] . PHP_EOL;</div><div class="line">    &#125;</div><div class="line">      </div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line"><span class="meta">?&gt;</span><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"q[]"</span> <span class="attr">value</span>=<span class="string">"RUNOOB"</span>&gt;</span> Runoob<span class="tag">&lt;<span class="name">br</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"q[]"</span> <span class="attr">value</span>=<span class="string">"GOOGLE"</span>&gt;</span> Google<span class="tag">&lt;<span class="name">br</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"q[]"</span> <span class="attr">value</span>=<span class="string">"TAOBAO"</span>&gt;</span> Taobao<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">&#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h1 id="PHP-表单验证"><a href="#PHP-表单验证" class="headerlink" title="PHP 表单验证"></a>PHP 表单验证</h1><p>在处理PHP表单时我们需要考虑安全性</p>
<h2 id="PHP-表单验证实例"><a href="#PHP-表单验证实例" class="headerlink" title="PHP 表单验证实例"></a>PHP 表单验证实例</h2><ul>
<li>名字: 必须。 +只能包含字母和空格</li>
<li>E-mail: 必须。 + 必须是一个有效的电子邮件地址（包含’@’和’.’）</li>
<li>性别: 必须。 必须选择一个</li>
<li>网址: 可选。如果存在，它必须包含一个有效的URL</li>
<li>备注: 可选。多行输入字段（文本域）</li>
</ul>
<figure class="highlight django"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="meta">&lt;!DOCTYPE HTML&gt;</span> </span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line"><span class="selector-class">.error</span> &#123;<span class="attribute">color</span>: <span class="number">#FF0000</span>;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span> </div><div class="line"></div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="comment">// 定义变量并默认设置为空值</span></div><div class="line">$nameErr = $emailErr = $genderErr = $websiteErr = <span class="string">""</span>;</div><div class="line">$name = $email = $gender = $comment = $website = <span class="string">""</span>;</div><div class="line"></div><div class="line"><span class="keyword">if</span> ($_SERVER[<span class="string">"REQUEST_METHOD"</span>] == <span class="string">"POST"</span>)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"name"</span>]))</div><div class="line">    &#123;</div><div class="line">        $nameErr = <span class="string">"名字是必需的"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">        $name = test_input($_POST[<span class="string">"name"</span>]);</div><div class="line">        <span class="comment">// 检测名字是否只包含字母跟空格</span></div><div class="line">        <span class="keyword">if</span> (!preg_match(<span class="string">"/^[a-zA-Z ]*$/"</span>,$name))</div><div class="line">        &#123;</div><div class="line">            $nameErr = <span class="string">"只允许字母和空格"</span>; </div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"email"</span>]))</div><div class="line">    &#123;</div><div class="line">      $emailErr = <span class="string">"邮箱是必需的"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">        $email = test_input($_POST[<span class="string">"email"</span>]);</div><div class="line">        <span class="comment">// 检测邮箱是否合法</span></div><div class="line">        <span class="keyword">if</span> (!preg_match(<span class="string">"/([\w\-]+\@[\w\-]+\.[\w\-]+)/"</span>,$email))</div><div class="line">        &#123;</div><div class="line">            $emailErr = <span class="string">"非法邮箱格式"</span>; </div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"website"</span>]))</div><div class="line">    &#123;</div><div class="line">        $website = <span class="string">""</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">        $website = test_input($_POST[<span class="string">"website"</span>]);</div><div class="line">        <span class="comment">// 检测 URL 地址是否合法</span></div><div class="line">        <span class="keyword">if</span> (!preg_match(<span class="string">"/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&amp;@#\/%?=~_|!:,.;]*[-a-z0-9+&amp;@#\/%=~_|]/i"</span>,$website))</div><div class="line">        &#123;</div><div class="line">            $websiteErr = <span class="string">"非法的 URL 的地址"</span>; </div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"comment"</span>]))</div><div class="line">    &#123;</div><div class="line">        $comment = <span class="string">""</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">        $comment = test_input($_POST[<span class="string">"comment"</span>]);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"gender"</span>]))</div><div class="line">    &#123;</div><div class="line">        $genderErr = <span class="string">"性别是必需的"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">        $gender = test_input($_POST[<span class="string">"gender"</span>]);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test_input</span><span class="params">($data)</span></span></div><div class="line">&#123;</div><div class="line">    $data = trim($data);</div><div class="line">    $data = stripslashes($data);</div><div class="line">    $data = htmlspecialchars($data);</div><div class="line">    <span class="keyword">return</span> $data;</div><div class="line">&#125;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>PHP 表单验证实例<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span>* 必需字段。<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"&lt;?php echo htmlspecialchars($_SERVER["</span><span class="attr">PHP_SELF</span>"]);?&gt;</span>"&gt; </div><div class="line">   名字: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"&lt;?php echo $name;?&gt;"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span>* <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $nameErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   E-mail: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">value</span>=<span class="string">"&lt;?php echo $email;?&gt;"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span>* <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $emailErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   网址: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"website"</span> <span class="attr">value</span>=<span class="string">"&lt;?php echo $website;?&gt;"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span><span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $websiteErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   备注: <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">"comment"</span> <span class="attr">rows</span>=<span class="string">"5"</span> <span class="attr">cols</span>=<span class="string">"40"</span>&gt;</span><span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $comment;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   性别:</div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> &lt;?<span class="attr">php</span> <span class="attr">if</span> (<span class="attr">isset</span>($<span class="attr">gender</span>) &amp;&amp; $<span class="attr">gender</span>==<span class="string">"female"</span>) <span class="attr">echo</span> "<span class="attr">checked</span>";?&gt;</span>  value="female"&gt;女</div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> &lt;?<span class="attr">php</span> <span class="attr">if</span> (<span class="attr">isset</span>($<span class="attr">gender</span>) &amp;&amp; $<span class="attr">gender</span>==<span class="string">"male"</span>) <span class="attr">echo</span> "<span class="attr">checked</span>";?&gt;</span>  value="male"&gt;男</div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span>* <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $genderErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">name</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Submit"</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;h2&gt;您输入的内容是:&lt;/h2&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $name;</div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $email;</div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $website;</div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $comment;</div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $gender;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="表单元素"><a href="#表单元素" class="headerlink" title="表单元素"></a>表单元素</h2><p>$_SERVER[“PHP_SELF”] 会发送表单数据到当前页面，而不是跳转到不同的页面</p>
<p>htmlspecialchars():把一些预定义的字符转换为 HTML 实体</p>
<figure class="highlight monkey"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// 使用 <span class="function"><span class="keyword">method</span>=</span><span class="string">"post"</span> 方法来提交数据</div><div class="line">&lt;form <span class="function"><span class="keyword">method</span>=</span><span class="string">"post"</span> action=<span class="string">"&lt;?php echo htmlspecialchars($_SERVER["</span>PHP_SELF<span class="string">"]);?&gt;"</span>&gt;</div></pre></td></tr></table></figure>
<h2 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h2><p>XSS又叫 CSS (Cross-Site Script) ,跨站脚本攻击</p>
<p>$_SERVER[“PHP_SELF”]的字符串就会包含HTTP链接后面的JavaScript程序代码,</p>
<p>利用这点重定向页面到另外一台服务器的页面上，页面 代码文件中可以保护恶意代码，代码可以修改全局变量或者获取用户的表单数据</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// test_form.php</span></div><div class="line">&lt;<span class="selector-tag">form</span> method=<span class="string">"post"</span> action=<span class="string">"&lt;?php echo $_SERVER["</span>PHP_SELF<span class="string">"];?&gt;"</span>&gt;</div><div class="line"></div><div class="line"><span class="comment">// 使用URL来指定提交地址 "test_form.php",以上代码修改为</span></div><div class="line">&lt;<span class="selector-tag">form</span> method=<span class="string">"post"</span> action=<span class="string">"test_form.php"</span>&gt;</div><div class="line"></div><div class="line"><span class="comment">// 考虑到用户会在浏览器地址栏中输入以下地址</span></div><div class="line">http:<span class="comment">//www.runoob.com/test_form.php/%22%3E%3Cscript%3Ealert('hacked')%3C/script%3E</span></div><div class="line"></div><div class="line"><span class="comment">// 代码被解析为</span></div><div class="line">&lt;<span class="selector-tag">form</span> method=<span class="string">"post"</span> action=<span class="string">"test_form.php/"</span>&gt;&lt;script&gt;alert(<span class="string">'hacked'</span>)&lt;/script&gt;</div></pre></td></tr></table></figure>
<h2 id="防止XXS"><a href="#防止XXS" class="headerlink" title="防止XXS"></a>防止XXS</h2><p>$_SERVER[“PHP_SELF”] 可以通过 htmlspecialchars() 函数来避免被利用</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// htmlspecialchars() 把一些预定义的字符转换为 HTML 实体</span></div><div class="line">&lt;<span class="selector-tag">form</span> method=<span class="string">"post"</span> action=<span class="string">"&lt;?php echo htmlspecialchars($_SERVER["</span>PHP_SELF<span class="string">"]);?&gt;"</span>&gt;</div><div class="line"></div><div class="line"><span class="comment">// 结果输出</span></div><div class="line">&lt;<span class="selector-tag">form</span> method=<span class="string">"post"</span> action=<span class="string">"test_form.php/&amp;quot;&amp;gt;&amp;lt;script&amp;gt;alert('hacked')&amp;lt;/script&amp;gt;"</span>&gt;</div></pre></td></tr></table></figure>
<h2 id="验证表单数据"><a href="#验证表单数据" class="headerlink" title="验证表单数据"></a>验证表单数据</h2><p>test_input封装过滤的数据</p>
<ul>
<li>用户所有提交的数据都通过 PHP 的 htmlspecialchars() 函数处理</li>
<li>使用 PHP trim() 函数去除用户输入数据中不必要的字符 (如：空格，tab，换行)</li>
<li>使用PHP stripslashes()函数去除用户输入数据中的反斜杠 ()</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">// REQUEST_METHOD 是 POST, 表单将被提交 - 数据将被验证</div><div class="line">// 如果表单未提交将跳过验证并显示空白</div><div class="line"><span class="meta">&lt;!DOCTYPE HTML&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span> </div><div class="line"></div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="comment">// 定义变量并默认设置为空值</span></div><div class="line">$name = $email = $gender = $comment = $website = <span class="string">""</span>;</div><div class="line"></div><div class="line"><span class="keyword">if</span> ($_SERVER[<span class="string">"REQUEST_METHOD"</span>] == <span class="string">"POST"</span>)</div><div class="line">&#123;</div><div class="line">   $name = test_input($_POST[<span class="string">"name"</span>]);</div><div class="line">   $email = test_input($_POST[<span class="string">"email"</span>]);</div><div class="line">   $website = test_input($_POST[<span class="string">"website"</span>]);</div><div class="line">   $comment = test_input($_POST[<span class="string">"comment"</span>]);</div><div class="line">   $gender = test_input($_POST[<span class="string">"gender"</span>]);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test_input</span><span class="params">($data)</span></span></div><div class="line">&#123;</div><div class="line">   $data = trim($data);</div><div class="line">   $data = stripslashes($data);</div><div class="line">   $data = htmlspecialchars($data);</div><div class="line">   <span class="keyword">return</span> $data;</div><div class="line">&#125;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>PHP 表单验证实例<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"&lt;?php echo htmlspecialchars($_SERVER["</span><span class="attr">PHP_SELF</span>"]);?&gt;</span>"&gt; </div><div class="line">   名字: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   E-mail: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   网址: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"website"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   备注: <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">"comment"</span> <span class="attr">rows</span>=<span class="string">"5"</span> <span class="attr">cols</span>=<span class="string">"40"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   性别:</div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">"female"</span>&gt;</span>女</div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">"male"</span>&gt;</span>男</div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">name</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Submit"</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;h2&gt;您输入的内容是:&lt;/h2&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $name;</div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $email;</div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $website;</div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $comment;</div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $gender;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="PHP-表单-必需字段"><a href="#PHP-表单-必需字段" class="headerlink" title="PHP 表单 - 必需字段"></a>PHP 表单 - 必需字段</h1><p>设置表单必需字段及错误信息</p>
<h2 id="PHP-必需字段"><a href="#PHP-必需字段" class="headerlink" title="PHP - 必需字段"></a>PHP - 必需字段</h2><p>加入了一些新的变量: $nameErr, $emailErr, $genderErr, 和 $websiteErr,这些错误变量将显示在必需字段上</p>
<p>为每个$_POST变量增加了一个if else语句,这些语句将检查 $_POST 变量是 否为空（使用php的 empty() 函数）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">// 如果为空，将显示对应的错误信息。 如果不为空，数据将传递给test_input() 函数</div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="comment">// 定义变量并默认设为空值</span></div><div class="line">$nameErr = $emailErr = $genderErr = $websiteErr = <span class="string">""</span>;</div><div class="line">$name = $email = $gender = $comment = $website = <span class="string">""</span>;</div><div class="line"></div><div class="line"><span class="keyword">if</span> ($_SERVER[<span class="string">"REQUEST_METHOD"</span>] == <span class="string">"POST"</span>) &#123;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"name"</span>])) &#123;</div><div class="line">    $nameErr = <span class="string">"名字是必需的。"</span>;</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    $name = test_input($_POST[<span class="string">"name"</span>]);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"email"</span>])) &#123;</div><div class="line">    $emailErr = <span class="string">"邮箱是必需的。"</span>;</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    $email = test_input($_POST[<span class="string">"email"</span>]);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"website"</span>])) &#123;</div><div class="line">    $website = <span class="string">""</span>;</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    $website = test_input($_POST[<span class="string">"website"</span>]);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"comment"</span>])) &#123;</div><div class="line">    $comment = <span class="string">""</span>;</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    $comment = test_input($_POST[<span class="string">"comment"</span>]);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"gender"</span>])) &#123;</div><div class="line">    $genderErr = <span class="string">"性别是必需的。"</span>;</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    $gender = test_input($_POST[<span class="string">"gender"</span>]);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h2 id="PHP-显示错误信息"><a href="#PHP-显示错误信息" class="headerlink" title="PHP - 显示错误信息"></a>PHP - 显示错误信息</h2><p>为每个字段中添加了一些脚本， 各个脚本会在信息输入错误时显示错误信息</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">// 如果用户未填写信息就提交表单则会输出错误信息</div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"&lt;?php echo htmlspecialchars($_SERVER['PHP_SELF']);?&gt;"</span>&gt;</span> </div><div class="line">   名字: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span>* <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $nameErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   E-mail: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span>* <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $emailErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   网址: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"website"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span><span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $websiteErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   备注: <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">"comment"</span> <span class="attr">rows</span>=<span class="string">"5"</span> <span class="attr">cols</span>=<span class="string">"40"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   性别:</div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">"female"</span>&gt;</span>女</div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">"male"</span>&gt;</span>男</div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span>* <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $genderErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">name</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Submit"</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="PHP-表单-验证邮件和URL"><a href="#PHP-表单-验证邮件和URL" class="headerlink" title="PHP 表单 - 验证邮件和URL"></a>PHP 表单 - 验证邮件和URL</h1><p>验证 names(名称), e-mails（邮件）, 和 URLs</p>
<h2 id="PHP-验证名称"><a href="#PHP-验证名称" class="headerlink" title="PHP - 验证名称"></a>PHP - 验证名称</h2><p>通过简单的方式来检测 name 字段是否包含字母和空格，如果 name 字段值不合法，将输出错误信息</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$name = test_input($_POST[<span class="string">"name"</span>])<span class="comment">;</span></div><div class="line"><span class="keyword">if</span> (!preg_match(<span class="string">"/^[a-zA-Z ]*$/"</span>,$name)) &#123;</div><div class="line">  $nameErr = <span class="string">"只允许字母和空格"</span><span class="comment">; </span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="PHP-验证邮件"><a href="#PHP-验证邮件" class="headerlink" title="PHP - 验证邮件"></a>PHP - 验证邮件</h2><p>通过简单的方式来检测 e-mail 地址是否合法。如果 e-mail 地址不合法，将输出错误信息</p>
<figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">$email = test_input</span>($_POST["email"]);</div><div class="line">if (!preg_match("/([<span class="symbol">\w</span><span class="symbol">\-</span>]+<span class="symbol">\@</span>[<span class="symbol">\w</span><span class="symbol">\-</span>]+<span class="symbol">\.</span>[<span class="symbol">\w</span><span class="symbol">\-</span>]+)/",<span class="keyword">$email)) &#123;</span></div><div class="line">  $emailErr = "非法邮箱格式"; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="PHP-验证-URL"><a href="#PHP-验证-URL" class="headerlink" title="PHP - 验证 URL"></a>PHP - 验证 URL</h2><p>检测URL地址是否合法 (以下正则表达式运行URL中含有破折号:”-“)， 如果 URL 地址不合法，将输出错误信息</p>
<figure class="highlight smalltalk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="string">$w</span>ebsite = test_input(<span class="string">$_</span>POST[<span class="comment">"website"</span>]);</div><div class="line">if (!preg_match(<span class="comment">"/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&amp;@#\/%?=~_|!:,.;]*[-a-z0-9+&amp;@#\/%=~_|]/i"</span>,<span class="string">$w</span>ebsite)) &#123;</div><div class="line">  <span class="string">$w</span>ebsiteErr = <span class="comment">"非法的 URL 的地址"</span>; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="PHP-验证-Name-E-mail-和-URL"><a href="#PHP-验证-Name-E-mail-和-URL" class="headerlink" title="PHP - 验证 Name, E-mail, 和 URL"></a>PHP - 验证 Name, E-mail, 和 URL</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE HTML&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line"><span class="selector-class">.error</span> &#123;<span class="attribute">color</span>: <span class="number">#FF0000</span>;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span> </div><div class="line"></div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="comment">// 定义变量并默认设置为空值</span></div><div class="line">$nameErr = $emailErr = $genderErr = $websiteErr = <span class="string">""</span>;</div><div class="line">$name = $email = $gender = $comment = $website = <span class="string">""</span>;</div><div class="line"></div><div class="line"><span class="keyword">if</span> ($_SERVER[<span class="string">"REQUEST_METHOD"</span>] == <span class="string">"POST"</span>) &#123;</div><div class="line">   <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"name"</span>])) &#123;</div><div class="line">      $nameErr = <span class="string">"Name is required"</span>;</div><div class="line">      &#125; <span class="keyword">else</span> &#123;</div><div class="line">         $name = test_input($_POST[<span class="string">"name"</span>]);</div><div class="line">         <span class="comment">// 检测名字是否只包含字母跟空格</span></div><div class="line">         <span class="keyword">if</span> (!preg_match(<span class="string">"/^[a-zA-Z ]*$/"</span>,$name)) &#123;</div><div class="line">         $nameErr = <span class="string">"只允许字母和空格"</span>; </div><div class="line">         &#125;</div><div class="line">     &#125;</div><div class="line">   </div><div class="line">   <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"email"</span>])) &#123;</div><div class="line">      $emailErr = <span class="string">"Email is required"</span>;</div><div class="line">   &#125; <span class="keyword">else</span> &#123;</div><div class="line">      $email = test_input($_POST[<span class="string">"email"</span>]);</div><div class="line">      <span class="comment">// 检测邮箱是否合法</span></div><div class="line">      <span class="keyword">if</span> (!preg_match(<span class="string">"/([\w\-]+\@[\w\-]+\.[\w\-]+)/"</span>,$email)) &#123;</div><div class="line">         $emailErr = <span class="string">"非法邮箱格式"</span>; </div><div class="line">      &#125;</div><div class="line">   &#125;</div><div class="line">     </div><div class="line">   <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"website"</span>])) &#123;</div><div class="line">      $website = <span class="string">""</span>;</div><div class="line">   &#125; <span class="keyword">else</span> &#123;</div><div class="line">      $website = test_input($_POST[<span class="string">"website"</span>]);</div><div class="line">      <span class="comment">// 检测 URL 地址是否合法</span></div><div class="line">     <span class="keyword">if</span> (!preg_match(<span class="string">"/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&amp;@#\/%?=~_|!:,.;]*[-a-z0-9+&amp;@#\/%=~_|]/i"</span>,$website)) &#123;</div><div class="line">         $websiteErr = <span class="string">"非法的 URL 的地址"</span>; </div><div class="line">      &#125;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"comment"</span>])) &#123;</div><div class="line">      $comment = <span class="string">""</span>;</div><div class="line">   &#125; <span class="keyword">else</span> &#123;</div><div class="line">      $comment = test_input($_POST[<span class="string">"comment"</span>]);</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"gender"</span>])) &#123;</div><div class="line">      $genderErr = <span class="string">"性别是必需的"</span>;</div><div class="line">   &#125; <span class="keyword">else</span> &#123;</div><div class="line">      $gender = test_input($_POST[<span class="string">"gender"</span>]);</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test_input</span><span class="params">($data)</span> </span>&#123;</div><div class="line">   $data = trim($data);</div><div class="line">   $data = stripslashes($data);</div><div class="line">   $data = htmlspecialchars($data);</div><div class="line">   <span class="keyword">return</span> $data;</div><div class="line">&#125;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>PHP 表单验证实例<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span>* 必需字段。<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"&lt;?php echo htmlspecialchars($_SERVER["</span><span class="attr">PHP_SELF</span>"]);?&gt;</span>"&gt; </div><div class="line">   名字: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span>* <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $nameErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   E-mail: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span>* <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $emailErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   网址: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"website"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span><span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $websiteErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   备注: <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">"comment"</span> <span class="attr">rows</span>=<span class="string">"5"</span> <span class="attr">cols</span>=<span class="string">"40"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   性别:</div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">"female"</span>&gt;</span>女</div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">"male"</span>&gt;</span>男</div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span>* <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $genderErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">name</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Submit"</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;h2&gt;您输入的内容是:&lt;/h2&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $name;</div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $email;</div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $website;</div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $comment;</div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $gender;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="PHP-完整表单实例"><a href="#PHP-完整表单实例" class="headerlink" title="PHP 完整表单实例"></a>PHP 完整表单实例</h1><p>用户在点击”提交（submit）”按钮提交数据前保证所有字段正确输入</p>
<h2 id="PHP-在表单中确保输入值"><a href="#PHP-在表单中确保输入值" class="headerlink" title="PHP - 在表单中确保输入值"></a>PHP - 在表单中确保输入值</h2><figure class="highlight django"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="xml">// 在HTML的input元素中插添加PHP脚本， 各字段名为: name, email, 和 website</span></div><div class="line">// 在备注中的 textarea 字段中，我们将脚本放于 <span class="tag">&lt;<span class="name">textarea</span>&gt;</span> 和 <span class="tag">&lt;/<span class="name">textarea</span>&gt;</span> 标签之间</div><div class="line">// PHP脚本输出值为： $name, $email, $website, 和 $comment 变量。 </div><div class="line">// 然后，我们同样需要检查被选中的单选按钮， 对于这一点，我们 必须设置好checked属性</div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"&lt;?php echo htmlspecialchars($_SERVER["</span><span class="attr">PHP_SELF</span>"]);?&gt;</span>"&gt; </div><div class="line">   名字: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"&lt;?php echo $name;?&gt;"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span>* <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $nameErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   E-mail: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">value</span>=<span class="string">"&lt;?php echo $email;?&gt;"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span>* <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $emailErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   网址: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"website"</span> <span class="attr">value</span>=<span class="string">"&lt;?php echo $website;?&gt;"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span><span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $websiteErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   备注: <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">"comment"</span> <span class="attr">rows</span>=<span class="string">"5"</span> <span class="attr">cols</span>=<span class="string">"40"</span>&gt;</span><span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $comment;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   性别:</div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> &lt;?<span class="attr">php</span> <span class="attr">if</span> (<span class="attr">isset</span>($<span class="attr">gender</span>) &amp;&amp; $<span class="attr">gender</span>==<span class="string">"female"</span>) <span class="attr">echo</span> "<span class="attr">checked</span>";?&gt;</span>  value="female"&gt;女</div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> &lt;?<span class="attr">php</span> <span class="attr">if</span> (<span class="attr">isset</span>($<span class="attr">gender</span>) &amp;&amp; $<span class="attr">gender</span>==<span class="string">"male"</span>) <span class="attr">echo</span> "<span class="attr">checked</span>";?&gt;</span>  value="male"&gt;男</div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span>* <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $genderErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">name</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Submit"</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="PHP-完整表单实例-1"><a href="#PHP-完整表单实例-1" class="headerlink" title="PHP - 完整表单实例"></a>PHP - 完整表单实例</h2><figure class="highlight django"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="meta">&lt;!DOCTYPE HTML&gt;</span> </span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line"><span class="selector-class">.error</span> &#123;<span class="attribute">color</span>: <span class="number">#FF0000</span>;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span> </div><div class="line"></div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="comment">// 定义变量并默认设置为空值</span></div><div class="line">$nameErr = $emailErr = $genderErr = $websiteErr = <span class="string">""</span>;</div><div class="line">$name = $email = $gender = $comment = $website = <span class="string">""</span>;</div><div class="line"></div><div class="line"><span class="keyword">if</span> ($_SERVER[<span class="string">"REQUEST_METHOD"</span>] == <span class="string">"POST"</span>)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"name"</span>]))</div><div class="line">    &#123;</div><div class="line">        $nameErr = <span class="string">"名字是必需的"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">        $name = test_input($_POST[<span class="string">"name"</span>]);</div><div class="line">        <span class="comment">// 检测名字是否只包含字母跟空格</span></div><div class="line">        <span class="keyword">if</span> (!preg_match(<span class="string">"/^[a-zA-Z ]*$/"</span>,$name))</div><div class="line">        &#123;</div><div class="line">            $nameErr = <span class="string">"只允许字母和空格"</span>; </div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"email"</span>]))</div><div class="line">    &#123;</div><div class="line">      $emailErr = <span class="string">"邮箱是必需的"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">        $email = test_input($_POST[<span class="string">"email"</span>]);</div><div class="line">        <span class="comment">// 检测邮箱是否合法</span></div><div class="line">        <span class="keyword">if</span> (!preg_match(<span class="string">"/([\w\-]+\@[\w\-]+\.[\w\-]+)/"</span>,$email))</div><div class="line">        &#123;</div><div class="line">            $emailErr = <span class="string">"非法邮箱格式"</span>; </div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"website"</span>]))</div><div class="line">    &#123;</div><div class="line">        $website = <span class="string">""</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">        $website = test_input($_POST[<span class="string">"website"</span>]);</div><div class="line">        <span class="comment">// 检测 URL 地址是否合法</span></div><div class="line">        <span class="keyword">if</span> (!preg_match(<span class="string">"/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&amp;@#\/%?=~_|!:,.;]*[-a-z0-9+&amp;@#\/%=~_|]/i"</span>,$website))</div><div class="line">        &#123;</div><div class="line">            $websiteErr = <span class="string">"非法的 URL 的地址"</span>; </div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"comment"</span>]))</div><div class="line">    &#123;</div><div class="line">        $comment = <span class="string">""</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">        $comment = test_input($_POST[<span class="string">"comment"</span>]);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">"gender"</span>]))</div><div class="line">    &#123;</div><div class="line">        $genderErr = <span class="string">"性别是必需的"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">        $gender = test_input($_POST[<span class="string">"gender"</span>]);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test_input</span><span class="params">($data)</span></span></div><div class="line">&#123;</div><div class="line">    $data = trim($data);</div><div class="line">    $data = stripslashes($data);</div><div class="line">    $data = htmlspecialchars($data);</div><div class="line">    <span class="keyword">return</span> $data;</div><div class="line">&#125;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>PHP 表单验证实例<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span>* 必需字段。<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"&lt;?php echo htmlspecialchars($_SERVER["</span><span class="attr">PHP_SELF</span>"]);?&gt;</span>"&gt; </div><div class="line">   名字: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"&lt;?php echo $name;?&gt;"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span>* <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $nameErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   E-mail: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">value</span>=<span class="string">"&lt;?php echo $email;?&gt;"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span>* <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $emailErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   网址: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"website"</span> <span class="attr">value</span>=<span class="string">"&lt;?php echo $website;?&gt;"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span><span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $websiteErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   备注: <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">"comment"</span> <span class="attr">rows</span>=<span class="string">"5"</span> <span class="attr">cols</span>=<span class="string">"40"</span>&gt;</span><span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $comment;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   性别:</div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> &lt;?<span class="attr">php</span> <span class="attr">if</span> (<span class="attr">isset</span>($<span class="attr">gender</span>) &amp;&amp; $<span class="attr">gender</span>==<span class="string">"female"</span>) <span class="attr">echo</span> "<span class="attr">checked</span>";?&gt;</span>  value="female"&gt;女</div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> &lt;?<span class="attr">php</span> <span class="attr">if</span> (<span class="attr">isset</span>($<span class="attr">gender</span>) &amp;&amp; $<span class="attr">gender</span>==<span class="string">"male"</span>) <span class="attr">echo</span> "<span class="attr">checked</span>";?&gt;</span>  value="male"&gt;男</div><div class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"error"</span>&gt;</span>* <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $genderErr;<span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">name</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Submit"</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;h2&gt;您输入的内容是:&lt;/h2&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $name;</div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $email;</div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $website;</div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $comment;</div><div class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line"><span class="keyword">echo</span> $gender;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="PHP-GET-变量"><a href="#PHP-GET-变量" class="headerlink" title="PHP $_GET 变量"></a>PHP $_GET 变量</h1><p>在 PHP 中，预定义的 $_GET 变量用于收集来自 method=”get” 的表单中的值</p>
<h2 id="GET-变量"><a href="#GET-变量" class="headerlink" title="$_GET 变量"></a>$_GET 变量</h2><p>预定义的 $_GET 变量用于收集来自 method=”get” 的表单中的值</p>
<p>从带有 GET 方法的表单发送的信息，对任何人都是可见的，并且对发送信息的量也有限制</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">// form.html 文件</div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"welcome.php"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></div><div class="line">名字: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"fname"</span>&gt;</span></div><div class="line">年龄: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"age"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>当用户点击 “Submit” 按钮时，发送到服务器的 URL</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">http:</span><span class="comment">//www.runoob.com/welcome.php?fname=Runoob&amp;amp;age=3</span></div></pre></td></tr></table></figure>
<p>“welcome.php” 文件现在可以通过 $_GET 变量来收集表单数据</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">欢迎 <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $_GET[<span class="string">"fname"</span>]; <span class="meta">?&gt;</span></span>!<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">你的年龄是 <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $_GET[<span class="string">"age"</span>]; <span class="meta">?&gt;</span></span>  岁</div></pre></td></tr></table></figure>
<h1 id="PHP-POST-变量"><a href="#PHP-POST-变量" class="headerlink" title="PHP $_POST 变量"></a>PHP $_POST 变量</h1><p>在 PHP 中，预定义的 $_POST 变量用于收集来自 method=”post” 的表单中的值</p>
<p>从带有 POST 方法的表单发送的信息，对任何人都是不可见的，并且对发送信息的量也没有限制</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">// form.html</div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"welcome.php"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">名字: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"fname"</span>&gt;</span></div><div class="line">年龄: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"age"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>当用户点击 “提交” 按钮时，URL 类似</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">http:</span><span class="comment">//www.runoob.com/welcome.php</span></div></pre></td></tr></table></figure>
<p>“welcome.php” 文件现在可以通过 $_POST 变量来收集表单数据</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">欢迎 <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $_POST[<span class="string">"fname"</span>]; <span class="meta">?&gt;</span></span>!<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">你的年龄是 <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $_POST[<span class="string">"age"</span>]; <span class="meta">?&gt;</span></span>  岁。</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;PHP-表单和用户输入&quot;&gt;&lt;a href=&quot;#PHP-表单和用户输入&quot; class=&quot;headerlink&quot; title=&quot;PHP 表单和用户输入&quot;&gt;&lt;/a&gt;PHP 表单和用户输入&lt;/h1&gt;&lt;p&gt;PHP 中的 $_GET 和 $_POST 变量用于检索表单中的信息，比如用户输入&lt;br&gt;
    
    </summary>
    
      <category term="BackEnd" scheme="http://yoursite.com/categories/BackEnd/"/>
    
    
      <category term="PHP" scheme="http://yoursite.com/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>英语(一）</title>
    <link href="http://yoursite.com/2018/07/20/2018.7.20/"/>
    <id>http://yoursite.com/2018/07/20/2018.7.20/</id>
    <published>2018-07-20T15:16:41.000Z</published>
    <updated>2018-07-19T16:22:43.224Z</updated>
    
    <content type="html"><![CDATA[<p>从新概念一开始背 总结</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;从新概念一开始背 总结&lt;/p&gt;

    
    </summary>
    
      <category term="others" scheme="http://yoursite.com/categories/others/"/>
    
    
      <category term="英语" scheme="http://yoursite.com/tags/%E8%8B%B1%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>PHP面向对象</title>
    <link href="http://yoursite.com/2018/07/18/2018.7.18/"/>
    <id>http://yoursite.com/2018/07/18/2018.7.18/</id>
    <published>2018-07-18T15:16:41.000Z</published>
    <updated>2018-07-17T15:24:24.605Z</updated>
    
    <content type="html"><![CDATA[<p>在面向对象的程序设计中，对象是一个由信息及对信息进行处理的描述所组成的整体，是对现实世界的抽象</p>
<p>对象的主要三个特性<br><a id="more"></a></p>
<ul>
<li>对象的行为：可以对 对象施加那些操作，开灯，关灯就是行为。</li>
<li>对象的形态：当施加那些方法是对象如何响应，颜色，尺寸，外型。</li>
<li>对象的表示：对象的表示就相当于身份证，具体区分在相同的行为与状态下有什么不同</li>
</ul>
<h1 id="面向对象名词"><a href="#面向对象名词" class="headerlink" title="面向对象名词"></a>面向对象名词</h1><ul>
<li>类 − 定义了一件事物的抽象特点</li>
<li>对象 − 是类的实例</li>
<li>成员变量 − 定义在类内部的变量</li>
<li>成员函数 − 定义在类的内部,可用于访问对象的数据</li>
<li>继承 − 继承性是子类自动共享父类数据结构和方法的机制,这是类之间的一种关系</li>
<li>父类 − 一个类被其他类继承，可将该类称为父类，或基类，或超类</li>
<li>子类 − 一个类继承其他类称为子类，也可称为派生类</li>
<li>多态 − 多态性是指相同的函数或方法可作用于多种类型的对象上并获得不同的结果</li>
<li>重载 − 简单说，就是函数或者方法有同样的名称，但是参数列表不相同的情形</li>
<li>抽象性 − 抽象性是指将具有一致的数据结构（属性）和行为（操作）的对象抽象成类</li>
<li>封装 − 封装是指将现实世界中存在的某个客体的属性与行为绑定在一起，并放置在一个逻辑单元内</li>
<li>构造函数 − 主要用来在创建对象时初始化对象， 即为对象成员变量赋初始值，总与new运算符一起使用在创建对象的语句中</li>
<li>析构函数 − 析构函数与构造函数相反,当对象结束其生命周期时（例如对象所在的函数已调用完毕）,系统自动执行析构函数</li>
</ul>
<p>通过 Car 类 创建了三个对象：Mercedes, Bmw, 和 Audi</p>
<figure class="highlight cos"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">$mercedes</span> = <span class="keyword">new</span> Car ()<span class="comment">;</span></div><div class="line"><span class="built_in">$bmw</span> = <span class="keyword">new</span> Car ()<span class="comment">;</span></div><div class="line"><span class="built_in">$audi</span> = <span class="keyword">new</span> Car ()<span class="comment">;</span></div></pre></td></tr></table></figure>
<h1 id="PHP-类定义"><a href="#PHP-类定义" class="headerlink" title="PHP 类定义"></a>PHP 类定义</h1><p>PHP 定义类通常语法格式</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 类使用 class 关键字后加上类名定义</span></div><div class="line"><span class="comment">// 类名后的一对大括号(&#123;&#125;)内可以定义变量和方法</span></div><div class="line"><span class="comment">// 类的变量使用 var 来声明, 变量也可以初始化值</span></div><div class="line"><span class="comment">// 函数定义类似 PHP 函数的定义，但函数只能通过该类及其实例化的对象访问</span></div><div class="line"></div><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">phpClass</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> $var1;</div><div class="line">  <span class="keyword">var</span> $var2 = <span class="string">"constant string"</span>;</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">myfunc</span> <span class="params">($arg1, $arg2)</span> </span>&#123;</div><div class="line">     [..]</div><div class="line">  &#125;</div><div class="line">  [..]</div><div class="line">&#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>实例</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 变量 $this 代表自身的对象</span></div><div class="line"><span class="comment">// PHP_EOL 为换行符</span></div><div class="line"></div><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Site</span> </span>&#123;</div><div class="line">  <span class="comment">/* 成员变量 */</span></div><div class="line">  <span class="keyword">var</span> $url;</div><div class="line">  <span class="keyword">var</span> $title;</div><div class="line">  </div><div class="line">  <span class="comment">/* 成员函数 */</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setUrl</span><span class="params">($par)</span></span>&#123;</div><div class="line">     <span class="keyword">$this</span>-&gt;url = $par;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getUrl</span><span class="params">()</span></span>&#123;</div><div class="line">     <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;url . PHP_EOL;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setTitle</span><span class="params">($par)</span></span>&#123;</div><div class="line">     <span class="keyword">$this</span>-&gt;title = $par;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getTitle</span><span class="params">()</span></span>&#123;</div><div class="line">     <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;title . PHP_EOL;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h1 id="PHP-中创建对象"><a href="#PHP-中创建对象" class="headerlink" title="PHP 中创建对象"></a>PHP 中创建对象</h1><p>类创建后，我们可以使用 new 运算符来实例化该类的对象</p>
<figure class="highlight cos"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">$runoob</span> = <span class="keyword">new</span> Site<span class="comment">;</span></div><div class="line"><span class="built_in">$taobao</span> = <span class="keyword">new</span> Site<span class="comment">;</span></div><div class="line"><span class="built_in">$google</span> = <span class="keyword">new</span> Site<span class="comment">;</span></div></pre></td></tr></table></figure>
<h2 id="调用成员方法"><a href="#调用成员方法" class="headerlink" title="调用成员方法"></a>调用成员方法</h2><p>在实例化对象后，我们可以使用该对象调用成员方法，该对象的成员方法只能操作该对象的成员变量</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Site</span> </span>&#123;</div><div class="line">  <span class="comment">/* 成员变量 */</span></div><div class="line">  <span class="keyword">var</span> $url;</div><div class="line">  <span class="keyword">var</span> $title;</div><div class="line">  </div><div class="line">  <span class="comment">/* 成员函数 */</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setUrl</span><span class="params">($par)</span></span>&#123;</div><div class="line">     <span class="keyword">$this</span>-&gt;url = $par;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getUrl</span><span class="params">()</span></span>&#123;</div><div class="line">     <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;url . PHP_EOL;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setTitle</span><span class="params">($par)</span></span>&#123;</div><div class="line">     <span class="keyword">$this</span>-&gt;title = $par;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getTitle</span><span class="params">()</span></span>&#123;</div><div class="line">     <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;title . PHP_EOL;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$runoob = <span class="keyword">new</span> Site;</div><div class="line">$taobao = <span class="keyword">new</span> Site;</div><div class="line">$google = <span class="keyword">new</span> Site;</div><div class="line"></div><div class="line"><span class="comment">// 调用成员函数，设置标题和URL</span></div><div class="line">$runoob-&gt;setTitle( <span class="string">"菜鸟教程"</span> );</div><div class="line">$taobao-&gt;setTitle( <span class="string">"淘宝"</span> );</div><div class="line">$google-&gt;setTitle( <span class="string">"Google 搜索"</span> );</div><div class="line"></div><div class="line">$runoob-&gt;setUrl( <span class="string">'www.runoob.com'</span> );</div><div class="line">$taobao-&gt;setUrl( <span class="string">'www.taobao.com'</span> );</div><div class="line">$google-&gt;setUrl( <span class="string">'www.google.com'</span> );</div><div class="line"></div><div class="line"><span class="comment">// 调用成员函数，获取标题和URL</span></div><div class="line">$runoob-&gt;getTitle();</div><div class="line">$taobao-&gt;getTitle();</div><div class="line">$google-&gt;getTitle();</div><div class="line"></div><div class="line">$runoob-&gt;getUrl();</div><div class="line">$taobao-&gt;getUrl();</div><div class="line">$google-&gt;getUrl();</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">// 输出</div><div class="line">菜鸟教程</div><div class="line">淘宝</div><div class="line">Google 搜索</div><div class="line">www.runoob.com</div><div class="line">www.taobao.com</div><div class="line">www.google.com</div></pre></td></tr></table></figure>
<h1 id="PHP-构造函数"><a href="#PHP-构造函数" class="headerlink" title="PHP 构造函数"></a>PHP 构造函数</h1><p>用来在创建对象时初始化对象， 即为对象成员变量赋初始值，在创建对象的语句中与 new 运算符一起使用</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 通过构造方法来初始化 $url 和 $title 变量</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">( $par1, $par2 )</span> </span>&#123;</div><div class="line">   <span class="keyword">$this</span>-&gt;url = $par1;</div><div class="line">   <span class="keyword">$this</span>-&gt;title = $par2;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>现在我们就不需要再调用 setTitle 和 setUrl 方法</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Site</span> </span>&#123;</div><div class="line">  <span class="comment">/* 成员变量 */</span></div><div class="line">  <span class="keyword">var</span> $url;</div><div class="line">  <span class="keyword">var</span> $title;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">( $par1, $par2 )</span> </span>&#123;</div><div class="line">    <span class="keyword">$this</span>-&gt;url = $par1;</div><div class="line">    <span class="keyword">$this</span>-&gt;title = $par2;</div><div class="line">  &#125;</div><div class="line">  <span class="comment">/* 成员函数 */</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setUrl</span><span class="params">($par)</span></span>&#123;</div><div class="line">     <span class="keyword">$this</span>-&gt;url = $par;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getUrl</span><span class="params">()</span></span>&#123;</div><div class="line">     <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;url . PHP_EOL;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setTitle</span><span class="params">($par)</span></span>&#123;</div><div class="line">     <span class="keyword">$this</span>-&gt;title = $par;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getTitle</span><span class="params">()</span></span>&#123;</div><div class="line">     <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;title . PHP_EOL;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$runoob = <span class="keyword">new</span> Site(<span class="string">'www.runoob.com'</span>, <span class="string">'菜鸟教程'</span>);</div><div class="line">$taobao = <span class="keyword">new</span> Site(<span class="string">'www.taobao.com'</span>, <span class="string">'淘宝'</span>);</div><div class="line">$google = <span class="keyword">new</span> Site(<span class="string">'www.google.com'</span>, <span class="string">'Google 搜索'</span>);</div><div class="line"></div><div class="line"><span class="comment">// 调用成员函数，获取标题和URL</span></div><div class="line">$runoob-&gt;getTitle();</div><div class="line">$taobao-&gt;getTitle();</div><div class="line">$google-&gt;getTitle();</div><div class="line"></div><div class="line">$runoob-&gt;getUrl();</div><div class="line">$taobao-&gt;getUrl();</div><div class="line">$google-&gt;getUrl();</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">//输出</div><div class="line">菜鸟教程</div><div class="line">淘宝</div><div class="line">Google 搜索</div><div class="line">www.runoob.com</div><div class="line">www.taobao.com</div><div class="line">www.google.com</div></pre></td></tr></table></figure>
<h1 id="析构函数"><a href="#析构函数" class="headerlink" title="析构函数"></a>析构函数</h1><p>析构函数(destructor) 与构造函数相反，当对象结束其生命周期时（例如对象所在的函数已调用完毕），系统自动执行析构函数</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDestructableClass</span> </span>&#123;</div><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span> </span>&#123;</div><div class="line">       <span class="keyword">print</span> <span class="string">"构造函数\n"</span>;</div><div class="line">       <span class="keyword">$this</span>-&gt;name = <span class="string">"MyDestructableClass"</span>;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span><span class="params">()</span> </span>&#123;</div><div class="line">       <span class="keyword">print</span> <span class="string">"销毁 "</span> . <span class="keyword">$this</span>-&gt;name . <span class="string">"\n"</span>;</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$obj = <span class="keyword">new</span> MyDestructableClass();</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">// 输出</div><div class="line">构造函数</div><div class="line">销毁 MyDestructableClass</div></pre></td></tr></table></figure>
<h1 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h1><p>PHP 使用关键字 extends 来继承一个类，PHP 不支持多继承</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 实例中 Child_Site 类继承了 Site 类，并扩展了功能</span></div><div class="line"><span class="meta">&lt;?php</span> </div><div class="line"><span class="comment">// 子类扩展站点类别</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child_Site</span> <span class="keyword">extends</span> <span class="title">Site</span> </span>&#123;</div><div class="line">   <span class="keyword">var</span> $category;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setCate</span><span class="params">($par)</span></span>&#123;</div><div class="line">        <span class="keyword">$this</span>-&gt;category = $par;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getCate</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;category . PHP_EOL;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="方法重写"><a href="#方法重写" class="headerlink" title="方法重写"></a>方法重写</h1><p>如果从父类继承的方法不能满足子类的需求，可以对其进行改写，这个过程叫方法的覆盖，也称为方法的重写</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 实例中重写了 getUrl 与 getTitle 方法</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUrl</span><span class="params">()</span> </span>&#123;</div><div class="line">   <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;url . PHP_EOL;</div><div class="line">   <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;url;</div><div class="line">&#125;</div><div class="line">   </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getTitle</span><span class="params">()</span></span>&#123;</div><div class="line">   <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;title . PHP_EOL;</div><div class="line">   <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;title;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="访问控制"><a href="#访问控制" class="headerlink" title="访问控制"></a>访问控制</h1><p>PHP 对属性或方法的访问控制，是通过在前面添加关键字 public（公有），protected（受保护）或 private（私有）来实现的</p>
<ul>
<li>public（公有）：公有的类成员可以在任何地方被访问</li>
<li>protected（受保护）：受保护的类成员则可以被其自身以及其子类和父类访问</li>
<li>private（私有）：私有的类成员则只能被其定义所在的类访问</li>
</ul>
<h2 id="属性的访问控制"><a href="#属性的访问控制" class="headerlink" title="属性的访问控制"></a>属性的访问控制</h2><p>类属性必须定义为公有，受保护，私有之一。如果用 var 定义，则被视为公有</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Define MyClass</div><div class="line"> */</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span> $public = <span class="string">'Public'</span>;</div><div class="line">    <span class="keyword">protected</span> $protected = <span class="string">'Protected'</span>;</div><div class="line">    <span class="keyword">private</span> $private = <span class="string">'Private'</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">printHello</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;public;</div><div class="line">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;protected;</div><div class="line">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;private;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$obj = <span class="keyword">new</span> MyClass();</div><div class="line"><span class="keyword">echo</span> $obj-&gt;public; <span class="comment">// 这行能被正常执行</span></div><div class="line"><span class="keyword">echo</span> $obj-&gt;protected; <span class="comment">// 这行会产生一个致命错误</span></div><div class="line"><span class="keyword">echo</span> $obj-&gt;private; <span class="comment">// 这行也会产生一个致命错误</span></div><div class="line">$obj-&gt;printHello(); <span class="comment">// 输出 Public、Protected 和 Private</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Define MyClass2</div><div class="line"> */</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass2</span> <span class="keyword">extends</span> <span class="title">MyClass</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">// 可以对 public 和 protected 进行重定义，但 private 而不能</span></div><div class="line">    <span class="keyword">protected</span> $protected = <span class="string">'Protected2'</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">printHello</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;public;</div><div class="line">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;protected;</div><div class="line">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;private;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$obj2 = <span class="keyword">new</span> MyClass2();</div><div class="line"><span class="keyword">echo</span> $obj2-&gt;public; <span class="comment">// 这行能被正常执行</span></div><div class="line"><span class="keyword">echo</span> $obj2-&gt;private; <span class="comment">// 未定义 private</span></div><div class="line"><span class="keyword">echo</span> $obj2-&gt;protected; <span class="comment">// 这行会产生一个致命错误</span></div><div class="line">$obj2-&gt;printHello(); <span class="comment">// 输出 Public、Protected2 和 Undefined</span></div><div class="line"></div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h2 id="方法的访问控制"><a href="#方法的访问控制" class="headerlink" title="方法的访问控制"></a>方法的访问控制</h2><p>类中的方法可以被定义为公有，私有或受保护。如果没有设置这些关键字，则该方法默认为公有</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Define MyClass</div><div class="line"> */</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">// 声明一个公有的构造函数</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span> </span>&#123; &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 声明一个公有的方法</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">MyPublic</span><span class="params">()</span> </span>&#123; &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 声明一个受保护的方法</span></div><div class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">MyProtected</span><span class="params">()</span> </span>&#123; &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 声明一个私有的方法</span></div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">MyPrivate</span><span class="params">()</span> </span>&#123; &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 此方法为公有</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Foo</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">$this</span>-&gt;MyPublic();</div><div class="line">        <span class="keyword">$this</span>-&gt;MyProtected();</div><div class="line">        <span class="keyword">$this</span>-&gt;MyPrivate();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$myclass = <span class="keyword">new</span> MyClass;</div><div class="line">$myclass-&gt;MyPublic(); <span class="comment">// 这行能被正常执行</span></div><div class="line">$myclass-&gt;MyProtected(); <span class="comment">// 这行会产生一个致命错误</span></div><div class="line">$myclass-&gt;MyPrivate(); <span class="comment">// 这行会产生一个致命错误</span></div><div class="line">$myclass-&gt;Foo(); <span class="comment">// 公有，受保护，私有都可以执行</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Define MyClass2</div><div class="line"> */</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass2</span> <span class="keyword">extends</span> <span class="title">MyClass</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">// 此方法为公有</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Foo2</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">$this</span>-&gt;MyPublic();</div><div class="line">        <span class="keyword">$this</span>-&gt;MyProtected();</div><div class="line">        <span class="keyword">$this</span>-&gt;MyPrivate(); <span class="comment">// 这行会产生一个致命错误</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$myclass2 = <span class="keyword">new</span> MyClass2;</div><div class="line">$myclass2-&gt;MyPublic(); <span class="comment">// 这行能被正常执行</span></div><div class="line">$myclass2-&gt;Foo2(); <span class="comment">// 公有的和受保护的都可执行，但私有的不行</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span> </span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">$this</span>-&gt;testPrivate();</div><div class="line">        <span class="keyword">$this</span>-&gt;testPublic();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">testPublic</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">echo</span> <span class="string">"Bar::testPublic\n"</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">testPrivate</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">echo</span> <span class="string">"Bar::testPrivate\n"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> <span class="keyword">extends</span> <span class="title">Bar</span> </span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">testPublic</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">echo</span> <span class="string">"Foo::testPublic\n"</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">testPrivate</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">echo</span> <span class="string">"Foo::testPrivate\n"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$myFoo = <span class="keyword">new</span> foo();</div><div class="line">$myFoo-&gt;test(); <span class="comment">// Bar::testPrivate </span></div><div class="line">                <span class="comment">// Foo::testPublic</span></div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h1 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h1><p>使用接口（interface），可以指定某个类必须实现哪些方法，但不需要定义这些方法的具体内容</p>
<p>接口是通过 interface 关键字来定义的，就像定义一个标准的类一样，但其中定义所有的方法都是空的</p>
<p>接口中定义的所有方法都必须是公有，这是接口的特性</p>
<p>要实现一个接口，使用 implements 操作符。类中必须实现接口中定义的所有方法，否则会报一个致命错误。类可以实现多个接口，用逗号来分隔多个接口的名称</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"></div><div class="line"><span class="comment">// 声明一个'iTemplate'接口</span></div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">iTemplate</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setVariable</span><span class="params">($name, $var)</span></span>;</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getHtml</span><span class="params">($template)</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 实现接口</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Template</span> <span class="keyword">implements</span> <span class="title">iTemplate</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">private</span> $vars = <span class="keyword">array</span>();</div><div class="line">  </div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setVariable</span><span class="params">($name, $var)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">$this</span>-&gt;vars[$name] = $var;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getHtml</span><span class="params">($template)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">foreach</span>(<span class="keyword">$this</span>-&gt;vars <span class="keyword">as</span> $name =&gt; $value) &#123;</div><div class="line">            $template = str_replace(<span class="string">'&#123;'</span> . $name . <span class="string">'&#125;'</span>, $value, $template);</div><div class="line">        &#125;</div><div class="line"> </div><div class="line">        <span class="keyword">return</span> $template;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h1><p>可以把在类中始终保持不变的值定义为常量。在定义和使用常量的时候不需要使用 $ 符号</p>
<p>常量的值必须是一个定值，不能是变量，类属性，数学运算的结果或函数调用</p>
<p>用一个变量来动态调用类。但该变量的值不能为关键字（如 self，parent 或 static）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">const</span> constant = <span class="string">'常量值'</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">showConstant</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">echo</span>  <span class="keyword">self</span>::constant . PHP_EOL;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">echo</span> MyClass::constant . PHP_EOL;</div><div class="line"></div><div class="line">$classname = <span class="string">"MyClass"</span>;</div><div class="line"><span class="keyword">echo</span> $classname::constant . PHP_EOL; <span class="comment">// 自 5.3.0 起</span></div><div class="line"></div><div class="line">$class = <span class="keyword">new</span> MyClass();</div><div class="line">$class-&gt;showConstant();</div><div class="line"></div><div class="line"><span class="keyword">echo</span> $class::constant . PHP_EOL; <span class="comment">// 自 PHP 5.3.0 起</span></div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h1 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h1><p>任何一个类，如果它里面至少有一个方法是被声明为抽象的，那么这个类就必须被声明为抽象的</p>
<p>定义为抽象的类不能被实例化</p>
<p>被定义为抽象的方法只是声明了其调用方式（参数），不能定义其具体的功能实现</p>
<p>继承一个抽象类的时候，子类必须定义父类中的所有抽象方法,另外,这些方法的访问控制必须和父类中一样</p>
<p>例如某个抽象方法被声明为受保护的，那么子类中实现的方法就应该声明为受保护的或者公有的，而不能定义为私有的。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractClass</span></span></div><div class="line">&#123;</div><div class="line"> <span class="comment">// 强制要求子类定义这些方法</span></div><div class="line">    <span class="keyword">abstract</span> <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">getValue</span><span class="params">()</span></span>;</div><div class="line">    <span class="keyword">abstract</span> <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">prefixValue</span><span class="params">($prefix)</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">// 普通方法（非抽象方法）</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">printOut</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">print</span> <span class="keyword">$this</span>-&gt;getValue() . PHP_EOL;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteClass1</span> <span class="keyword">extends</span> <span class="title">AbstractClass</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">getValue</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"ConcreteClass1"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">prefixValue</span><span class="params">($prefix)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"&#123;$prefix&#125;ConcreteClass1"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteClass2</span> <span class="keyword">extends</span> <span class="title">AbstractClass</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getValue</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"ConcreteClass2"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">prefixValue</span><span class="params">($prefix)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"&#123;$prefix&#125;ConcreteClass2"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$class1 = <span class="keyword">new</span> ConcreteClass1;</div><div class="line">$class1-&gt;printOut();</div><div class="line"><span class="keyword">echo</span> $class1-&gt;prefixValue(<span class="string">'FOO_'</span>) . PHP_EOL;</div><div class="line"></div><div class="line">$class2 = <span class="keyword">new</span> ConcreteClass2;</div><div class="line">$class2-&gt;printOut();</div><div class="line"><span class="keyword">echo</span> $class2-&gt;prefixValue(<span class="string">'FOO_'</span>) . PHP_EOL;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">// 输出</div><div class="line">ConcreteClass1</div><div class="line">FOO_ConcreteClass1</div><div class="line">ConcreteClass2</div><div class="line">FOO_ConcreteClass2</div></pre></td></tr></table></figure>
<p>子类方法可以包含父类抽象方法中不存在的可选参数</p>
<p>子类定义了一个可选参数，而父类抽象方法的声明里没有，则也是可以正常运行的</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractClass</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">// 我们的抽象方法仅需要定义需要的参数</span></div><div class="line">    <span class="keyword">abstract</span> <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">prefixName</span><span class="params">($name)</span></span>;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteClass</span> <span class="keyword">extends</span> <span class="title">AbstractClass</span></span></div><div class="line">&#123;</div><div class="line"></div><div class="line">    <span class="comment">// 我们的子类可以定义父类签名中不存在的可选参数</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">prefixName</span><span class="params">($name, $separator = <span class="string">"."</span>)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> ($name == <span class="string">"Pacman"</span>) &#123;</div><div class="line">            $prefix = <span class="string">"Mr"</span>;</div><div class="line">        &#125; <span class="keyword">elseif</span> ($name == <span class="string">"Pacwoman"</span>) &#123;</div><div class="line">            $prefix = <span class="string">"Mrs"</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            $prefix = <span class="string">""</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="string">"&#123;$prefix&#125;&#123;$separator&#125; &#123;$name&#125;"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$class = <span class="keyword">new</span> ConcreteClass;</div><div class="line"><span class="keyword">echo</span> $class-&gt;prefixName(<span class="string">"Pacman"</span>), <span class="string">"\n"</span>;</div><div class="line"><span class="keyword">echo</span> $class-&gt;prefixName(<span class="string">"Pacwoman"</span>), <span class="string">"\n"</span>;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">// 输出</div><div class="line">Mr. Pacman</div><div class="line">Mrs. Pacwoman</div></pre></td></tr></table></figure>
<h1 id="Static-关键字"><a href="#Static-关键字" class="headerlink" title="Static 关键字"></a>Static 关键字</h1><p>声明类属性或方法为 static(静态)，就可以不实例化类而直接访问</p>
<p>静态属性不能通过一个类已实例化的对象来访问（但静态方法可以）</p>
<p>由于静态方法不需要通过对象即可调用，所以伪变量 $this 在静态方法中不可用</p>
<p>静态属性不可以由对象通过 -&gt; 操作符来访问</p>
<p>用一个变量来动态调用类。但该变量的值不能为关键字 self，parent 或 static</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</div><div class="line">  <span class="keyword">public</span> <span class="keyword">static</span> $my_static = <span class="string">'foo'</span>;</div><div class="line">  </div><div class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">staticValue</span><span class="params">()</span> </span>&#123;</div><div class="line">     <span class="keyword">return</span> <span class="keyword">self</span>::$my_static;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">print</span> Foo::$my_static . PHP_EOL;</div><div class="line">$foo = <span class="keyword">new</span> Foo();</div><div class="line"></div><div class="line"><span class="keyword">print</span> $foo-&gt;staticValue() . PHP_EOL;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">// 输出</div><div class="line">foo</div><div class="line">foo</div></pre></td></tr></table></figure>
<h1 id="Final-关键字"><a href="#Final-关键字" class="headerlink" title="Final 关键字"></a>Final 关键字</h1><p>如果父类中的方法被声明为 final，则子类无法覆盖该方法。如果一个类被声明为 final，则不能被继承</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseClass</span> </span>&#123;</div><div class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</div><div class="line">       <span class="keyword">echo</span> <span class="string">"BaseClass::test() called"</span> . PHP_EOL;</div><div class="line">   &#125;</div><div class="line">   </div><div class="line">   <span class="keyword">final</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">moreTesting</span><span class="params">()</span> </span>&#123;</div><div class="line">       <span class="keyword">echo</span> <span class="string">"BaseClass::moreTesting() called"</span>  . PHP_EOL;</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChildClass</span> <span class="keyword">extends</span> <span class="title">BaseClass</span> </span>&#123;</div><div class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">moreTesting</span><span class="params">()</span> </span>&#123;</div><div class="line">       <span class="keyword">echo</span> <span class="string">"ChildClass::moreTesting() called"</span>  . PHP_EOL;</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// 报错信息 Fatal error: Cannot override final method BaseClass::moreTesting()</span></div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h1 id="调用父类构造方法"><a href="#调用父类构造方法" class="headerlink" title="调用父类构造方法"></a>调用父类构造方法</h1><p>PHP 不会在子类的构造方法中自动的调用父类的构造方法。要执行父类的构造方法，需要在子类的构造方法中调用 parent::__construct()</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseClass</span> </span>&#123;</div><div class="line">   function __construct() &#123;</div><div class="line">       print <span class="string">"BaseClass 类中构造方法"</span> . <span class="type">PHP_EOL</span>;</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubClass</span> <span class="keyword">extends</span> <span class="title">BaseClass</span> </span>&#123;</div><div class="line">   function __construct() &#123;</div><div class="line">       parent::__construct();  <span class="comment">// 子类构造方法不能自动调用父类的构造方法</span></div><div class="line">       print <span class="string">"SubClass 类中构造方法"</span> . <span class="type">PHP_EOL</span>;</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">OtherSubClass</span> <span class="keyword">extends</span> <span class="title">BaseClass</span> </span>&#123;</div><div class="line">    <span class="comment">// 继承 BaseClass 的构造方法</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 调用 BaseClass 构造方法</span></div><div class="line">$obj = <span class="keyword">new</span> <span class="type">BaseClass</span>();</div><div class="line"></div><div class="line"><span class="comment">// 调用 BaseClass、SubClass 构造方法</span></div><div class="line">$obj = <span class="keyword">new</span> <span class="type">SubClass</span>();</div><div class="line"></div><div class="line"><span class="comment">// 调用 BaseClass 构造方法</span></div><div class="line">$obj = <span class="keyword">new</span> <span class="type">OtherSubClass</span>();</div><div class="line">?&gt;</div><div class="line"></div><div class="line"><span class="comment">// 输出</span></div><div class="line"><span class="type">BaseClass</span> 类中构造方法</div><div class="line"><span class="type">BaseClass</span> 类中构造方法</div><div class="line"><span class="type">SubClass</span> 类中构造方法</div><div class="line"><span class="type">BaseClass</span> 类中构造方法</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在面向对象的程序设计中，对象是一个由信息及对信息进行处理的描述所组成的整体，是对现实世界的抽象&lt;/p&gt;
&lt;p&gt;对象的主要三个特性&lt;br&gt;
    
    </summary>
    
      <category term="BackEnd" scheme="http://yoursite.com/categories/BackEnd/"/>
    
    
      <category term="PHP" scheme="http://yoursite.com/tags/PHP/"/>
    
  </entry>
  
</feed>
